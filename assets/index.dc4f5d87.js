(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var pn=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Wt=[],zt=[],Yf=typeof Uint8Array<"u"?Uint8Array:Array,fo=!1;function Tl(){fo=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Wt[e]=t[e],zt[t.charCodeAt(e)]=e;zt["-".charCodeAt(0)]=62,zt["_".charCodeAt(0)]=63}function qf(t){fo||Tl();var e,r,n,a,o,i,s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=t[s-2]==="="?2:t[s-1]==="="?1:0,i=new Yf(s*3/4-o),n=o>0?s-4:s;var l=0;for(e=0,r=0;e<n;e+=4,r+=3)a=zt[t.charCodeAt(e)]<<18|zt[t.charCodeAt(e+1)]<<12|zt[t.charCodeAt(e+2)]<<6|zt[t.charCodeAt(e+3)],i[l++]=a>>16&255,i[l++]=a>>8&255,i[l++]=a&255;return o===2?(a=zt[t.charCodeAt(e)]<<2|zt[t.charCodeAt(e+1)]>>4,i[l++]=a&255):o===1&&(a=zt[t.charCodeAt(e)]<<10|zt[t.charCodeAt(e+1)]<<4|zt[t.charCodeAt(e+2)]>>2,i[l++]=a>>8&255,i[l++]=a&255),i}function Wf(t){return Wt[t>>18&63]+Wt[t>>12&63]+Wt[t>>6&63]+Wt[t&63]}function Xf(t,e,r){for(var n,a=[],o=e;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],a.push(Wf(n));return a.join("")}function $o(t){fo||Tl();for(var e,r=t.length,n=r%3,a="",o=[],i=16383,s=0,l=r-n;s<l;s+=i)o.push(Xf(t,s,s+i>l?l:s+i));return n===1?(e=t[r-1],a+=Wt[e>>2],a+=Wt[e<<4&63],a+="=="):n===2&&(e=(t[r-2]<<8)+t[r-1],a+=Wt[e>>10],a+=Wt[e>>4&63],a+=Wt[e<<2&63],a+="="),o.push(a),o.join("")}function ti(t,e,r,n,a){var o,i,s=a*8-n-1,l=(1<<s)-1,u=l>>1,f=-7,h=r?a-1:0,v=r?-1:1,c=t[e+h];for(h+=v,o=c&(1<<-f)-1,c>>=-f,f+=s;f>0;o=o*256+t[e+h],h+=v,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=n;f>0;i=i*256+t[e+h],h+=v,f-=8);if(o===0)o=1-u;else{if(o===l)return i?NaN:(c?-1:1)*(1/0);i=i+Math.pow(2,n),o=o-u}return(c?-1:1)*i*Math.pow(2,o-n)}function Cl(t,e,r,n,a,o){var i,s,l,u=o*8-a-1,f=(1<<u)-1,h=f>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,d=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,i=f):(i=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+h>=1?e+=v/l:e+=v*Math.pow(2,1-h),e*l>=2&&(i++,l/=2),i+h>=f?(s=0,i=f):i+h>=1?(s=(e*l-1)*Math.pow(2,a),i=i+h):(s=e*Math.pow(2,h-1)*Math.pow(2,a),i=0));a>=8;t[r+c]=s&255,c+=d,s/=256,a-=8);for(i=i<<a|s,u+=a;u>0;t[r+c]=i&255,c+=d,i/=256,u-=8);t[r+c-d]|=g*128}var Kf={}.toString,Sl=Array.isArray||function(t){return Kf.call(t)=="[object Array]"},Zf=50;Z.TYPED_ARRAY_SUPPORT=pn.TYPED_ARRAY_SUPPORT!==void 0?pn.TYPED_ARRAY_SUPPORT:!0;Ua();function Ua(){return Z.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function nr(t,e){if(Ua()<e)throw new RangeError("Invalid typed array length");return Z.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Z.prototype):(t===null&&(t=new Z(e)),t.length=e),t}function Z(t,e,r){if(!Z.TYPED_ARRAY_SUPPORT&&!(this instanceof Z))return new Z(t,e,r);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return ho(this,t)}return Dl(this,t,e,r)}Z.poolSize=8192;Z._augment=function(t){return t.__proto__=Z.prototype,t};function Dl(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?jf(t,e,r,n):typeof e=="string"?Jf(t,e,r):eh(t,e)}Z.from=function(t,e,r){return Dl(null,t,e,r)};Z.TYPED_ARRAY_SUPPORT&&(Z.prototype.__proto__=Uint8Array.prototype,Z.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Z[Symbol.species]);function Ll(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Qf(t,e,r,n){return Ll(e),e<=0?nr(t,e):r!==void 0?typeof n=="string"?nr(t,e).fill(r,n):nr(t,e).fill(r):nr(t,e)}Z.alloc=function(t,e,r){return Qf(null,t,e,r)};function ho(t,e){if(Ll(e),t=nr(t,e<0?0:co(e)|0),!Z.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}Z.allocUnsafe=function(t){return ho(null,t)};Z.allocUnsafeSlow=function(t){return ho(null,t)};function Jf(t,e,r){if((typeof r!="string"||r==="")&&(r="utf8"),!Z.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=Nl(e,r)|0;t=nr(t,n);var a=t.write(e,r);return a!==n&&(t=t.slice(0,a)),t}function Xi(t,e){var r=e.length<0?0:co(e.length)|0;t=nr(t,r);for(var n=0;n<r;n+=1)t[n]=e[n]&255;return t}function jf(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,r):e=new Uint8Array(e,r,n),Z.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Z.prototype):t=Xi(t,e),t}function eh(t,e){if(Zt(e)){var r=co(e.length)|0;return t=nr(t,r),t.length===0||e.copy(t,0,0,r),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||wh(e.length)?nr(t,0):Xi(t,e);if(e.type==="Buffer"&&Sl(e.data))return Xi(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function co(t){if(t>=Ua())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ua().toString(16)+" bytes");return t|0}Z.isBuffer=Ot;function Zt(t){return!!(t!=null&&t._isBuffer)}Z.compare=function(e,r){if(!Zt(e)||!Zt(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,a=r.length,o=0,i=Math.min(n,a);o<i;++o)if(e[o]!==r[o]){n=e[o],a=r[o];break}return n<a?-1:a<n?1:0};Z.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Z.concat=function(e,r){if(!Sl(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Z.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var a=Z.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!Zt(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(a,o),o+=i.length}return a};function Nl(t,e){if(Zt(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var r=t.length;if(r===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Va(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Fl(t).length;default:if(n)return Va(t).length;e=(""+e).toLowerCase(),n=!0}}Z.byteLength=Nl;function th(t,e,r){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return hh(this,e,r);case"utf8":case"utf-8":return Ol(this,e,r);case"ascii":return uh(this,e,r);case"latin1":case"binary":return fh(this,e,r);case"base64":return sh(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ch(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Z.prototype._isBuffer=!0;function _r(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}Z.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)_r(this,r,r+1);return this};Z.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)_r(this,r,r+3),_r(this,r+1,r+2);return this};Z.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)_r(this,r,r+7),_r(this,r+1,r+6),_r(this,r+2,r+5),_r(this,r+3,r+4);return this};Z.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Ol(this,0,e):th.apply(this,arguments)};Z.prototype.equals=function(e){if(!Zt(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Z.compare(this,e)===0};Z.prototype.inspect=function(){var e="",r=Zf;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"};Z.prototype.compare=function(e,r,n,a,o){if(!Zt(e))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),a===void 0&&(a=0),o===void 0&&(o=this.length),r<0||n>e.length||a<0||o>this.length)throw new RangeError("out of range index");if(a>=o&&r>=n)return 0;if(a>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,a>>>=0,o>>>=0,this===e)return 0;for(var i=o-a,s=n-r,l=Math.min(i,s),u=this.slice(a,o),f=e.slice(r,n),h=0;h<l;++h)if(u[h]!==f[h]){i=u[h],s=f[h];break}return i<s?-1:s<i?1:0};function Ml(t,e,r,n,a){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(a)return-1;r=t.length-1}else if(r<0)if(a)r=0;else return-1;if(typeof e=="string"&&(e=Z.from(e,n)),Zt(e))return e.length===0?-1:Yo(t,e,r,n,a);if(typeof e=="number")return e=e&255,Z.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Yo(t,[e],r,n,a);throw new TypeError("val must be string, number or Buffer")}function Yo(t,e,r,n,a){var o=1,i=t.length,s=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,i/=2,s/=2,r/=2}function l(c,d){return o===1?c[d]:c.readUInt16BE(d*o)}var u;if(a){var f=-1;for(u=r;u<i;u++)if(l(t,u)===l(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===s)return f*o}else f!==-1&&(u-=u-f),f=-1}else for(r+s>i&&(r=i-s),u=r;u>=0;u--){for(var h=!0,v=0;v<s;v++)if(l(t,u+v)!==l(e,v)){h=!1;break}if(h)return u}return-1}Z.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Z.prototype.indexOf=function(e,r,n){return Ml(this,e,r,n,!0)};Z.prototype.lastIndexOf=function(e,r,n){return Ml(this,e,r,n,!1)};function rh(t,e,r,n){r=Number(r)||0;var a=t.length-r;n?(n=Number(n),n>a&&(n=a)):n=a;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(e.substr(i*2,2),16);if(isNaN(s))return i;t[r+i]=s}return i}function nh(t,e,r,n){return ai(Va(e,t.length-r),t,r,n)}function Al(t,e,r,n){return ai(mh(e),t,r,n)}function ah(t,e,r,n){return Al(t,e,r,n)}function ih(t,e,r,n){return ai(Fl(e),t,r,n)}function oh(t,e,r,n){return ai(yh(e,t.length-r),t,r,n)}Z.prototype.write=function(e,r,n,a){if(r===void 0)a="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")a=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,a===void 0&&(a="utf8")):(a=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var i=!1;;)switch(a){case"hex":return rh(this,e,r,n);case"utf8":case"utf-8":return nh(this,e,r,n);case"ascii":return Al(this,e,r,n);case"latin1":case"binary":return ah(this,e,r,n);case"base64":return ih(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oh(this,e,r,n);default:if(i)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),i=!0}};Z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function sh(t,e,r){return e===0&&r===t.length?$o(t):$o(t.slice(e,r))}function Ol(t,e,r){r=Math.min(t.length,r);for(var n=[],a=e;a<r;){var o=t[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=r){var l,u,f,h;switch(s){case 1:o<128&&(i=o);break;case 2:l=t[a+1],(l&192)===128&&(h=(o&31)<<6|l&63,h>127&&(i=h));break;case 3:l=t[a+1],u=t[a+2],(l&192)===128&&(u&192)===128&&(h=(o&15)<<12|(l&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(i=h));break;case 4:l=t[a+1],u=t[a+2],f=t[a+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(h=(o&15)<<18|(l&63)<<12|(u&63)<<6|f&63,h>65535&&h<1114112&&(i=h))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),a+=s}return lh(n)}var qo=4096;function lh(t){var e=t.length;if(e<=qo)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=qo));return r}function uh(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(t[a]&127);return n}function fh(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(t[a]);return n}function hh(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var a="",o=e;o<r;++o)a+=ph(t[o]);return a}function ch(t,e,r){for(var n=t.slice(e,r),a="",o=0;o<n.length;o+=2)a+=String.fromCharCode(n[o]+n[o+1]*256);return a}Z.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var a;if(Z.TYPED_ARRAY_SUPPORT)a=this.subarray(e,r),a.__proto__=Z.prototype;else{var o=r-e;a=new Z(o,void 0);for(var i=0;i<o;++i)a[i]=this[i+e]}return a};function pt(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Z.prototype.readUIntLE=function(e,r,n){e=e|0,r=r|0,n||pt(e,r,this.length);for(var a=this[e],o=1,i=0;++i<r&&(o*=256);)a+=this[e+i]*o;return a};Z.prototype.readUIntBE=function(e,r,n){e=e|0,r=r|0,n||pt(e,r,this.length);for(var a=this[e+--r],o=1;r>0&&(o*=256);)a+=this[e+--r]*o;return a};Z.prototype.readUInt8=function(e,r){return r||pt(e,1,this.length),this[e]};Z.prototype.readUInt16LE=function(e,r){return r||pt(e,2,this.length),this[e]|this[e+1]<<8};Z.prototype.readUInt16BE=function(e,r){return r||pt(e,2,this.length),this[e]<<8|this[e+1]};Z.prototype.readUInt32LE=function(e,r){return r||pt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Z.prototype.readUInt32BE=function(e,r){return r||pt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Z.prototype.readIntLE=function(e,r,n){e=e|0,r=r|0,n||pt(e,r,this.length);for(var a=this[e],o=1,i=0;++i<r&&(o*=256);)a+=this[e+i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*r)),a};Z.prototype.readIntBE=function(e,r,n){e=e|0,r=r|0,n||pt(e,r,this.length);for(var a=r,o=1,i=this[e+--a];a>0&&(o*=256);)i+=this[e+--a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};Z.prototype.readInt8=function(e,r){return r||pt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Z.prototype.readInt16LE=function(e,r){r||pt(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt16BE=function(e,r){r||pt(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Z.prototype.readInt32LE=function(e,r){return r||pt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Z.prototype.readInt32BE=function(e,r){return r||pt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Z.prototype.readFloatLE=function(e,r){return r||pt(e,4,this.length),ti(this,e,!0,23,4)};Z.prototype.readFloatBE=function(e,r){return r||pt(e,4,this.length),ti(this,e,!1,23,4)};Z.prototype.readDoubleLE=function(e,r){return r||pt(e,8,this.length),ti(this,e,!0,52,8)};Z.prototype.readDoubleBE=function(e,r){return r||pt(e,8,this.length),ti(this,e,!1,52,8)};function Pt(t,e,r,n,a,o){if(!Zt(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Z.prototype.writeUIntLE=function(e,r,n,a){if(e=+e,r=r|0,n=n|0,!a){var o=Math.pow(2,8*n)-1;Pt(this,e,r,n,o,0)}var i=1,s=0;for(this[r]=e&255;++s<n&&(i*=256);)this[r+s]=e/i&255;return r+n};Z.prototype.writeUIntBE=function(e,r,n,a){if(e=+e,r=r|0,n=n|0,!a){var o=Math.pow(2,8*n)-1;Pt(this,e,r,n,o,0)}var i=n-1,s=1;for(this[r+i]=e&255;--i>=0&&(s*=256);)this[r+i]=e/s&255;return r+n};Z.prototype.writeUInt8=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,1,255,0),Z.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=e&255,r+1};function ri(t,e,r,n){e<0&&(e=65535+e+1);for(var a=0,o=Math.min(t.length-r,2);a<o;++a)t[r+a]=(e&255<<8*(n?a:1-a))>>>(n?a:1-a)*8}Z.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,2,65535,0),Z.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):ri(this,e,r,!0),r+2};Z.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,2,65535,0),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):ri(this,e,r,!1),r+2};function ni(t,e,r,n){e<0&&(e=4294967295+e+1);for(var a=0,o=Math.min(t.length-r,4);a<o;++a)t[r+a]=e>>>(n?a:3-a)*8&255}Z.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,4,4294967295,0),Z.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255):ni(this,e,r,!0),r+4};Z.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,4,4294967295,0),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):ni(this,e,r,!1),r+4};Z.prototype.writeIntLE=function(e,r,n,a){if(e=+e,r=r|0,!a){var o=Math.pow(2,8*n-1);Pt(this,e,r,n,o-1,-o)}var i=0,s=1,l=0;for(this[r]=e&255;++i<n&&(s*=256);)e<0&&l===0&&this[r+i-1]!==0&&(l=1),this[r+i]=(e/s>>0)-l&255;return r+n};Z.prototype.writeIntBE=function(e,r,n,a){if(e=+e,r=r|0,!a){var o=Math.pow(2,8*n-1);Pt(this,e,r,n,o-1,-o)}var i=n-1,s=1,l=0;for(this[r+i]=e&255;--i>=0&&(s*=256);)e<0&&l===0&&this[r+i+1]!==0&&(l=1),this[r+i]=(e/s>>0)-l&255;return r+n};Z.prototype.writeInt8=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,1,127,-128),Z.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=e&255,r+1};Z.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,2,32767,-32768),Z.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8):ri(this,e,r,!0),r+2};Z.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,2,32767,-32768),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=e&255):ri(this,e,r,!1),r+2};Z.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,4,2147483647,-2147483648),Z.TYPED_ARRAY_SUPPORT?(this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):ni(this,e,r,!0),r+4};Z.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r|0,n||Pt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Z.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255):ni(this,e,r,!1),r+4};function Rl(t,e,r,n,a,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Il(t,e,r,n,a){return a||Rl(t,e,r,4),Cl(t,e,r,n,23,4),r+4}Z.prototype.writeFloatLE=function(e,r,n){return Il(this,e,r,!0,n)};Z.prototype.writeFloatBE=function(e,r,n){return Il(this,e,r,!1,n)};function Pl(t,e,r,n,a){return a||Rl(t,e,r,8),Cl(t,e,r,n,52,8),r+8}Z.prototype.writeDoubleLE=function(e,r,n){return Pl(this,e,r,!0,n)};Z.prototype.writeDoubleBE=function(e,r,n){return Pl(this,e,r,!1,n)};Z.prototype.copy=function(e,r,n,a){if(n||(n=0),!a&&a!==0&&(a=this.length),r>=e.length&&(r=e.length),r||(r=0),a>0&&a<n&&(a=n),a===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-r<a-n&&(a=e.length-r+n);var o=a-n,i;if(this===e&&n<r&&r<a)for(i=o-1;i>=0;--i)e[i+r]=this[i+n];else if(o<1e3||!Z.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+r]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),r);return o};Z.prototype.fill=function(e,r,n,a){if(typeof e=="string"){if(typeof r=="string"?(a=r,r=0,n=this.length):typeof n=="string"&&(a=n,n=this.length),e.length===1){var o=e.charCodeAt(0);o<256&&(e=o)}if(a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!Z.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{var s=Zt(e)?e:Va(new Z(e,a).toString()),l=s.length;for(i=0;i<n-r;++i)this[i+r]=s[i%l]}return this};var vh=/[^+\/0-9A-Za-z-_]/g;function dh(t){if(t=gh(t).replace(vh,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function gh(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function ph(t){return t<16?"0"+t.toString(16):t.toString(16)}function Va(t,e){e=e||1/0;for(var r,n=t.length,a=null,o=[],i=0;i<n;++i){if(r=t.charCodeAt(i),r>55295&&r<57344){if(!a){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(i+1===n){(e-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(e-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function mh(t){for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function yh(t,e){for(var r,n,a,o=[],i=0;i<t.length&&!((e-=2)<0);++i)r=t.charCodeAt(i),n=r>>8,a=r%256,o.push(a),o.push(n);return o}function Fl(t){return qf(dh(t))}function ai(t,e,r,n){for(var a=0;a<n&&!(a+r>=e.length||a>=t.length);++a)e[a+r]=t[a];return a}function wh(t){return t!==t}function Ot(t){return t!=null&&(!!t._isBuffer||Bl(t)||bh(t))}function Bl(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function bh(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&Bl(t.slice(0,0))}var Eh;function Cr(){}Cr.prototype=Object.create(null);function _e(){_e.init.call(this)}_e.EventEmitter=_e;_e.usingDomains=!1;_e.prototype.domain=void 0;_e.prototype._events=void 0;_e.prototype._maxListeners=void 0;_e.defaultMaxListeners=10;_e.init=function(){this.domain=null,_e.usingDomains&&Eh.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Cr,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_e.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function kl(t){return t._maxListeners===void 0?_e.defaultMaxListeners:t._maxListeners}_e.prototype.getMaxListeners=function(){return kl(this)};function xh(t,e,r){if(e)t.call(r);else for(var n=t.length,a=ta(t,n),o=0;o<n;++o)a[o].call(r)}function Th(t,e,r,n){if(e)t.call(r,n);else for(var a=t.length,o=ta(t,a),i=0;i<a;++i)o[i].call(r,n)}function Ch(t,e,r,n,a){if(e)t.call(r,n,a);else for(var o=t.length,i=ta(t,o),s=0;s<o;++s)i[s].call(r,n,a)}function Sh(t,e,r,n,a,o){if(e)t.call(r,n,a,o);else for(var i=t.length,s=ta(t,i),l=0;l<i;++l)s[l].call(r,n,a,o)}function Dh(t,e,r,n){if(e)t.apply(r,n);else for(var a=t.length,o=ta(t,a),i=0;i<a;++i)o[i].apply(r,n)}_e.prototype.emit=function(e){var r,n,a,o,i,s,l,u=e==="error";if(s=this._events,s)u=u&&s.error==null;else if(!u)return!1;if(l=this.domain,u){if(r=arguments[1],l)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=l,r.domainThrown=!1,l.emit("error",r);else{if(r instanceof Error)throw r;var f=new Error('Uncaught, unspecified "error" event. ('+r+")");throw f.context=r,f}return!1}if(n=s[e],!n)return!1;var h=typeof n=="function";switch(a=arguments.length,a){case 1:xh(n,h,this);break;case 2:Th(n,h,this,arguments[1]);break;case 3:Ch(n,h,this,arguments[1],arguments[2]);break;case 4:Sh(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(a-1),i=1;i<a;i++)o[i-1]=arguments[i];Dh(n,h,this,o)}return!0};function _l(t,e,r,n){var a,o,i;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(o=t._events,o?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),i=o[e]):(o=t._events=new Cr,t._eventsCount=0),!i)i=o[e]=r,++t._eventsCount;else if(typeof i=="function"?i=o[e]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),!i.warned&&(a=kl(t),a&&a>0&&i.length>a)){i.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=i.length,Lh(s)}return t}function Lh(t){typeof console.warn=="function"?console.warn(t):console.log(t)}_e.prototype.addListener=function(e,r){return _l(this,e,r,!1)};_e.prototype.on=_e.prototype.addListener;_e.prototype.prependListener=function(e,r){return _l(this,e,r,!0)};function zl(t,e,r){var n=!1;function a(){t.removeListener(e,a),n||(n=!0,r.apply(t,arguments))}return a.listener=r,a}_e.prototype.once=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,zl(this,e,r)),this};_e.prototype.prependOnceListener=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,zl(this,e,r)),this};_e.prototype.removeListener=function(e,r){var n,a,o,i,s;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(a=this._events,!a)return this;if(n=a[e],!n)return this;if(n===r||n.listener&&n.listener===r)--this._eventsCount===0?this._events=new Cr:(delete a[e],a.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,i=n.length;i-- >0;)if(n[i]===r||n[i].listener&&n[i].listener===r){s=n[i].listener,o=i;break}if(o<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Cr,this;delete a[e]}else Nh(n,o);a.removeListener&&this.emit("removeListener",e,s||r)}return this};_e.prototype.removeAllListeners=function(e){var r,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Cr,this._eventsCount=0):n[e]&&(--this._eventsCount===0?this._events=new Cr:delete n[e]),this;if(arguments.length===0){for(var a=Object.keys(n),o=0,i;o<a.length;++o)i=a[o],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Cr,this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r)do this.removeListener(e,r[r.length-1]);while(r[0]);return this};_e.prototype.listeners=function(e){var r,n,a=this._events;return a?(r=a[e],r?typeof r=="function"?n=[r.listener||r]:n=Mh(r):n=[]):n=[],n};_e.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Gl.call(t,e)};_e.prototype.listenerCount=Gl;function Gl(t){var e=this._events;if(e){var r=e[t];if(typeof r=="function")return 1;if(r)return r.length}return 0}_e.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function Nh(t,e){for(var r=e,n=r+1,a=t.length;n<a;r+=1,n+=1)t[r]=t[n];t.pop()}function ta(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}function Mh(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Ul(){throw new Error("setTimeout has not been defined")}function Vl(){throw new Error("clearTimeout has not been defined")}var wr=Ul,br=Vl;typeof pn.setTimeout=="function"&&(wr=setTimeout);typeof pn.clearTimeout=="function"&&(br=clearTimeout);function Hl(t){if(wr===setTimeout)return setTimeout(t,0);if((wr===Ul||!wr)&&setTimeout)return wr=setTimeout,setTimeout(t,0);try{return wr(t,0)}catch{try{return wr.call(null,t,0)}catch{return wr.call(this,t,0)}}}function Ah(t){if(br===clearTimeout)return clearTimeout(t);if((br===Vl||!br)&&clearTimeout)return br=clearTimeout,clearTimeout(t);try{return br(t)}catch{try{return br.call(null,t)}catch{return br.call(this,t)}}}var ar=[],hn=!1,zr,Ra=-1;function Oh(){!hn||!zr||(hn=!1,zr.length?ar=zr.concat(ar):Ra=-1,ar.length&&$l())}function $l(){if(!hn){var t=Hl(Oh);hn=!0;for(var e=ar.length;e;){for(zr=ar,ar=[];++Ra<e;)zr&&zr[Ra].run();Ra=-1,e=ar.length}zr=null,hn=!1,Ah(t)}}function Bt(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];ar.push(new Yl(t,e)),ar.length===1&&!hn&&Hl($l)}function Yl(t,e){this.fun=t,this.array=e}Yl.prototype.run=function(){this.fun.apply(null,this.array)};var Rh="browser",Ih="browser",Ph=!0,Fh={},Bh=[],kh="",_h={},zh={},Gh={};function Xr(){}var Uh=Xr,Vh=Xr,Hh=Xr,$h=Xr,Yh=Xr,qh=Xr,Wh=Xr;function Xh(t){throw new Error("process.binding is not supported")}function Kh(){return"/"}function Zh(t){throw new Error("process.chdir is not supported")}function Qh(){return 0}var sn=pn.performance||{},Jh=sn.now||sn.mozNow||sn.msNow||sn.oNow||sn.webkitNow||function(){return new Date().getTime()};function jh(t){var e=Jh.call(sn)*.001,r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r=r-t[0],n=n-t[1],n<0&&(r--,n+=1e9)),[r,n]}var ec=new Date;function tc(){var t=new Date,e=t-ec;return e/1e3}var Ia={nextTick:Bt,title:Rh,browser:Ph,env:Fh,argv:Bh,version:kh,versions:_h,on:Uh,addListener:Vh,once:Hh,off:$h,removeListener:Yh,removeAllListeners:qh,emit:Wh,binding:Xh,cwd:Kh,chdir:Zh,umask:Qh,hrtime:jh,platform:Ih,release:zh,config:Gh,uptime:tc},Ki;typeof Object.create=="function"?Ki=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Ki=function(e,r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e};var bn=Ki,rc=/%[sdj%]/g;function nc(t){if(!go(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(Sr(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,a=n.length,o=String(t).replace(rc,function(s){if(s==="%%")return"%";if(r>=a)return s;switch(s){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return s}}),i=n[r];r<a;i=n[++r])vo(i)||!ra(i)?o+=" "+i:o+=" "+Sr(i);return o}function ql(t,e){if(xr(pn.process))return function(){return ql(t,e).apply(this,arguments)};if(Ia.noDeprecation===!0)return t;var r=!1;function n(){if(!r){if(Ia.throwDeprecation)throw new Error(e);Ia.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return n}var wa={},Si;function ac(t){if(xr(Si)&&(Si=Ia.env.NODE_DEBUG||""),t=t.toUpperCase(),!wa[t])if(new RegExp("\\b"+t+"\\b","i").test(Si)){var e=0;wa[t]=function(){var r=nc.apply(null,arguments);console.error("%s %d: %s",t,e,r)}}else wa[t]=function(){};return wa[t]}function Sr(t,e){var r={seen:[],stylize:oc};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Wl(e)?r.showHidden=e:e&&vc(r,e),xr(r.showHidden)&&(r.showHidden=!1),xr(r.depth)&&(r.depth=2),xr(r.colors)&&(r.colors=!1),xr(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ic),Ha(r,t,r.depth)}Sr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Sr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ic(t,e){var r=Sr.styles[e];return r?"\x1B["+Sr.colors[r][0]+"m"+t+"\x1B["+Sr.colors[r][1]+"m":t}function oc(t,e){return t}function sc(t){var e={};return t.forEach(function(r,n){e[r]=!0}),e}function Ha(t,e,r){if(t.customInspect&&e&&Mi(e.inspect)&&e.inspect!==Sr&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(r,t);return go(n)||(n=Ha(t,n,r)),n}var a=lc(t,e);if(a)return a;var o=Object.keys(e),i=sc(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(e)),Ni(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Di(e);if(o.length===0){if(Mi(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(Li(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Wo(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ni(e))return Di(e)}var l="",u=!1,f=["{","}"];if(hc(e)&&(u=!0,f=["[","]"]),Mi(e)){var h=e.name?": "+e.name:"";l=" [Function"+h+"]"}if(Li(e)&&(l=" "+RegExp.prototype.toString.call(e)),Wo(e)&&(l=" "+Date.prototype.toUTCString.call(e)),Ni(e)&&(l=" "+Di(e)),o.length===0&&(!u||e.length==0))return f[0]+l+f[1];if(r<0)return Li(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var v;return u?v=uc(t,e,r,i,o):v=o.map(function(c){return Zi(t,e,r,i,c,u)}),t.seen.pop(),fc(v,l,f)}function lc(t,e){if(xr(e))return t.stylize("undefined","undefined");if(go(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(cc(e))return t.stylize(""+e,"number");if(Wl(e))return t.stylize(""+e,"boolean");if(vo(e))return t.stylize("null","null")}function Di(t){return"["+Error.prototype.toString.call(t)+"]"}function uc(t,e,r,n,a){for(var o=[],i=0,s=e.length;i<s;++i)Xl(e,String(i))?o.push(Zi(t,e,r,n,String(i),!0)):o.push("");return a.forEach(function(l){l.match(/^\d+$/)||o.push(Zi(t,e,r,n,l,!0))}),o}function Zi(t,e,r,n,a,o){var i,s,l;if(l=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]},l.get?l.set?s=t.stylize("[Getter/Setter]","special"):s=t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),Xl(n,a)||(i="["+a+"]"),s||(t.seen.indexOf(l.value)<0?(vo(r)?s=Ha(t,l.value,null):s=Ha(t,l.value,r-1),s.indexOf(`
`)>-1&&(o?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=t.stylize("[Circular]","special")),xr(i)){if(o&&a.match(/^\d+$/))return s;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=t.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=t.stylize(i,"string"))}return i+": "+s}function fc(t,e,r){var n=t.reduce(function(a,o){return o.indexOf(`
`)>=0,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function hc(t){return Array.isArray(t)}function Wl(t){return typeof t=="boolean"}function vo(t){return t===null}function cc(t){return typeof t=="number"}function go(t){return typeof t=="string"}function xr(t){return t===void 0}function Li(t){return ra(t)&&po(t)==="[object RegExp]"}function ra(t){return typeof t=="object"&&t!==null}function Wo(t){return ra(t)&&po(t)==="[object Date]"}function Ni(t){return ra(t)&&(po(t)==="[object Error]"||t instanceof Error)}function Mi(t){return typeof t=="function"}function po(t){return Object.prototype.toString.call(t)}function vc(t,e){if(!e||!ra(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}function Xl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kr(){this.head=null,this.tail=null,this.length=0}Kr.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};Kr.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};Kr.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};Kr.prototype.clear=function(){this.head=this.tail=null,this.length=0};Kr.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r};Kr.prototype.concat=function(t){if(this.length===0)return Z.alloc(0);if(this.length===1)return this.head.data;for(var e=Z.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};var dc=Z.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gc(t){if(t&&!dc(t))throw new Error("Unknown encoding: "+t)}function na(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),gc(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=mc;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=yc;break;default:this.write=pc;return}this.charBuffer=new Z(6),this.charReceived=0,this.charLength=0}na.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var a=e.charCodeAt(e.length-1);if(a>=55296&&a<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var n=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived),e+=t.toString(this.encoding,0,n);var n=e.length-1,a=e.charCodeAt(n);if(a>=55296&&a<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,n)}return e};na.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(e==1&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e};na.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,a=this.encoding;e+=n.slice(0,r).toString(a)}return e};function pc(t){return t.toString(this.encoding)}function mc(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function yc(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}ot.ReadableState=Kl;var Ke=ac("stream");bn(ot,_e);function wc(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function bc(t,e){return t.listeners(e).length}function Kl(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Vt&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Kr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new na(t.encoding),this.encoding=t.encoding)}function ot(t){if(!(this instanceof ot))return new ot(t);this._readableState=new Kl(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),_e.call(this)}ot.prototype.push=function(t,e){var r=this._readableState;return!r.objectMode&&typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Z.from(t,e),e="")),Zl(this,r,t,e,!1)};ot.prototype.unshift=function(t){var e=this._readableState;return Zl(this,e,t,"",!0)};ot.prototype.isPaused=function(){return this._readableState.flowing===!1};function Zl(t,e,r,n,a){var o=Tc(e,r);if(o)t.emit("error",o);else if(r===null)e.reading=!1,Cc(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!a){var i=new Error("stream.push() after EOF");t.emit("error",i)}else if(e.endEmitted&&a){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var l;e.decoder&&!a&&!n&&(r=e.decoder.write(r),l=!e.objectMode&&r.length===0),a||(e.reading=!1),l||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,a?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ii(t))),Sc(t,e)}else a||(e.reading=!1);return Ec(e)}function Ec(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}ot.prototype.setEncoding=function(t){return this._readableState.decoder=new na(t),this._readableState.encoding=t,this};var Xo=8388608;function xc(t){return t>=Xo?t=Xo:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Ko(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=xc(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ot.prototype.read=function(t){Ke("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ke("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Ai(this):ii(this),null;if(t=Ko(t,e),t===0&&e.ended)return e.length===0&&Ai(this),null;var n=e.needReadable;Ke("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ke("length less than watermark",n)),e.ended||e.reading?(n=!1,Ke("reading or ended",n)):n&&(Ke("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Ko(r,e)));var a;return t>0?a=Ql(t,e):a=null,a===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Ai(this)),a!==null&&this.emit("data",a),a};function Tc(t,e){var r=null;return!Ot(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Cc(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,ii(t)}}function ii(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Ke("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Bt(Zo,t):Zo(t))}function Zo(t){Ke("emit readable"),t.emit("readable"),mo(t)}function Sc(t,e){e.readingMore||(e.readingMore=!0,Bt(Dc,t,e))}function Dc(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ke("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}ot.prototype._read=function(t){this.emit("error",new Error("not implemented"))};ot.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ke("pipe count=%d opts=%j",n.pipesCount,e);var a=!e||e.end!==!1,o=a?s:f;n.endEmitted?Bt(o):r.once("end",o),t.on("unpipe",i);function i(p){Ke("onunpipe"),p===r&&f()}function s(){Ke("onend"),t.end()}var l=Lc(r);t.on("drain",l);var u=!1;function f(){Ke("cleanup"),t.removeListener("close",d),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",c),t.removeListener("unpipe",i),r.removeListener("end",s),r.removeListener("end",f),r.removeListener("data",v),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var h=!1;r.on("data",v);function v(p){Ke("ondata"),h=!1;var y=t.write(p);y===!1&&!h&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Jl(n.pipes,t)!==-1)&&!u&&(Ke("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function c(p){Ke("onerror",p),m(),t.removeListener("error",c),bc(t,"error")===0&&t.emit("error",p)}wc(t,"error",c);function d(){t.removeListener("finish",g),m()}t.once("close",d);function g(){Ke("onfinish"),t.removeListener("close",d),m()}t.once("finish",g);function m(){Ke("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ke("pipe resume"),r.resume()),t};function Lc(t){return function(){var e=t._readableState;Ke("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,mo(t))}}ot.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)r[a].emit("unpipe",this);return this}var o=Jl(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};ot.prototype.on=function(t,e){var r=_e.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ii(this):Bt(Nc,this))}return r};ot.prototype.addListener=ot.prototype.on;function Nc(t){Ke("readable nexttick read 0"),t.read(0)}ot.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ke("resume"),t.flowing=!0,Mc(this,t)),this};function Mc(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Bt(Ac,t,e))}function Ac(t,e){e.reading||(Ke("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),mo(t),e.flowing&&!e.reading&&t.read(0)}ot.prototype.pause=function(){return Ke("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ke("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function mo(t){var e=t._readableState;for(Ke("flow",e.flowing);e.flowing&&t.read()!==null;);}ot.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(Ke("wrapped end"),e.decoder&&!e.ended){var i=e.decoder.end();i&&i.length&&n.push(i)}n.push(null)}),t.on("data",function(i){if(Ke("wrapped data"),e.decoder&&(i=e.decoder.write(i)),!(e.objectMode&&i==null)&&!(!e.objectMode&&(!i||!i.length))){var s=n.push(i);s||(r=!0,t.pause())}});for(var a in t)this[a]===void 0&&typeof t[a]=="function"&&(this[a]=function(i){return function(){return t[i].apply(t,arguments)}}(a));var o=["error","close","destroy","pause","resume"];return Fc(o,function(i){t.on(i,n.emit.bind(n,i))}),n._read=function(i){Ke("wrapped _read",i),r&&(r=!1,t.resume())},n};ot._fromList=Ql;function Ql(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Oc(t,e.buffer,e.decoder),r}function Oc(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?Rc(t,e):Ic(t,e),n}function Rc(t,e){var r=e.head,n=1,a=r.data;for(t-=a.length;r=r.next;){var o=r.data,i=t>o.length?o.length:t;if(i===o.length?a+=o:a+=o.slice(0,t),t-=i,t===0){i===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(i));break}++n}return e.length-=n,a}function Ic(t,e){var r=Z.allocUnsafe(t),n=e.head,a=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,i=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,i),t-=i,t===0){i===o.length?(++a,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(i));break}++a}return e.length-=a,r}function Ai(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Bt(Pc,e,t))}function Pc(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Fc(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function Jl(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}Ct.WritableState=yo;bn(Ct,_e);function Bc(){}function kc(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function yo(t,e){Object.defineProperty(this,"buffer",{get:ql(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Vt&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=t.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){$c(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ru(this)}yo.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};function Ct(t){if(!(this instanceof Ct)&&!(this instanceof Vt))return new Ct(t);this._writableState=new yo(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),_e.call(this)}Ct.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function _c(t,e){var r=new Error("write after end");t.emit("error",r),Bt(e,r)}function zc(t,e,r,n){var a=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):!Z.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),Bt(n,o),a=!1),a}Ct.prototype.write=function(t,e,r){var n=this._writableState,a=!1;return typeof e=="function"&&(r=e,e=null),Z.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Bc),n.ended?_c(this,r):zc(this,n,t,r)&&(n.pendingcb++,a=Uc(this,n,t,e,r)),a};Ct.prototype.cork=function(){var t=this._writableState;t.corked++};Ct.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&jl(this,t))};Ct.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Gc(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Z.from(e,r)),e}function Uc(t,e,r,n,a){r=Gc(e,r,n),Z.isBuffer(r)&&(n="buffer");var o=e.objectMode?1:r.length;e.length+=o;var i=e.length<e.highWaterMark;if(i||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new kc(r,n,a),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Qi(t,e,!1,o,r,n,a);return i}function Qi(t,e,r,n,a,o,i){e.writelen=n,e.writecb=i,e.writing=!0,e.sync=!0,r?t._writev(a,e.onwrite):t._write(a,o,e.onwrite),e.sync=!1}function Vc(t,e,r,n,a){--e.pendingcb,r?Bt(a,n):a(n),t._writableState.errorEmitted=!0,t.emit("error",n)}function Hc(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function $c(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(Hc(r),e)Vc(t,r,n,e,a);else{var o=eu(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&jl(t,r),n?Bt(Qo,t,r,o,a):Qo(t,r,o,a)}}function Qo(t,e,r,n){r||Yc(t,e),e.pendingcb--,n(),tu(t,e)}function Yc(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function jl(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,a=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var i=0;r;)a[i]=r,r=r.next,i+=1;Qi(t,e,!0,e.length,a,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new ru(e)}else{for(;r;){var s=r.chunk,l=r.encoding,u=r.callback,f=e.objectMode?1:s.length;if(Qi(t,e,!1,f,s,l,u),r=r.next,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}Ct.prototype._write=function(t,e,r){r(new Error("not implemented"))};Ct.prototype._writev=null;Ct.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&qc(this,n,r)};function eu(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Jo(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function tu(t,e){var r=eu(e);return r&&(e.pendingcb===0?(Jo(t,e),e.finished=!0,t.emit("finish")):Jo(t,e)),r}function qc(t,e,r){e.ending=!0,tu(t,e),r&&(e.finished?Bt(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function ru(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var a=n.callback;t.pendingcb--,a(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}bn(Vt,ot);var jo=Object.keys(Ct.prototype);for(var Oi=0;Oi<jo.length;Oi++){var Ri=jo[Oi];Vt.prototype[Ri]||(Vt.prototype[Ri]=Ct.prototype[Ri])}function Vt(t){if(!(this instanceof Vt))return new Vt(t);ot.call(this,t),Ct.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Wc)}function Wc(){this.allowHalfOpen||this._writableState.ended||Bt(Xc,this)}function Xc(t){t.end()}bn(qt,Vt);function Kc(t){this.afterTransform=function(e,r){return Zc(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Zc(t,e,r){var n=t._transformState;n.transforming=!1;var a=n.writecb;if(!a)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&t.push(r),a(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function qt(t){if(!(this instanceof qt))return new qt(t);Vt.call(this,t),this._transformState=new Kc(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){es(e,r)}):es(e)})}qt.prototype.push=function(t,e){return this._transformState.needTransform=!1,Vt.prototype.push.call(this,t,e)};qt.prototype._transform=function(t,e,r){throw new Error("Not implemented")};qt.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};qt.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function es(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}bn($n,qt);function $n(t){if(!(this instanceof $n))return new $n(t);qt.call(this,t)}$n.prototype._transform=function(t,e,r){r(null,t)};bn(ir,_e);ir.Readable=ot;ir.Writable=Ct;ir.Duplex=Vt;ir.Transform=qt;ir.PassThrough=$n;ir.Stream=ir;function ir(){_e.call(this)}ir.prototype.pipe=function(t,e){var r=this;function n(f){t.writable&&t.write(f)===!1&&r.pause&&r.pause()}r.on("data",n);function a(){r.readable&&r.resume&&r.resume()}t.on("drain",a),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",i),r.on("close",s));var o=!1;function i(){o||(o=!0,t.end())}function s(){o||(o=!0,typeof t.destroy=="function"&&t.destroy())}function l(f){if(u(),_e.listenerCount(this,"error")===0)throw f}r.on("error",l),t.on("error",l);function u(){r.removeListener("data",n),t.removeListener("drain",a),r.removeListener("end",i),r.removeListener("close",s),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};const nu=function(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)};class Ye extends Error{constructor(e,r,n,...a){Array.isArray(r)&&(r=r.join(" ")),super(r),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,Ye),this.code=e;for(const o of a)for(const i in o){const s=o[i];this[i]=Ot(s)?s.toString(n.encoding):s==null?s:JSON.parse(JSON.stringify(s))}}}const au=function(t){const e=[];for(let r=0,n=t.length;r<n;r++){const a=t[r];if(a==null||a===!1)e[r]={disabled:!0};else if(typeof a=="string")e[r]={name:a};else if(nu(a)){if(typeof a.name!="string")throw new Ye("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${r}`,"when column is an object literal"]);e[r]=a}else throw new Ye("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(a)} at position ${r}`])}return e};class ts{constructor(e=100){this.size=e,this.length=0,this.buf=Z.allocUnsafe(e)}prepend(e){if(Ot(e)){const r=this.length+e.length;if(r>=this.size&&(this.resize(),r>=this.size))throw Error("INVALID_BUFFER_STATE");const n=this.buf;this.buf=Z.allocUnsafe(this.size),e.copy(this.buf,0),n.copy(this.buf,e.length),this.length+=e.length}else{const r=this.length++;r===this.size&&this.resize();const n=this.clone();this.buf[0]=e,n.copy(this.buf,1,0,r)}}append(e){const r=this.length++;r===this.size&&this.resize(),this.buf[r]=e}clone(){return Z.from(this.buf.slice(0,this.length))}resize(){const e=this.length;this.size=this.size*2;const r=Z.allocUnsafe(this.size);this.buf.copy(r,0,0,e),this.buf=r}toString(e){return e?this.buf.slice(0,this.length).toString(e):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Qc=12,Jc=13,jc=10,ev=32,tv=9,rv=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:t.from_line===1,escaping:!1,escapeIsQuote:Ot(t.escape)&&Ot(t.quote)&&Z.compare(t.escape,t.quote)===0,expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new ts(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(t.comment!==null?t.comment.length:0,...t.delimiter.map(e=>e.length),t.quote!==null?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ts(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:t.record_delimiter.length===0?0:Math.max(...t.record_delimiter.map(e=>e.length)),trimChars:[Z.from(" ",t.encoding)[0],Z.from("	",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[Z.from(Z.from([Jc],"utf8").toString(),t.encoding),Z.from(Z.from([jc],"utf8").toString(),t.encoding),Z.from(Z.from([Qc],"utf8").toString(),t.encoding),Z.from(Z.from([ev],"utf8").toString(),t.encoding),Z.from(Z.from([tv],"utf8").toString(),t.encoding)]}},nv=function(t){return t.replace(/([A-Z])/g,function(e,r){return"_"+r.toLowerCase()})},rs=function(t){const e={};for(const n in t)e[nv(n)]=t[n];if(e.encoding===void 0||e.encoding===!0)e.encoding="utf8";else if(e.encoding===null||e.encoding===!1)e.encoding=null;else if(typeof e.encoding!="string"&&e.encoding!==null)throw new Ye("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(e.encoding)}`],e);if(e.bom===void 0||e.bom===null||e.bom===!1)e.bom=!1;else if(e.bom!==!0)throw new Ye("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,",`got ${JSON.stringify(e.bom)}`],e);if(e.cast_function=null,e.cast===void 0||e.cast===null||e.cast===!1||e.cast==="")e.cast=void 0;else if(typeof e.cast=="function")e.cast_function=e.cast,e.cast=!0;else if(e.cast!==!0)throw new Ye("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(e.cast)}`],e);if(e.cast_date===void 0||e.cast_date===null||e.cast_date===!1||e.cast_date==="")e.cast_date=!1;else if(e.cast_date===!0)e.cast_date=function(n){const a=Date.parse(n);return isNaN(a)?n:new Date(a)};else if(typeof e.cast_date!="function")throw new Ye("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(e.cast_date)}`],e);if(e.cast_first_line_to_header=null,e.columns===!0)e.cast_first_line_to_header=void 0;else if(typeof e.columns=="function")e.cast_first_line_to_header=e.columns,e.columns=!0;else if(Array.isArray(e.columns))e.columns=au(e.columns);else if(e.columns===void 0||e.columns===null||e.columns===!1)e.columns=!1;else throw new Ye("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(e.columns)}`],e);if(e.group_columns_by_name===void 0||e.group_columns_by_name===null||e.group_columns_by_name===!1)e.group_columns_by_name=!1;else{if(e.group_columns_by_name!==!0)throw new Ye("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",`got ${JSON.stringify(e.group_columns_by_name)}`],e);if(e.columns===!1)throw new Ye("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],e)}if(e.comment===void 0||e.comment===null||e.comment===!1||e.comment==="")e.comment=null;else if(typeof e.comment=="string"&&(e.comment=Z.from(e.comment,e.encoding)),!Ot(e.comment))throw new Ye("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(e.comment)}`],e);const r=JSON.stringify(e.delimiter);if(Array.isArray(e.delimiter)||(e.delimiter=[e.delimiter]),e.delimiter.length===0)throw new Ye("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${r}`],e);if(e.delimiter=e.delimiter.map(function(n){if(n==null||n===!1)return Z.from(",",e.encoding);if(typeof n=="string"&&(n=Z.from(n,e.encoding)),!Ot(n)||n.length===0)throw new Ye("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${r}`],e);return n}),e.escape===void 0||e.escape===!0?e.escape=Z.from('"',e.encoding):typeof e.escape=="string"?e.escape=Z.from(e.escape,e.encoding):(e.escape===null||e.escape===!1)&&(e.escape=null),e.escape!==null&&!Ot(e.escape))throw new Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(e.escape)}`);if(e.from===void 0||e.from===null)e.from=1;else if(typeof e.from=="string"&&/\d+/.test(e.from)&&(e.from=parseInt(e.from)),Number.isInteger(e.from)){if(e.from<0)throw new Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(t.from)}`)}else throw new Error(`Invalid Option: from must be an integer, got ${JSON.stringify(e.from)}`);if(e.from_line===void 0||e.from_line===null)e.from_line=1;else if(typeof e.from_line=="string"&&/\d+/.test(e.from_line)&&(e.from_line=parseInt(e.from_line)),Number.isInteger(e.from_line)){if(e.from_line<=0)throw new Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(t.from_line)}`)}else throw new Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(t.from_line)}`);if(e.ignore_last_delimiters===void 0||e.ignore_last_delimiters===null)e.ignore_last_delimiters=!1;else if(typeof e.ignore_last_delimiters=="number")e.ignore_last_delimiters=Math.floor(e.ignore_last_delimiters),e.ignore_last_delimiters===0&&(e.ignore_last_delimiters=!1);else if(typeof e.ignore_last_delimiters!="boolean")throw new Ye("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(e.ignore_last_delimiters)}`],e);if(e.ignore_last_delimiters===!0&&e.columns===!1)throw new Ye("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],e);if(e.info===void 0||e.info===null||e.info===!1)e.info=!1;else if(e.info!==!0)throw new Error(`Invalid Option: info must be true, got ${JSON.stringify(e.info)}`);if(e.max_record_size===void 0||e.max_record_size===null||e.max_record_size===!1)e.max_record_size=0;else if(!(Number.isInteger(e.max_record_size)&&e.max_record_size>=0))if(typeof e.max_record_size=="string"&&/\d+/.test(e.max_record_size))e.max_record_size=parseInt(e.max_record_size);else throw new Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(e.max_record_size)}`);if(e.objname===void 0||e.objname===null||e.objname===!1)e.objname=void 0;else if(Ot(e.objname)){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty buffer");e.encoding===null||(e.objname=e.objname.toString(e.encoding))}else if(typeof e.objname=="string"){if(e.objname.length===0)throw new Error("Invalid Option: objname must be a non empty string")}else if(typeof e.objname!="number")throw new Error(`Invalid Option: objname must be a string or a buffer, got ${e.objname}`);if(e.objname!==void 0){if(typeof e.objname=="number"){if(e.columns!==!1)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(e.columns===!1)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index")}if(e.on_record===void 0||e.on_record===null)e.on_record=void 0;else if(typeof e.on_record!="function")throw new Ye("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(e.on_record)}`],e);if(e.quote===null||e.quote===!1||e.quote==="")e.quote=null;else if(e.quote===void 0||e.quote===!0?e.quote=Z.from('"',e.encoding):typeof e.quote=="string"&&(e.quote=Z.from(e.quote,e.encoding)),!Ot(e.quote))throw new Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(e.quote)}`);if(e.raw===void 0||e.raw===null||e.raw===!1)e.raw=!1;else if(e.raw!==!0)throw new Error(`Invalid Option: raw must be true, got ${JSON.stringify(e.raw)}`);if(e.record_delimiter===void 0)e.record_delimiter=[];else if(typeof e.record_delimiter=="string"||Ot(e.record_delimiter)){if(e.record_delimiter.length===0)throw new Ye("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);e.record_delimiter=[e.record_delimiter]}else if(!Array.isArray(e.record_delimiter))throw new Ye("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(e.record_delimiter)}`],e);if(e.record_delimiter=e.record_delimiter.map(function(n,a){if(typeof n!="string"&&!Ot(n))throw new Ye("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${a},`,`got ${JSON.stringify(n)}`],e);if(n.length===0)throw new Ye("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${a},`,`got ${JSON.stringify(n)}`],e);return typeof n=="string"&&(n=Z.from(n,e.encoding)),n}),typeof e.relax_column_count!="boolean")if(e.relax_column_count===void 0||e.relax_column_count===null)e.relax_column_count=!1;else throw new Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(e.relax_column_count)}`);if(typeof e.relax_column_count_less!="boolean")if(e.relax_column_count_less===void 0||e.relax_column_count_less===null)e.relax_column_count_less=!1;else throw new Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(e.relax_column_count_less)}`);if(typeof e.relax_column_count_more!="boolean")if(e.relax_column_count_more===void 0||e.relax_column_count_more===null)e.relax_column_count_more=!1;else throw new Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(e.relax_column_count_more)}`);if(typeof e.relax_quotes!="boolean")if(e.relax_quotes===void 0||e.relax_quotes===null)e.relax_quotes=!1;else throw new Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(e.relax_quotes)}`);if(typeof e.skip_empty_lines!="boolean")if(e.skip_empty_lines===void 0||e.skip_empty_lines===null)e.skip_empty_lines=!1;else throw new Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(e.skip_empty_lines)}`);if(typeof e.skip_records_with_empty_values!="boolean")if(e.skip_records_with_empty_values===void 0||e.skip_records_with_empty_values===null)e.skip_records_with_empty_values=!1;else throw new Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(e.skip_records_with_empty_values)}`);if(typeof e.skip_records_with_error!="boolean")if(e.skip_records_with_error===void 0||e.skip_records_with_error===null)e.skip_records_with_error=!1;else throw new Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(e.skip_records_with_error)}`);if(e.rtrim===void 0||e.rtrim===null||e.rtrim===!1)e.rtrim=!1;else if(e.rtrim!==!0)throw new Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(e.rtrim)}`);if(e.ltrim===void 0||e.ltrim===null||e.ltrim===!1)e.ltrim=!1;else if(e.ltrim!==!0)throw new Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(e.ltrim)}`);if(e.trim===void 0||e.trim===null||e.trim===!1)e.trim=!1;else if(e.trim!==!0)throw new Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(e.trim)}`);if(e.trim===!0&&t.ltrim!==!1?e.ltrim=!0:e.ltrim!==!0&&(e.ltrim=!1),e.trim===!0&&t.rtrim!==!1?e.rtrim=!0:e.rtrim!==!0&&(e.rtrim=!1),e.to===void 0||e.to===null)e.to=-1;else if(typeof e.to=="string"&&/\d+/.test(e.to)&&(e.to=parseInt(e.to)),Number.isInteger(e.to)){if(e.to<=0)throw new Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(t.to)}`)}else throw new Error(`Invalid Option: to must be an integer, got ${JSON.stringify(t.to)}`);if(e.to_line===void 0||e.to_line===null)e.to_line=-1;else if(typeof e.to_line=="string"&&/\d+/.test(e.to_line)&&(e.to_line=parseInt(e.to_line)),Number.isInteger(e.to_line)){if(e.to_line<=0)throw new Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(t.to_line)}`)}else throw new Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(t.to_line)}`);return e},ns=function(t){return t.every(e=>e==null||e.toString&&e.toString().trim()==="")},av=13,iv=10,ba={utf8:Z.from([239,187,191]),utf16le:Z.from([255,254])},ov=function(t={}){const e={bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},r=rs(t);return{info:e,original_options:t,options:r,state:rv(r),__needMoreData:function(n,a,o){if(o)return!1;const{encoding:i,escape:s,quote:l}=this.options,{quoting:u,needMoreDataSize:f,recordDelimiterMaxLength:h}=this.state,v=a-n-1,c=Math.max(f,h===0?Z.from(`\r
`,i).length:h,u?(s===null?0:s.length)+l.length:0,u?l.length+h:0);return v<c},parse:function(n,a,o,i){const{bom:s,from_line:l,ltrim:u,max_record_size:f,raw:h,relax_quotes:v,rtrim:c,skip_empty_lines:d,to:g,to_line:m}=this.options;let{comment:p,escape:y,quote:w,record_delimiter:x}=this.options;const{bomSkipped:L,previousBuf:A,rawBuffer:S,escapeIsQuote:N}=this.state;let M;if(A===void 0)if(n===void 0){i();return}else M=n;else A!==void 0&&n===void 0?M=A:M=Z.concat([A,n]);if(L===!1)if(s===!1)this.state.bomSkipped=!0;else if(M.length<3){if(a===!1){this.state.previousBuf=M;return}}else{for(const E in ba)if(ba[E].compare(M,0,ba[E].length)===0){const D=ba[E].length;this.state.bufBytesStart+=D,M=M.slice(D),this.options=rs({...this.original_options,encoding:E}),{comment:p,escape:y,quote:w}=this.options;break}this.state.bomSkipped=!0}const b=M.length;let T;for(T=0;T<b&&!this.__needMoreData(T,b,a);T++){if(this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1),m!==-1&&this.info.lines>m){this.state.stop=!0,i();return}this.state.quoting===!1&&x.length===0&&this.__autoDiscoverRecordDelimiter(M,T)&&(x=this.options.record_delimiter);const E=M[T];if(h===!0&&S.append(E),(E===av||E===iv)&&this.state.wasRowDelimiter===!1&&(this.state.wasRowDelimiter=!0),this.state.escaping===!0)this.state.escaping=!1;else{if(y!==null&&this.state.quoting===!0&&this.__isEscape(M,T,E)&&T+y.length<b)if(N){if(this.__isQuote(M,T+y.length)){this.state.escaping=!0,T+=y.length-1;continue}}else{this.state.escaping=!0,T+=y.length-1;continue}if(this.state.commenting===!1&&this.__isQuote(M,T))if(this.state.quoting===!0){const P=M[T+w.length],I=c&&this.__isCharTrimable(M,T+w.length),R=p!==null&&this.__compareBytes(p,M,T+w.length,P),F=this.__isDelimiter(M,T+w.length,P),_=x.length===0?this.__autoDiscoverRecordDelimiter(M,T+w.length):this.__isRecordDelimiter(P,M,T+w.length);if(y!==null&&this.__isEscape(M,T,E)&&this.__isQuote(M,T+y.length))T+=y.length-1;else if(!P||F||_||R||I){this.state.quoting=!1,this.state.wasQuoting=!0,T+=w.length-1;continue}else if(v===!1){const H=this.__error(new Ye("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(P)}"`,`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(H!==void 0)return H}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(w),T+=w.length-1}else if(this.state.field.length!==0){if(v===!1){const P=this.__error(new Ye("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found inside a field at line ${this.info.lines}`],this.options,this.__infoField(),{field:this.state.field}));if(P!==void 0)return P}}else{this.state.quoting=!0,T+=w.length-1;continue}if(this.state.quoting===!1){const P=this.__isRecordDelimiter(E,M,T);if(P!==0){if(this.state.commenting&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0)this.info.comment_lines++;else{if(this.state.enabled===!1&&this.info.lines+(this.state.wasRowDelimiter===!0?1:0)>=l){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),T+=P-1;continue}if(d===!0&&this.state.wasQuoting===!1&&this.state.record.length===0&&this.state.field.length===0){this.info.empty_lines++,T+=P-1;continue}this.info.bytes=this.state.bufBytesStart+T;const _=this.__onField();if(_!==void 0)return _;this.info.bytes=this.state.bufBytesStart+T+P;const H=this.__onRecord(o);if(H!==void 0)return H;if(g!==-1&&this.info.records>=g){this.state.stop=!0,i();return}}this.state.commenting=!1,T+=P-1;continue}if(this.state.commenting)continue;if((p===null?0:this.__compareBytes(p,M,T,E))!==0){this.state.commenting=!0;continue}const R=this.__isDelimiter(M,T,E);if(R!==0){this.info.bytes=this.state.bufBytesStart+T;const F=this.__onField();if(F!==void 0)return F;T+=R-1;continue}}}if(this.state.commenting===!1&&f!==0&&this.state.record_length+this.state.field.length>f)return this.__error(new Ye("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${f}`,`at line ${this.info.lines}`],this.options,this.__infoField()));const D=u===!1||this.state.quoting===!0||this.state.field.length!==0||!this.__isCharTrimable(M,T),C=c===!1||this.state.wasQuoting===!1;if(D===!0&&C===!0)this.state.field.append(E);else{if(c===!0&&!this.__isCharTrimable(M,T))return this.__error(new Ye("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()));D===!1&&(T+=this.__isCharTrimable(M,T)-1);continue}}if(a===!0)if(this.state.quoting===!0){const E=this.__error(new Ye("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField()));if(E!==void 0)return E}else if(this.state.wasQuoting===!0||this.state.record.length!==0||this.state.field.length!==0){this.info.bytes=this.state.bufBytesStart+T;const E=this.__onField();if(E!==void 0)return E;const D=this.__onRecord(o);if(D!==void 0)return D}else this.state.wasRowDelimiter===!0?this.info.empty_lines++:this.state.commenting===!0&&this.info.comment_lines++;else this.state.bufBytesStart+=T,this.state.previousBuf=M.slice(T);this.state.wasRowDelimiter===!0&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(n){const{columns:a,group_columns_by_name:o,encoding:i,info:s,from:l,relax_column_count:u,relax_column_count_less:f,relax_column_count_more:h,raw:v,skip_records_with_empty_values:c}=this.options,{enabled:d,record:g}=this.state;if(d===!1)return this.__resetRecord();const m=g.length;if(a===!0){if(c===!0&&ns(g)){this.__resetRecord();return}return this.__firstLineToColumns(g)}if(a===!1&&this.info.records===0&&(this.state.expectedRecordLength=m),m!==this.state.expectedRecordLength){const p=a===!1?new Ye("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${m} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g}):new Ye("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${a.length},`,`got ${m} on line ${this.info.lines}`],this.options,this.__infoField(),{record:g});if(u===!0||f===!0&&m<this.state.expectedRecordLength||h===!0&&m>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=p;else{const y=this.__error(p);if(y)return y}}if(c===!0&&ns(g)){this.__resetRecord();return}if(this.state.recordHasError===!0){this.__resetRecord(),this.state.recordHasError=!1;return}if(this.info.records++,l===1||this.info.records>=l){const{objname:p}=this.options;if(a!==!1){const y={};for(let w=0,x=g.length;w<x;w++)a[w]===void 0||a[w].disabled||(o===!0&&y[a[w].name]!==void 0?Array.isArray(y[a[w].name])?y[a[w].name]=y[a[w].name].concat(g[w]):y[a[w].name]=[y[a[w].name],g[w]]:y[a[w].name]=g[w]);if(v===!0||s===!0){const w=Object.assign({record:y},v===!0?{raw:this.state.rawBuffer.toString(i)}:{},s===!0?{info:this.__infoRecord()}:{}),x=this.__push(p===void 0?w:[y[p],w],n);if(x)return x}else{const w=this.__push(p===void 0?y:[y[p],y],n);if(w)return w}}else if(v===!0||s===!0){const y=Object.assign({record:g},v===!0?{raw:this.state.rawBuffer.toString(i)}:{},s===!0?{info:this.__infoRecord()}:{}),w=this.__push(p===void 0?y:[g[p],y],n);if(w)return w}else{const y=this.__push(p===void 0?g:[g[p],g],n);if(y)return y}}this.__resetRecord()},__firstLineToColumns:function(n){const{firstLineToHeaders:a}=this.state;try{const o=a===void 0?n:a.call(null,n);if(!Array.isArray(o))return this.__error(new Ye("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(o)}`],this.options,this.__infoField(),{headers:o}));const i=au(o);this.state.expectedRecordLength=i.length,this.options.columns=i,this.__resetRecord();return}catch(o){return o}},__resetRecord:function(){this.options.raw===!0&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:n,encoding:a,rtrim:o,max_record_size:i}=this.options,{enabled:s,wasQuoting:l}=this.state;if(s===!1)return this.__resetField();let u=this.state.field.toString(a);if(o===!0&&l===!1&&(u=u.trimRight()),n===!0){const[f,h]=this.__cast(u);if(f!==void 0)return f;u=h}this.state.record.push(u),i!==0&&typeof u=="string"&&(this.state.record_length+=u.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(n,a){const{on_record:o}=this.options;if(o!==void 0){const i=this.__infoRecord();try{n=o.call(null,n,i)}catch(s){return s}if(n==null)return}a(n)},__cast:function(n){const{columns:a,relax_column_count:o}=this.options;if(Array.isArray(a)===!0&&o&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(this.state.castField!==null)try{const s=this.__infoField();return[void 0,this.state.castField.call(null,n,s)]}catch(s){return[s]}if(this.__isFloat(n))return[void 0,parseFloat(n)];if(this.options.cast_date!==!1){const s=this.__infoField();return[void 0,this.options.cast_date.call(null,n,s)]}return[void 0,n]},__isCharTrimable:function(n,a){return((i,s)=>{const{timchars:l}=this.state;e:for(let u=0;u<l.length;u++){const f=l[u];for(let h=0;h<f.length;h++)if(f[h]!==i[s+h])continue e;return f.length}return 0})(n,a)},__isFloat:function(n){return n-parseFloat(n)+1>=0},__compareBytes:function(n,a,o,i){if(n[0]!==i)return 0;const s=n.length;for(let l=1;l<s;l++)if(n[l]!==a[o+l])return 0;return s},__isDelimiter:function(n,a,o){const{delimiter:i,ignore_last_delimiters:s}=this.options;if(s===!0&&this.state.record.length===this.options.columns.length-1)return 0;if(s!==!1&&typeof s=="number"&&this.state.record.length===s-1)return 0;e:for(let l=0;l<i.length;l++){const u=i[l];if(u[0]===o){for(let f=1;f<u.length;f++)if(u[f]!==n[a+f])continue e;return u.length}}return 0},__isRecordDelimiter:function(n,a,o){const{record_delimiter:i}=this.options,s=i.length;e:for(let l=0;l<s;l++){const u=i[l],f=u.length;if(u[0]===n){for(let h=1;h<f;h++)if(u[h]!==a[o+h])continue e;return u.length}}return 0},__isEscape:function(n,a,o){const{escape:i}=this.options;if(i===null)return!1;const s=i.length;if(i[0]===o){for(let l=0;l<s;l++)if(i[l]!==n[a+l])return!1;return!0}return!1},__isQuote:function(n,a){const{quote:o}=this.options;if(o===null)return!1;const i=o.length;for(let s=0;s<i;s++)if(o[s]!==n[a+s])return!1;return!0},__autoDiscoverRecordDelimiter:function(n,a){const{encoding:o}=this.options,i=[Z.from(`\r
`,o),Z.from(`
`,o),Z.from("\r",o)];e:for(let s=0;s<i.length;s++){const l=i[s].length;for(let u=0;u<l;u++)if(i[s][u]!==n[a+u])continue e;return this.options.record_delimiter.push(i[s]),this.state.recordDelimiterMaxLength=i[s].length,i[s].length}return 0},__error:function(n){const{encoding:a,raw:o,skip_records_with_error:i}=this.options,s=typeof n=="string"?new Error(n):n;if(i){this.state.recordHasError=!0,this.options.on_skip!==void 0&&this.options.on_skip(s,o?this.state.rawBuffer.toString(a):void 0);return}else return s},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:n,raw:a,encoding:o}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:n===!0,index:this.state.record.length,raw:a?this.state.rawBuffer.toString(o):void 0}},__infoField:function(){const{columns:n}=this.options,a=Array.isArray(n);return{...this.__infoRecord(),column:a===!0?n.length>this.state.record.length?n[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};class sv extends qt{constructor(e={}){super({readableObjectMode:!0,...e,encoding:null}),this.api=ov(e),this.api.options.on_skip=(r,n)=>{this.emit("skip",r,n)},this.state=this.api.state,this.options=this.api.options,this.info=this.api.info}_transform(e,r,n){if(this.state.stop===!0)return;const a=this.api.parse(e,!1,o=>{this.push.call(this,o)},()=>{this.push.call(this,null)});a!==void 0&&(this.state.stop=!0),n(a)}_flush(e){if(this.state.stop===!0)return;const r=this.api.parse(void 0,!0,n=>{this.push.call(this,n)},()=>{this.push.call(this,null)});e(r)}}const lv=function(){let t,e,r;for(const a in arguments){const o=arguments[a],i=typeof o;if(t===void 0&&(typeof o=="string"||Ot(o)))t=o;else if(e===void 0&&nu(o))e=o;else if(r===void 0&&i==="function")r=o;else throw new Ye("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(o)} at index ${a}`],e||{})}const n=new sv(e);if(r){const a=e===void 0||e.objname===void 0?[]:{};n.on("readable",function(){let o;for(;(o=this.read())!==null;)e===void 0||e.objname===void 0?a.push(o):a[o[0]]=o[1]}),n.on("error",function(o){r(o,void 0,n.api.__infoDataSet())}),n.on("end",function(){r(void 0,a,n.api.__infoDataSet())})}if(t!==void 0){const a=function(){n.write(t),n.end()};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}return n};var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uv(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var aa=uv,fv=typeof Gr=="object"&&Gr&&Gr.Object===Object&&Gr,hv=fv,cv=hv,vv=typeof self=="object"&&self&&self.Object===Object&&self,dv=cv||vv||Function("return this")(),oi=dv,gv=oi,pv=function(){return gv.Date.now()},mv=pv,yv=/\s/;function wv(t){for(var e=t.length;e--&&yv.test(t.charAt(e)););return e}var bv=wv,Ev=bv,xv=/^\s+/;function Tv(t){return t&&t.slice(0,Ev(t)+1).replace(xv,"")}var Cv=Tv,Sv=oi,Dv=Sv.Symbol,wo=Dv,as=wo,iu=Object.prototype,Lv=iu.hasOwnProperty,Nv=iu.toString,Rn=as?as.toStringTag:void 0;function Mv(t){var e=Lv.call(t,Rn),r=t[Rn];try{t[Rn]=void 0;var n=!0}catch{}var a=Nv.call(t);return n&&(e?t[Rn]=r:delete t[Rn]),a}var Av=Mv,Ov=Object.prototype,Rv=Ov.toString;function Iv(t){return Rv.call(t)}var Pv=Iv,is=wo,Fv=Av,Bv=Pv,kv="[object Null]",_v="[object Undefined]",os=is?is.toStringTag:void 0;function zv(t){return t==null?t===void 0?_v:kv:os&&os in Object(t)?Fv(t):Bv(t)}var ou=zv;function Gv(t){return t!=null&&typeof t=="object"}var Uv=Gv,Vv=ou,Hv=Uv,$v="[object Symbol]";function Yv(t){return typeof t=="symbol"||Hv(t)&&Vv(t)==$v}var ia=Yv,qv=Cv,ss=aa,Wv=ia,ls=0/0,Xv=/^[-+]0x[0-9a-f]+$/i,Kv=/^0b[01]+$/i,Zv=/^0o[0-7]+$/i,Qv=parseInt;function Jv(t){if(typeof t=="number")return t;if(Wv(t))return ls;if(ss(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ss(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=qv(t);var r=Kv.test(t);return r||Zv.test(t)?Qv(t.slice(2),r?2:8):Xv.test(t)?ls:+t}var jv=Jv,ed=aa,Ii=mv,us=jv,td="Expected a function",rd=Math.max,nd=Math.min;function ad(t,e,r){var n,a,o,i,s,l,u=0,f=!1,h=!1,v=!0;if(typeof t!="function")throw new TypeError(td);e=us(e)||0,ed(r)&&(f=!!r.leading,h="maxWait"in r,o=h?rd(us(r.maxWait)||0,e):o,v="trailing"in r?!!r.trailing:v);function c(A){var S=n,N=a;return n=a=void 0,u=A,i=t.apply(N,S),i}function d(A){return u=A,s=setTimeout(p,e),f?c(A):i}function g(A){var S=A-l,N=A-u,M=e-S;return h?nd(M,o-N):M}function m(A){var S=A-l,N=A-u;return l===void 0||S>=e||S<0||h&&N>=o}function p(){var A=Ii();if(m(A))return y(A);s=setTimeout(p,g(A))}function y(A){return s=void 0,v&&n?c(A):(n=a=void 0,i)}function w(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function x(){return s===void 0?i:y(Ii())}function L(){var A=Ii(),S=m(A);if(n=arguments,a=this,l=A,S){if(s===void 0)return d(l);if(h)return clearTimeout(s),s=setTimeout(p,e),c(l)}return s===void 0&&(s=setTimeout(p,e)),i}return L.cancel=w,L.flush=x,L}var id=ad,su={exports:{}},lu={exports:{}};(function(t,e){(function(){var r,n,a,o,i,s,l,u,f,h,v,c,d,g,m;a=Math.floor,h=Math.min,n=function(p,y){return p<y?-1:p>y?1:0},f=function(p,y,w,x,L){var A;if(w==null&&(w=0),L==null&&(L=n),w<0)throw new Error("lo must be non-negative");for(x==null&&(x=p.length);w<x;)A=a((w+x)/2),L(y,p[A])<0?x=A:w=A+1;return[].splice.apply(p,[w,w-w].concat(y)),y},s=function(p,y,w){return w==null&&(w=n),p.push(y),g(p,0,p.length-1,w)},i=function(p,y){var w,x;return y==null&&(y=n),w=p.pop(),p.length?(x=p[0],p[0]=w,m(p,0,y)):x=w,x},u=function(p,y,w){var x;return w==null&&(w=n),x=p[0],p[0]=y,m(p,0,w),x},l=function(p,y,w){var x;return w==null&&(w=n),p.length&&w(p[0],y)<0&&(x=[p[0],y],y=x[0],p[0]=x[1],m(p,0,w)),y},o=function(p,y){var w,x,L,A,S,N;for(y==null&&(y=n),A=function(){N=[];for(var M=0,b=a(p.length/2);0<=b?M<b:M>b;0<=b?M++:M--)N.push(M);return N}.apply(this).reverse(),S=[],x=0,L=A.length;x<L;x++)w=A[x],S.push(m(p,w,y));return S},d=function(p,y,w){var x;if(w==null&&(w=n),x=p.indexOf(y),x!==-1)return g(p,0,x,w),m(p,x,w)},v=function(p,y,w){var x,L,A,S,N;if(w==null&&(w=n),L=p.slice(0,y),!L.length)return L;for(o(L,w),N=p.slice(y),A=0,S=N.length;A<S;A++)x=N[A],l(L,x,w);return L.sort(w).reverse()},c=function(p,y,w){var x,L,A,S,N,M,b,T,E;if(w==null&&(w=n),y*10<=p.length){if(A=p.slice(0,y).sort(w),!A.length)return A;for(L=A[A.length-1],b=p.slice(y),S=0,M=b.length;S<M;S++)x=b[S],w(x,L)<0&&(f(A,x,0,null,w),A.pop(),L=A[A.length-1]);return A}for(o(p,w),E=[],N=0,T=h(y,p.length);0<=T?N<T:N>T;0<=T?++N:--N)E.push(i(p,w));return E},g=function(p,y,w,x){var L,A,S;for(x==null&&(x=n),L=p[w];w>y;){if(S=w-1>>1,A=p[S],x(L,A)<0){p[w]=A,w=S;continue}break}return p[w]=L},m=function(p,y,w){var x,L,A,S,N;for(w==null&&(w=n),L=p.length,N=y,A=p[y],x=2*y+1;x<L;)S=x+1,S<L&&!(w(p[x],p[S])<0)&&(x=S),p[y]=p[x],y=x,x=2*y+1;return p[y]=A,g(p,N,y,w)},r=function(){p.push=s,p.pop=i,p.replace=u,p.pushpop=l,p.heapify=o,p.updateItem=d,p.nlargest=v,p.nsmallest=c;function p(y){this.cmp=y!=null?y:n,this.nodes=[]}return p.prototype.push=function(y){return s(this.nodes,y,this.cmp)},p.prototype.pop=function(){return i(this.nodes,this.cmp)},p.prototype.peek=function(){return this.nodes[0]},p.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},p.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},p.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},p.prototype.heapify=function(){return o(this.nodes,this.cmp)},p.prototype.updateItem=function(y){return d(this.nodes,y,this.cmp)},p.prototype.clear=function(){return this.nodes=[]},p.prototype.empty=function(){return this.nodes.length===0},p.prototype.size=function(){return this.nodes.length},p.prototype.clone=function(){var y;return y=new p,y.nodes=this.nodes.slice(0),y},p.prototype.toArray=function(){return this.nodes.slice(0)},p.prototype.insert=p.prototype.push,p.prototype.top=p.prototype.peek,p.prototype.front=p.prototype.peek,p.prototype.has=p.prototype.contains,p.prototype.copy=p.prototype.clone,p}(),function(p,y){return t.exports=y()}(this,function(){return r})}).call(Gr)})(lu);(function(t){t.exports=lu.exports})(su);var od=Array.isArray,si=od,sd=si,ld=ia,ud=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fd=/^\w*$/;function hd(t,e){if(sd(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||ld(t)?!0:fd.test(t)||!ud.test(t)||e!=null&&t in Object(e)}var cd=hd,vd=ou,dd=aa,gd="[object AsyncFunction]",pd="[object Function]",md="[object GeneratorFunction]",yd="[object Proxy]";function wd(t){if(!dd(t))return!1;var e=vd(t);return e==pd||e==md||e==gd||e==yd}var bd=wd,Ed=oi,xd=Ed["__core-js_shared__"],Td=xd,Pi=Td,fs=function(){var t=/[^.]+$/.exec(Pi&&Pi.keys&&Pi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Cd(t){return!!fs&&fs in t}var Sd=Cd,Dd=Function.prototype,Ld=Dd.toString;function Nd(t){if(t!=null){try{return Ld.call(t)}catch{}try{return t+""}catch{}}return""}var Md=Nd,Ad=bd,Od=Sd,Rd=aa,Id=Md,Pd=/[\\^$.*+?()[\]{}|]/g,Fd=/^\[object .+?Constructor\]$/,Bd=Function.prototype,kd=Object.prototype,_d=Bd.toString,zd=kd.hasOwnProperty,Gd=RegExp("^"+_d.call(zd).replace(Pd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ud(t){if(!Rd(t)||Od(t))return!1;var e=Ad(t)?Gd:Fd;return e.test(Id(t))}var Vd=Ud;function Hd(t,e){return t==null?void 0:t[e]}var $d=Hd,Yd=Vd,qd=$d;function Wd(t,e){var r=qd(t,e);return Yd(r)?r:void 0}var bo=Wd,Xd=bo,Kd=Xd(Object,"create"),li=Kd,hs=li;function Zd(){this.__data__=hs?hs(null):{},this.size=0}var Qd=Zd;function Jd(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var jd=Jd,eg=li,tg="__lodash_hash_undefined__",rg=Object.prototype,ng=rg.hasOwnProperty;function ag(t){var e=this.__data__;if(eg){var r=e[t];return r===tg?void 0:r}return ng.call(e,t)?e[t]:void 0}var ig=ag,og=li,sg=Object.prototype,lg=sg.hasOwnProperty;function ug(t){var e=this.__data__;return og?e[t]!==void 0:lg.call(e,t)}var fg=ug,hg=li,cg="__lodash_hash_undefined__";function vg(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hg&&e===void 0?cg:e,this}var dg=vg,gg=Qd,pg=jd,mg=ig,yg=fg,wg=dg;function En(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}En.prototype.clear=gg;En.prototype.delete=pg;En.prototype.get=mg;En.prototype.has=yg;En.prototype.set=wg;var bg=En;function Eg(){this.__data__=[],this.size=0}var xg=Eg;function Tg(t,e){return t===e||t!==t&&e!==e}var uu=Tg,Cg=uu;function Sg(t,e){for(var r=t.length;r--;)if(Cg(t[r][0],e))return r;return-1}var ui=Sg,Dg=ui,Lg=Array.prototype,Ng=Lg.splice;function Mg(t){var e=this.__data__,r=Dg(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ng.call(e,r,1),--this.size,!0}var Ag=Mg,Og=ui;function Rg(t){var e=this.__data__,r=Og(e,t);return r<0?void 0:e[r][1]}var Ig=Rg,Pg=ui;function Fg(t){return Pg(this.__data__,t)>-1}var Bg=Fg,kg=ui;function _g(t,e){var r=this.__data__,n=kg(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var zg=_g,Gg=xg,Ug=Ag,Vg=Ig,Hg=Bg,$g=zg;function xn(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}xn.prototype.clear=Gg;xn.prototype.delete=Ug;xn.prototype.get=Vg;xn.prototype.has=Hg;xn.prototype.set=$g;var Yg=xn,qg=bo,Wg=oi,Xg=qg(Wg,"Map"),Kg=Xg,cs=bg,Zg=Yg,Qg=Kg;function Jg(){this.size=0,this.__data__={hash:new cs,map:new(Qg||Zg),string:new cs}}var jg=Jg;function ep(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var tp=ep,rp=tp;function np(t,e){var r=t.__data__;return rp(e)?r[typeof e=="string"?"string":"hash"]:r.map}var fi=np,ap=fi;function ip(t){var e=ap(this,t).delete(t);return this.size-=e?1:0,e}var op=ip,sp=fi;function lp(t){return sp(this,t).get(t)}var up=lp,fp=fi;function hp(t){return fp(this,t).has(t)}var cp=hp,vp=fi;function dp(t,e){var r=vp(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var gp=dp,pp=jg,mp=op,yp=up,wp=cp,bp=gp;function Tn(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Tn.prototype.clear=pp;Tn.prototype.delete=mp;Tn.prototype.get=yp;Tn.prototype.has=wp;Tn.prototype.set=bp;var Ep=Tn,fu=Ep,xp="Expected a function";function Eo(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(xp);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=t.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(Eo.Cache||fu),r}Eo.Cache=fu;var Tp=Eo,Cp=Tp,Sp=500;function Dp(t){var e=Cp(t,function(n){return r.size===Sp&&r.clear(),n}),r=e.cache;return e}var Lp=Dp,Np=Lp,Mp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ap=/\\(\\)?/g,Op=Np(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Mp,function(r,n,a,o){e.push(a?o.replace(Ap,"$1"):n||r)}),e}),hu=Op;function Rp(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var cu=Rp,vs=wo,Ip=cu,Pp=si,Fp=ia,Bp=1/0,ds=vs?vs.prototype:void 0,gs=ds?ds.toString:void 0;function vu(t){if(typeof t=="string")return t;if(Pp(t))return Ip(t,vu)+"";if(Fp(t))return gs?gs.call(t):"";var e=t+"";return e=="0"&&1/t==-Bp?"-0":e}var kp=vu,_p=kp;function zp(t){return t==null?"":_p(t)}var du=zp,Gp=si,Up=cd,Vp=hu,Hp=du;function $p(t,e){return Gp(t)?t:Up(t,e)?[t]:Vp(Hp(t))}var gu=$p,Yp=ia,qp=1/0;function Wp(t){if(typeof t=="string"||Yp(t))return t;var e=t+"";return e=="0"&&1/t==-qp?"-0":e}var xo=Wp,Xp=gu,Kp=xo;function Zp(t,e){e=Xp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Kp(e[r++])];return r&&r==n?t:void 0}var Qp=Zp,Jp=Qp;function jp(t,e,r){var n=t==null?void 0:Jp(t,e);return n===void 0?r:n}var em=jp,tm=bo,rm=function(){try{var t=tm(Object,"defineProperty");return t({},"",{}),t}catch{}}(),nm=rm,ps=nm;function am(t,e,r){e=="__proto__"&&ps?ps(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var im=am,om=im,sm=uu,lm=Object.prototype,um=lm.hasOwnProperty;function fm(t,e,r){var n=t[e];(!(um.call(t,e)&&sm(n,r))||r===void 0&&!(e in t))&&om(t,e,r)}var hm=fm,cm=9007199254740991,vm=/^(?:0|[1-9]\d*)$/;function dm(t,e){var r=typeof t;return e=e==null?cm:e,!!e&&(r=="number"||r!="symbol"&&vm.test(t))&&t>-1&&t%1==0&&t<e}var gm=dm,pm=hm,mm=gu,ym=gm,ms=aa,wm=xo;function bm(t,e,r,n){if(!ms(t))return t;e=mm(e,t);for(var a=-1,o=e.length,i=o-1,s=t;s!=null&&++a<o;){var l=wm(e[a]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(a!=i){var f=s[l];u=n?n(f,l,s):void 0,u===void 0&&(u=ms(f)?f:ym(e[a+1])?[]:{})}pm(s,l,u),s=s[l]}return t}var Em=bm,xm=Em;function Tm(t,e,r){return t==null?t:xm(t,e,r)}var Cm=Tm;function Sm(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Dm=Sm,Lm=cu,Nm=Dm,Mm=si,Am=ia,Om=hu,Rm=xo,Im=du;function Pm(t){return Mm(t)?Lm(t,Rm):Am(t)?[t]:Nm(Om(Im(t)))}var Fm=Pm,Bm=id,km=su.exports,_m=em,zm=Cm,Gm=Fm;function oa(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var hi=oa(Bm),sa=oa(km),Um=oa(_m),Vm=oa(zm),Hm=oa(Gm);function vt(t){return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(t)}function To(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Co(t,e,r){return e&&ys(t.prototype,e),r&&ys(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rr(t,e){return $m(t)||Ym(t,e)||qm(t,e)||Wm()}function $m(t){if(Array.isArray(t))return t}function Ym(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],a=!0,o=!1,i,s;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(n.push(i.value),!(e&&n.length===e));a=!0);}catch(l){o=!0,s=l}finally{try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}return n}}function qm(t,e){if(!!t){if(typeof t=="string")return ws(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ws(t,e)}}function ws(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rt=typeof window>"u"?null:window,bs=rt?rt.navigator:null;rt&&rt.document;var Xm=vt(""),mu=vt({}),Km=vt(function(){}),Zm=typeof HTMLElement>"u"?"undefined":vt(HTMLElement),la=function(e){return e&&e.instanceString&&at(e.instanceString)?e.instanceString():null},Re=function(e){return e!=null&&vt(e)==Xm},at=function(e){return e!=null&&vt(e)===Km},Qe=function(e){return!Ft(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ue=function(e){return e!=null&&vt(e)===mu&&!Qe(e)&&e.constructor===Object},Qm=function(e){return e!=null&&vt(e)===mu},we=function(e){return e!=null&&vt(e)===vt(1)&&!isNaN(e)},Jm=function(e){return we(e)&&Math.floor(e)===e},$a=function(e){if(Zm!=="undefined")return e!=null&&e instanceof HTMLElement},Ft=function(e){return ua(e)||yu(e)},ua=function(e){return la(e)==="collection"&&e._private.single},yu=function(e){return la(e)==="collection"&&!e._private.single},So=function(e){return la(e)==="core"},wu=function(e){return la(e)==="stylesheet"},jm=function(e){return la(e)==="event"},Nr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},ey=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},ty=function(e){return Ue(e)&&we(e.x1)&&we(e.x2)&&we(e.y1)&&we(e.y2)},ry=function(e){return Qm(e)&&at(e.then)},ny=function(){return bs&&bs.userAgent.match(/msie|trident|edge/i)},Yn=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);return o.join("$")});var n=function a(){var o=this,i=arguments,s,l=r.apply(o,i),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(o,i)),s};return n.cache={},n},Do=Yn(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),ci=Yn(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),bu=Yn(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Es=function(e){return Nr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},ct="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",ay="rgb[a]?\\(("+ct+"[%]?)\\s*,\\s*("+ct+"[%]?)\\s*,\\s*("+ct+"[%]?)(?:\\s*,\\s*("+ct+"))?\\)",iy="rgb[a]?\\((?:"+ct+"[%]?)\\s*,\\s*(?:"+ct+"[%]?)\\s*,\\s*(?:"+ct+"[%]?)(?:\\s*,\\s*(?:"+ct+"))?\\)",oy="hsl[a]?\\(("+ct+")\\s*,\\s*("+ct+"[%])\\s*,\\s*("+ct+"[%])(?:\\s*,\\s*("+ct+"))?\\)",sy="hsl[a]?\\((?:"+ct+")\\s*,\\s*(?:"+ct+"[%])\\s*,\\s*(?:"+ct+"[%])(?:\\s*,\\s*(?:"+ct+"))?\\)",ly="\\#[0-9a-fA-F]{3}",uy="\\#[0-9a-fA-F]{6}",Eu=function(e,r){return e<r?-1:e>r?1:0},fy=function(e,r){return-1*Eu(e,r)},Fe=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),o=0;o<a.length;o++){var i=a[o];t[i]=n[i]}}return t},hy=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,o,i=16;return r?(n=parseInt(e[1]+e[1],i),a=parseInt(e[2]+e[2],i),o=parseInt(e[3]+e[3],i)):(n=parseInt(e[1]+e[2],i),a=parseInt(e[3]+e[4],i),o=parseInt(e[5]+e[6],i)),[n,a,o]}},cy=function(e){var r,n,a,o,i,s,l,u;function f(d,g,m){return m<0&&(m+=1),m>1&&(m-=1),m<1/6?d+(g-d)*6*m:m<1/2?g:m<2/3?d+(g-d)*(2/3-m)*6:d}var h=new RegExp("^"+oy+"$").exec(e);if(h){if(n=parseInt(h[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(h[2]),a<0||a>100||(a=a/100,o=parseFloat(h[3]),o<0||o>100)||(o=o/100,i=h[4],i!==void 0&&(i=parseFloat(i),i<0||i>1)))return;if(a===0)s=l=u=Math.round(o*255);else{var v=o<.5?o*(1+a):o+a-o*a,c=2*o-v;s=Math.round(255*f(c,v,n+1/3)),l=Math.round(255*f(c,v,n)),u=Math.round(255*f(c,v,n-1/3))}r=[s,l,u,i]}return r},vy=function(e){var r,n=new RegExp("^"+ay+"$").exec(e);if(n){r=[];for(var a=[],o=1;o<=3;o++){var i=n[o];if(i[i.length-1]==="%"&&(a[o]=!0),i=parseFloat(i),a[o]&&(i=i/100*255),i<0||i>255)return;r.push(Math.floor(i))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;r.push(u)}}return r},dy=function(e){return py[e.toLowerCase()]},gy=function(e){return(Qe(e)?e:null)||dy(e)||hy(e)||vy(e)||cy(e)},py={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},xu=function(e){for(var r=e.map,n=e.keys,a=n.length,o=0;o<a;o++){var i=n[o];if(Ue(i))throw Error("Tried to set map with object key");o<n.length-1?(r[i]==null&&(r[i]={}),r=r[i]):r[i]=e.value}},Tu=function(e){for(var r=e.map,n=e.keys,a=n.length,o=0;o<a;o++){var i=n[o];if(Ue(i))throw Error("Tried to get map with object key");if(r=r[i],r==null)return r}return r},Fi=rt?rt.performance:null,Cu=Fi&&Fi.now?function(){return Fi.now()}:function(){return Date.now()},my=function(){if(rt){if(rt.requestAnimationFrame)return function(t){rt.requestAnimationFrame(t)};if(rt.mozRequestAnimationFrame)return function(t){rt.mozRequestAnimationFrame(t)};if(rt.webkitRequestAnimationFrame)return function(t){rt.webkitRequestAnimationFrame(t)};if(rt.msRequestAnimationFrame)return function(t){rt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Cu())},1e3/60)}}(),Ya=function(e){return my(e)},or=Cu,ln=9261,Su=65599,kn=5381,Du=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln,n=r,a;a=e.next(),!a.done;)n=n*Su+a.value|0;return n},qn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln;return r*Su+e|0},Wn=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kn;return(r<<5)+r+e|0},yy=function(e,r){return e*2097152+r},mr=function(e){return e[0]*2097152+e[1]},Ea=function(e,r){return[qn(e[0],r[0]),Wn(e[1],r[1])]},wy=function(e,r){var n={value:0,done:!1},a=0,o=e.length,i={next:function(){return a<o?n.value=e[a++]:n.done=!0,n}};return Du(i,r)},Vr=function(e,r){var n={value:0,done:!1},a=0,o=e.length,i={next:function(){return a<o?n.value=e.charCodeAt(a++):n.done=!0,n}};return Du(i,r)},Lu=function(){return by(arguments)},by=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=Vr(a):r=Vr(a,r)}return r},xs=!0,Ey=console.warn!=null,xy=console.trace!=null,Lo=Number.MAX_SAFE_INTEGER||9007199254740991,Nu=function(){return!0},qa=function(){return!1},Ts=function(){return 0},No=function(){},it=function(e){throw new Error(e)},Mu=function(e){if(e!==void 0)xs=!!e;else return xs},We=function(e){!Mu()||(Ey?console.warn(e):(console.log(e),xy&&console.trace()))},Ty=function(e){return Fe({},e)},Xt=function(e){return e==null?e:Qe(e)?e.slice():Ue(e)?Ty(e):e},Cy=function(e){return e.slice()},Au=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},Sy={},Ou=function(){return Sy},bt=function(e){var r=Object.keys(e);return function(n){for(var a={},o=0;o<r.length;o++){var i=r[o],s=n==null?void 0:n[i];a[i]=s===void 0?e[i]:s}return a}},Mr=function(e,r,n){for(var a=e.length-1;a>=0&&!(e[a]===r&&(e.splice(a,1),n));a--);},Mo=function(e){e.splice(0,e.length)},Dy=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},$t=function(e,r,n){return n&&(r=bu(n,r)),e[r]},Er=function(e,r,n,a){n&&(r=bu(n,r)),e[r]=a},Ly=function(){function t(){To(this,t),this._obj={}}return Co(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}]),t}(),Kt=typeof Map<"u"?Map:Ly,Ny="undefined",My=function(){function t(e){if(To(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Co(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}]),t}(),Cn=(typeof Set>"u"?"undefined":vt(Set))!==Ny?Set:My,vi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!So(e)){it("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){it("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new Cn,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),r.renderedPosition){var i=r.renderedPosition,s=e.pan(),l=e.zoom();o.position={x:(i.x-s.x)/l,y:(i.y-s.y)/l}}var u=[];Qe(r.classes)?u=r.classes:Re(r.classes)&&(u=r.classes.split(/\s+/));for(var f=0,h=u.length;f<h;f++){var v=u[f];!v||v===""||o.classes.add(v)}this.createEmitter();var c=r.style||r.css;c&&(We("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(c)),(n===void 0||n)&&this.restore()},Cs=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,o){var i;Ue(n)&&!Ft(n)&&(i=n,n=i.roots||i.root,a=i.visit,o=i.directed),o=arguments.length===2&&!at(a)?a:o,a=at(a)?a:function(){};for(var s=this._private.cy,l=n=Re(n)?this.filter(n):n,u=[],f=[],h={},v={},c={},d=0,g,m=this.byGroup(),p=m.nodes,y=m.edges,w=0;w<l.length;w++){var x=l[w],L=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(c[L]=!0,f.push(x)),v[L]=0)}for(var A=function(){var D=e.bfs?u.shift():u.pop(),C=D.id();if(e.dfs){if(c[C])return"continue";c[C]=!0,f.push(D)}var P=v[C],I=h[C],R=I!=null?I.source():null,F=I!=null?I.target():null,_=I==null?void 0:D.same(R)?F[0]:R[0],H=void 0;if(H=a(D,I,_,d++,P),H===!0)return g=D,"break";if(H===!1)return"break";for(var k=D.connectedEdges().filter(function(V){return(!o||V.source().same(D))&&y.has(V)}),G=0;G<k.length;G++){var q=k[G],$=q.connectedNodes().filter(function(V){return!V.same(D)&&p.has(V)}),z=$.id();$.length!==0&&!c[z]&&($=$[0],u.push($),e.bfs&&(c[z]=!0,f.push($)),h[z]=q,v[z]=v[C]+1)}};u.length!==0;){var S=A();if(S!=="continue"&&S==="break")break}for(var N=s.collection(),M=0;M<f.length;M++){var b=f[M],T=h[b.id()];T!=null&&N.push(T),N.push(b)}return{path:s.collection(N),found:s.collection(g)}}},Xn={breadthFirstSearch:Cs({bfs:!0}),depthFirstSearch:Cs({dfs:!0})};Xn.bfs=Xn.breadthFirstSearch;Xn.dfs=Xn.depthFirstSearch;var Ay=bt({root:null,weight:function(e){return 1},directed:!1}),Oy={dijkstra:function(e){if(!Ue(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=Ay(e),a=n.root,o=n.weight,i=n.directed,s=this,l=o,u=Re(a)?this.filter(a)[0]:a[0],f={},h={},v={},c=this.byGroup(),d=c.nodes,g=c.edges;g.unmergeBy(function(P){return P.isLoop()});for(var m=function(I){return f[I.id()]},p=function(I,R){f[I.id()]=R,y.updateItem(I)},y=new sa.default(function(P,I){return m(P)-m(I)}),w=0;w<d.length;w++){var x=d[w];f[x.id()]=x.same(u)?0:1/0,y.push(x)}for(var L=function(I,R){for(var F=(i?I.edgesTo(R):I.edgesWith(R)).intersect(g),_=1/0,H,k=0;k<F.length;k++){var G=F[k],q=l(G);(q<_||!H)&&(_=q,H=G)}return{edge:H,dist:_}};y.size()>0;){var A=y.pop(),S=m(A),N=A.id();if(v[N]=S,S!==1/0)for(var M=A.neighborhood().intersect(d),b=0;b<M.length;b++){var T=M[b],E=T.id(),D=L(A,T),C=S+D.dist;C<m(T)&&(p(T,C),h[E]={node:A,edge:D.edge})}}return{distanceTo:function(I){var R=Re(I)?d.filter(I)[0]:I[0];return v[R.id()]},pathTo:function(I){var R=Re(I)?d.filter(I)[0]:I[0],F=[],_=R,H=_.id();if(R.length>0)for(F.unshift(R);h[H];){var k=h[H];F.unshift(k.edge),F.unshift(k.node),_=k.node,H=_.id()}return s.spawn(F)}}}},Ry={kruskal:function(e){e=e||function(w){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,o=n.length,i=new Array(o),s=n,l=function(x){for(var L=0;L<i.length;L++){var A=i[L];if(A.has(x))return L}},u=0;u<o;u++)i[u]=this.spawn(n[u]);for(var f=a.sort(function(w,x){return e(w)-e(x)}),h=0;h<f.length;h++){var v=f[h],c=v.source()[0],d=v.target()[0],g=l(c),m=l(d),p=i[g],y=i[m];g!==m&&(s.merge(v),p.merge(y),i.splice(m,1))}return s}},Iy=bt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Py={aStar:function(e){var r=this.cy(),n=Iy(e),a=n.root,o=n.goal,i=n.heuristic,s=n.directed,l=n.weight;a=r.collection(a)[0],o=r.collection(o)[0];var u=a.id(),f=o.id(),h={},v={},c={},d=new sa.default(function(H,k){return v[H.id()]-v[k.id()]}),g=new Cn,m={},p={},y=function(k,G){d.push(k),g.add(G)},w,x,L=function(){w=d.pop(),x=w.id(),g.delete(x)},A=function(k){return g.has(k)};y(a,u),h[u]=0,v[u]=i(a);for(var S=0;d.size()>0;){if(L(),S++,x===f){for(var N=[],M=o,b=f,T=p[b];N.unshift(M),T!=null&&N.unshift(T),M=m[b],M!=null;)b=M.id(),T=p[b];return{found:!0,distance:h[x],path:this.spawn(N),steps:S}}c[x]=!0;for(var E=w._private.edges,D=0;D<E.length;D++){var C=E[D];if(!!this.hasElementWithId(C.id())&&!(s&&C.data("source")!==x)){var P=C.source(),I=C.target(),R=P.id()!==x?P:I,F=R.id();if(!!this.hasElementWithId(F)&&!c[F]){var _=h[x]+l(C);if(!A(F)){h[F]=_,v[F]=_+i(R),y(R,F),m[F]=w,p[F]=C;continue}_<h[F]&&(h[F]=_,v[F]=_+i(R),m[F]=w,p[F]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:S}}},Fy=bt({weight:function(e){return 1},directed:!1}),By={floydWarshall:function(e){for(var r=this.cy(),n=Fy(e),a=n.weight,o=n.directed,i=a,s=this.byGroup(),l=s.nodes,u=s.edges,f=l.length,h=f*f,v=function(q){return l.indexOf(q)},c=function(q){return l[q]},d=new Array(h),g=0;g<h;g++){var m=g%f,p=(g-m)/f;p===m?d[g]=0:d[g]=1/0}for(var y=new Array(h),w=new Array(h),x=0;x<u.length;x++){var L=u[x],A=L.source()[0],S=L.target()[0];if(A!==S){var N=v(A),M=v(S),b=N*f+M,T=i(L);if(d[b]>T&&(d[b]=T,y[b]=M,w[b]=L),!o){var E=M*f+N;!o&&d[E]>T&&(d[E]=T,y[E]=N,w[E]=L)}}}for(var D=0;D<f;D++)for(var C=0;C<f;C++)for(var P=C*f+D,I=0;I<f;I++){var R=C*f+I,F=D*f+I;d[P]+d[F]<d[R]&&(d[R]=d[P]+d[F],y[R]=y[P])}var _=function(q){return(Re(q)?r.filter(q):q)[0]},H=function(q){return v(_(q))},k={distance:function(q,$){var z=H(q),V=H($);return d[z*f+V]},path:function(q,$){var z=H(q),V=H($),B=c(z);if(z===V)return B.collection();if(y[z*f+V]==null)return r.collection();var Y=r.collection(),W=z,J;for(Y.merge(B);z!==V;)W=z,z=y[z*f+V],J=w[W*f+z],Y.merge(J),Y.merge(c(z));return Y}};return k}},ky=bt({weight:function(e){return 1},directed:!1,root:null}),_y={bellmanFord:function(e){var r=this,n=ky(e),a=n.weight,o=n.directed,i=n.root,s=a,l=this,u=this.cy(),f=this.byGroup(),h=f.edges,v=f.nodes,c=v.length,d=new Kt,g=!1,m=[];i=u.collection(i)[0],h.unmergeBy(function(me){return me.isLoop()});for(var p=h.length,y=function(de){var ie=d.get(de.id());return ie||(ie={},d.set(de.id(),ie)),ie},w=function(de){return(Re(de)?u.$(de):de)[0]},x=function(de){return y(w(de)).dist},L=function(de){for(var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,fe=w(de),ye=[],ce=fe;;){if(ce==null)return r.spawn();var j=y(ce),O=j.edge,X=j.pred;if(ye.unshift(ce[0]),ce.same(ie)&&ye.length>0)break;O!=null&&ye.unshift(O),ce=X}return l.spawn(ye)},A=0;A<c;A++){var S=v[A],N=y(S);S.same(i)?N.dist=0:N.dist=1/0,N.pred=null,N.edge=null}for(var M=!1,b=function(de,ie,fe,ye,ce,j){var O=ye.dist+j;O<ce.dist&&!fe.same(ye.edge)&&(ce.dist=O,ce.pred=de,ce.edge=fe,M=!0)},T=1;T<c;T++){M=!1;for(var E=0;E<p;E++){var D=h[E],C=D.source(),P=D.target(),I=s(D),R=y(C),F=y(P);b(C,P,D,R,F,I),o||b(P,C,D,F,R,I)}if(!M)break}if(M)for(var _=[],H=0;H<p;H++){var k=h[H],G=k.source(),q=k.target(),$=s(k),z=y(G).dist,V=y(q).dist;if(z+$<V||!o&&V+$<z)if(g||(We("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var B=[];z+$<V&&B.push(G),!o&&V+$<z&&B.push(q);for(var Y=B.length,W=0;W<Y;W++){var J=B[W],le=[J];le.push(y(J).edge);for(var pe=y(J).pred;le.indexOf(pe)===-1;)le.push(pe),le.push(y(pe).edge),pe=y(pe).pred;le=le.slice(le.indexOf(pe));for(var Oe=le[0].id(),Q=0,oe=2;oe<le.length;oe+=2)le[oe].id()<Oe&&(Oe=le[oe].id(),Q=oe);le=le.slice(Q).concat(le.slice(0,Q)),le.push(le[0]);var be=le.map(function(me){return me.id()}).join(",");_.indexOf(be)===-1&&(m.push(l.spawn(le)),_.push(be))}}else break}return{distanceTo:x,pathTo:L,hasNegativeWeightCycle:g,negativeWeightCycles:m}}},zy=Math.sqrt(2),Gy=function(e,r,n){n.length===0&&it("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],o=a[1],i=a[2],s=r[o],l=r[i],u=n,f=u.length-1;f>=0;f--){var h=u[f],v=h[1],c=h[2];(r[v]===s&&r[c]===l||r[v]===l&&r[c]===s)&&u.splice(f,1)}for(var d=0;d<u.length;d++){var g=u[d];g[1]===l?(u[d]=g.slice(),u[d][1]=s):g[2]===l&&(u[d]=g.slice(),u[d][2]=s)}for(var m=0;m<r.length;m++)r[m]===l&&(r[m]=s);return u},Bi=function(e,r,n,a){for(;n>a;){var o=Math.floor(Math.random()*r.length);r=Gy(o,e,r),n--}return r},Uy={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(F){return F.isLoop()});var o=n.length,i=a.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),l=Math.floor(o/zy);if(o<2){it("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],f=0;f<i;f++){var h=a[f];u.push([f,n.indexOf(h.source()),n.indexOf(h.target())])}for(var v=1/0,c=[],d=new Array(o),g=new Array(o),m=new Array(o),p=function(_,H){for(var k=0;k<o;k++)H[k]=_[k]},y=0;y<=s;y++){for(var w=0;w<o;w++)g[w]=w;var x=Bi(g,u.slice(),o,l),L=x.slice();p(g,m);var A=Bi(g,x,l,2),S=Bi(m,L,l,2);A.length<=S.length&&A.length<v?(v=A.length,c=A,p(g,d)):S.length<=A.length&&S.length<v&&(v=S.length,c=S,p(m,d))}for(var N=this.spawn(c.map(function(F){return a[F[0]]})),M=this.spawn(),b=this.spawn(),T=d[0],E=0;E<d.length;E++){var D=d[E],C=n[E];D===T?M.merge(C):b.merge(C)}var P=function(_){var H=e.spawn();return _.forEach(function(k){H.merge(k),k.connectedEdges().forEach(function(G){e.contains(G)&&!N.contains(G)&&H.merge(G)})}),H},I=[P(M),P(b)],R={cut:N,components:I,partition1:M,partition2:b};return R}},Vy=function(e){return{x:e.x,y:e.y}},di=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Ru=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},un=function(e){return{x:e[0],y:e[1]}},Hy=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,o=r;o<n;o++){var i=e[o];isFinite(i)&&(a=Math.min(i,a))}return a},$y=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,o=r;o<n;o++){var i=e[o];isFinite(i)&&(a=Math.max(i,a))}return a},Yy=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,o=0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a+=s,o++)}return a/o},qy=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];i?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}o&&e.sort(function(v,c){return v-c});var f=e.length,h=Math.floor(f/2);return f%2!==0?e[h+1+s]:(e[h-1+s]+e[h+s])/2},Wy=function(e){return Math.PI*e/180},xa=function(e,r){return Math.atan2(r,e)-Math.PI/2},Ao=Math.log2||function(t){return Math.log(t)/Math.log(2)},Iu=function(e){return e>0?1:e<0?-1:0},Hr=function(e,r){return Math.sqrt(Br(e,r))},Br=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},Xy=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var o=0;o<r;o++)e[o]=e[o]/n;return e},gt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},cn=function(e,r,n,a){return{x:gt(e.x,r.x,n.x,a),y:gt(e.y,r.y,n.y,a)}},Ky=function(e,r,n,a){var o={x:r.x-e.x,y:r.y-e.y},i=Hr(e,r),s={x:o.x/i,y:o.y/i};return n=n==null?0:n,a=a!=null?a:n*i,{x:e.x+s.x*a,y:e.y+s.y*a}},Kn=function(e,r,n){return Math.max(e,Math.min(n,r))},It=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Zy=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},Qy=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},Jy=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},jy=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Pa=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ki=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,o,i;if(r.length===1)n=a=o=i=r[0];else if(r.length===2)n=o=r[0],i=a=r[1];else if(r.length===4){var s=rr(r,4);n=s[0],a=s[1],o=s[2],i=s[3]}return e.x1-=i,e.x2+=a,e.y1-=n,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ss=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Oo=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},mn=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},e0=function(e,r){return mn(e,r.x,r.y)},Pu=function(e,r){return mn(e,r.x1,r.y1)&&mn(e,r.x2,r.y2)},Fu=function(e,r,n,a,o,i,s){var l=fa(o,i),u=o/2,f=i/2,h;{var v=n-u+l-s,c=a-f-s,d=n+u-l+s,g=c;if(h=Tr(e,r,n,a,v,c,d,g,!1),h.length>0)return h}{var m=n+u+s,p=a-f+l-s,y=m,w=a+f-l+s;if(h=Tr(e,r,n,a,m,p,y,w,!1),h.length>0)return h}{var x=n-u+l-s,L=a+f+s,A=n+u-l+s,S=L;if(h=Tr(e,r,n,a,x,L,A,S,!1),h.length>0)return h}{var N=n-u-s,M=a-f+l-s,b=N,T=a+f-l+s;if(h=Tr(e,r,n,a,N,M,b,T,!1),h.length>0)return h}var E;{var D=n-u+l,C=a-f+l;if(E=_n(e,r,n,a,D,C,l+s),E.length>0&&E[0]<=D&&E[1]<=C)return[E[0],E[1]]}{var P=n+u-l,I=a-f+l;if(E=_n(e,r,n,a,P,I,l+s),E.length>0&&E[0]>=P&&E[1]<=I)return[E[0],E[1]]}{var R=n+u-l,F=a+f-l;if(E=_n(e,r,n,a,R,F,l+s),E.length>0&&E[0]>=R&&E[1]>=F)return[E[0],E[1]]}{var _=n-u+l,H=a+f-l;if(E=_n(e,r,n,a,_,H,l+s),E.length>0&&E[0]<=_&&E[1]>=H)return[E[0],E[1]]}return[]},t0=function(e,r,n,a,o,i,s){var l=s,u=Math.min(n,o),f=Math.max(n,o),h=Math.min(a,i),v=Math.max(a,i);return u-l<=e&&e<=f+l&&h-l<=r&&r<=v+l},r0=function(e,r,n,a,o,i,s,l,u){var f={x1:Math.min(n,s,o)-u,x2:Math.max(n,s,o)+u,y1:Math.min(a,l,i)-u,y2:Math.max(a,l,i)+u};return!(e<f.x1||e>f.x2||r<f.y1||r>f.y2)},n0=function(e,r,n,a){n-=a;var o=r*r-4*e*n;if(o<0)return[];var i=Math.sqrt(o),s=2*e,l=(-r+i)/s,u=(-r-i)/s;return[l,u]},a0=function(e,r,n,a,o){var i=1e-5;e===0&&(e=i),r/=e,n/=e,a/=e;var s,l,u,f,h,v,c,d;if(l=(3*n-r*r)/9,u=-(27*a)+r*(9*n-2*(r*r)),u/=54,s=l*l*l+u*u,o[1]=0,c=r/3,s>0){h=u+Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),v=u-Math.sqrt(s),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),o[0]=-c+h+v,c+=(h+v)/2,o[4]=o[2]=-c,c=Math.sqrt(3)*(-v+h)/2,o[3]=c,o[5]=-c;return}if(o[5]=o[3]=0,s===0){d=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),o[0]=-c+2*d,o[4]=o[2]=-(d+c);return}l=-l,f=l*l*l,f=Math.acos(u/Math.sqrt(f)),d=2*Math.sqrt(l),o[0]=-c+d*Math.cos(f/3),o[2]=-c+d*Math.cos((f+2*Math.PI)/3),o[4]=-c+d*Math.cos((f+4*Math.PI)/3)},i0=function(e,r,n,a,o,i,s,l){var u=1*n*n-4*n*o+2*n*s+4*o*o-4*o*s+s*s+a*a-4*a*i+2*a*l+4*i*i-4*i*l+l*l,f=1*9*n*o-3*n*n-3*n*s-6*o*o+3*o*s+9*a*i-3*a*a-3*a*l-6*i*i+3*i*l,h=1*3*n*n-6*n*o+n*s-n*e+2*o*o+2*o*e-s*e+3*a*a-6*a*i+a*l-a*r+2*i*i+2*i*r-l*r,v=1*n*o-n*n+n*e-o*e+a*i-a*a+a*r-i*r,c=[];a0(u,f,h,v,c);for(var d=1e-7,g=[],m=0;m<6;m+=2)Math.abs(c[m+1])<d&&c[m]>=0&&c[m]<=1&&g.push(c[m]);g.push(1),g.push(0);for(var p=-1,y,w,x,L=0;L<g.length;L++)y=Math.pow(1-g[L],2)*n+2*(1-g[L])*g[L]*o+g[L]*g[L]*s,w=Math.pow(1-g[L],2)*a+2*(1-g[L])*g[L]*i+g[L]*g[L]*l,x=Math.pow(y-e,2)+Math.pow(w-r,2),p>=0?x<p&&(p=x):p=x;return p},o0=function(e,r,n,a,o,i){var s=[e-n,r-a],l=[o-n,i-a],u=l[0]*l[0]+l[1]*l[1],f=s[0]*s[0]+s[1]*s[1],h=s[0]*l[0]+s[1]*l[1],v=h*h/u;return h<0?f:v>u?(e-o)*(e-o)+(r-i)*(r-i):f-v},Rt=function(e,r,n){for(var a,o,i,s,l,u=0,f=0;f<n.length/2;f++)if(a=n[f*2],o=n[f*2+1],f+1<n.length/2?(i=n[(f+1)*2],s=n[(f+1)*2+1]):(i=n[(f+1-n.length/2)*2],s=n[(f+1-n.length/2)*2+1]),!(a==e&&i==e))if(a>=e&&e>=i||a<=e&&e<=i)l=(e-a)/(i-a)*(s-o)+o,l>r&&u++;else continue;return u%2!==0},sr=function(e,r,n,a,o,i,s,l,u){var f=new Array(n.length),h;l[0]!=null?(h=Math.atan(l[1]/l[0]),l[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=l;for(var v=Math.cos(-h),c=Math.sin(-h),d=0;d<f.length/2;d++)f[d*2]=i/2*(n[d*2]*v-n[d*2+1]*c),f[d*2+1]=s/2*(n[d*2+1]*v+n[d*2]*c),f[d*2]+=a,f[d*2+1]+=o;var g;if(u>0){var m=ku(f,-u);g=Bu(m)}else g=f;return Rt(e,r,g)},s0=function(e,r,n,a,o,i,s){for(var l=new Array(n.length),u=i/2,f=s/2,h=Ro(i,s),v=h*h,c=0;c<n.length/4;c++){var d=void 0,g=void 0;c===0?d=n.length-2:d=c*4-2,g=c*4+2;var m=a+u*n[c*4],p=o+f*n[c*4+1],y=-n[d]*n[g]-n[d+1]*n[g+1],w=h/Math.tan(Math.acos(y)/2),x=m-w*n[d],L=p-w*n[d+1],A=m+w*n[g],S=p+w*n[g+1];l[c*4]=x,l[c*4+1]=L,l[c*4+2]=A,l[c*4+3]=S;var N=n[d+1],M=-n[d],b=N*n[g]+M*n[g+1];b<0&&(N*=-1,M*=-1);var T=x+N*h,E=L+M*h,D=Math.pow(T-e,2)+Math.pow(E-r,2);if(D<=v)return!0}return Rt(e,r,l)},Bu=function(e){for(var r=new Array(e.length/2),n,a,o,i,s,l,u,f,h=0;h<e.length/4;h++){n=e[h*4],a=e[h*4+1],o=e[h*4+2],i=e[h*4+3],h<e.length/4-1?(s=e[(h+1)*4],l=e[(h+1)*4+1],u=e[(h+1)*4+2],f=e[(h+1)*4+3]):(s=e[0],l=e[1],u=e[2],f=e[3]);var v=Tr(n,a,o,i,s,l,u,f,!0);r[h*2]=v[0],r[h*2+1]=v[1]}return r},ku=function(e,r){for(var n=new Array(e.length*2),a,o,i,s,l=0;l<e.length/2;l++){a=e[l*2],o=e[l*2+1],l<e.length/2-1?(i=e[(l+1)*2],s=e[(l+1)*2+1]):(i=e[0],s=e[1]);var u=s-o,f=-(i-a),h=Math.sqrt(u*u+f*f),v=u/h,c=f/h;n[l*4]=a+v*r,n[l*4+1]=o+c*r,n[l*4+2]=i+v*r,n[l*4+3]=s+c*r}return n},l0=function(e,r,n,a,o,i){var s=n-e,l=a-r;s/=o,l/=i;var u=Math.sqrt(s*s+l*l),f=u-1;if(f<0)return[];var h=f/u;return[(n-e)*h+e,(a-r)*h+r]},Ur=function(e,r,n,a,o,i,s){return e-=o,r-=i,e/=n/2+s,r/=a/2+s,e*e+r*r<=1},_n=function(e,r,n,a,o,i,s){var l=[n-e,a-r],u=[e-o,r-i],f=l[0]*l[0]+l[1]*l[1],h=2*(u[0]*l[0]+u[1]*l[1]),v=u[0]*u[0]+u[1]*u[1]-s*s,c=h*h-4*f*v;if(c<0)return[];var d=(-h+Math.sqrt(c))/(2*f),g=(-h-Math.sqrt(c))/(2*f),m=Math.min(d,g),p=Math.max(d,g),y=[];if(m>=0&&m<=1&&y.push(m),p>=0&&p<=1&&y.push(p),y.length===0)return[];var w=y[0]*l[0]+e,x=y[0]*l[1]+r;if(y.length>1){if(y[0]==y[1])return[w,x];var L=y[1]*l[0]+e,A=y[1]*l[1]+r;return[w,x,L,A]}else return[w,x]},_i=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Tr=function(e,r,n,a,o,i,s,l,u){var f=e-o,h=n-e,v=s-o,c=r-i,d=a-r,g=l-i,m=v*c-g*f,p=h*c-d*f,y=g*h-v*d;if(y!==0){var w=m/y,x=p/y,L=.001,A=0-L,S=1+L;return A<=w&&w<=S&&A<=x&&x<=S?[e+w*h,r+w*d]:u?[e+w*h,r+w*d]:[]}else return m===0||p===0?_i(e,n,s)===s?[s,l]:_i(e,n,o)===o?[o,i]:_i(o,s,n)===n?[n,a]:[]:[]},Zn=function(e,r,n,a,o,i,s,l){var u=[],f,h=new Array(n.length),v=!0;i==null&&(v=!1);var c;if(v){for(var d=0;d<h.length/2;d++)h[d*2]=n[d*2]*i+a,h[d*2+1]=n[d*2+1]*s+o;if(l>0){var g=ku(h,-l);c=Bu(g)}else c=h}else c=n;for(var m,p,y,w,x=0;x<c.length/2;x++)m=c[x*2],p=c[x*2+1],x<c.length/2-1?(y=c[(x+1)*2],w=c[(x+1)*2+1]):(y=c[0],w=c[1]),f=Tr(e,r,a,o,m,p,y,w),f.length!==0&&u.push(f[0],f[1]);return u},u0=function(e,r,n,a,o,i,s,l){for(var u=[],f,h=new Array(n.length),v=i/2,c=s/2,d=Ro(i,s),g=0;g<n.length/4;g++){var m=void 0,p=void 0;g===0?m=n.length-2:m=g*4-2,p=g*4+2;var y=a+v*n[g*4],w=o+c*n[g*4+1],x=-n[m]*n[p]-n[m+1]*n[p+1],L=d/Math.tan(Math.acos(x)/2),A=y-L*n[m],S=w-L*n[m+1],N=y+L*n[p],M=w+L*n[p+1];g===0?(h[n.length-2]=A,h[n.length-1]=S):(h[g*4-2]=A,h[g*4-1]=S),h[g*4]=N,h[g*4+1]=M;var b=n[m+1],T=-n[m],E=b*n[p]+T*n[p+1];E<0&&(b*=-1,T*=-1);var D=A+b*d,C=S+T*d;f=_n(e,r,a,o,D,C,d),f.length!==0&&u.push(f[0],f[1])}for(var P=0;P<h.length/4;P++)f=Tr(e,r,a,o,h[P*4],h[P*4+1],h[P*4+2],h[P*4+3],!1),f.length!==0&&u.push(f[0],f[1]);if(u.length>2){for(var I=[u[0],u[1]],R=Math.pow(I[0]-e,2)+Math.pow(I[1]-r,2),F=1;F<u.length/2;F++){var _=Math.pow(u[F*2]-e,2)+Math.pow(u[F*2+1]-r,2);_<=R&&(I[0]=u[F*2],I[1]=u[F*2+1],R=_)}return I}return u},Ta=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),i=(o-n)/o;return i<0&&(i=1e-5),[r[0]+i*a[0],r[1]+i*a[1]]},Nt=function(e,r){var n=Ji(e,r);return n=_u(n),n},_u=function(e){for(var r,n,a=e.length/2,o=1/0,i=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)r=e[2*u],n=e[2*u+1],o=Math.min(o,r),s=Math.max(s,r),i=Math.min(i,n),l=Math.max(l,n);for(var f=2/(s-o),h=2/(l-i),v=0;v<a;v++)r=e[2*v]=e[2*v]*f,n=e[2*v+1]=e[2*v+1]*h,o=Math.min(o,r),s=Math.max(s,r),i=Math.min(i,n),l=Math.max(l,n);if(i<-1)for(var c=0;c<a;c++)n=e[2*c+1]=e[2*c+1]+(-1-i);return e},Ji=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var o=new Array(e*2),i,s=0;s<e;s++)i=s*n+a,o[2*s]=Math.cos(i),o[2*s+1]=Math.sin(-i);return o},fa=function(e,r){return Math.min(e/4,r/4,8)},Ro=function(e,r){return Math.min(e/10,r/10,8)},zu=function(){return 8},f0=function(e,r,n){return[e-2*r+n,2*(r-e),e]},ji=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},h0=bt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),c0={pageRank:function(e){for(var r=h0(e),n=r.dampingFactor,a=r.precision,o=r.iterations,i=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,f=l.edges,h=u.length,v=h*h,c=f.length,d=new Array(v),g=new Array(h),m=(1-n)/h,p=0;p<h;p++){for(var y=0;y<h;y++){var w=p*h+y;d[w]=0}g[p]=0}for(var x=0;x<c;x++){var L=f[x],A=L.data("source"),S=L.data("target");if(A!==S){var N=u.indexOfId(A),M=u.indexOfId(S),b=i(L),T=M*h+N;d[T]+=b,g[N]+=b}}for(var E=1/h+m,D=0;D<h;D++)if(g[D]===0)for(var C=0;C<h;C++){var P=C*h+D;d[P]=E}else for(var I=0;I<h;I++){var R=I*h+D;d[R]=d[R]/g[D]+m}for(var F=new Array(h),_=new Array(h),H,k=0;k<h;k++)F[k]=1;for(var G=0;G<o;G++){for(var q=0;q<h;q++)_[q]=0;for(var $=0;$<h;$++)for(var z=0;z<h;z++){var V=$*h+z;_[$]+=d[V]*F[z]}Xy(_),H=F,F=_,_=H;for(var B=0,Y=0;Y<h;Y++){var W=H[Y]-F[Y];B+=W*W}if(B<a)break}var J={rank:function(pe){return pe=s.collection(pe)[0],F[u.indexOf(pe)]}};return J}},Ds=bt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),vn={degreeCentralityNormalized:function(e){e=Ds(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},h={},v=0,c=0,d=0;d<a;d++){var g=n[d],m=g.id();e.root=g;var p=this.degreeCentrality(e);v<p.indegree&&(v=p.indegree),c<p.outdegree&&(c=p.outdegree),f[m]=p.indegree,h[m]=p.outdegree}return{indegree:function(w){return v==0?0:(Re(w)&&(w=r.filter(w)),f[w.id()]/v)},outdegree:function(w){return c===0?0:(Re(w)&&(w=r.filter(w)),h[w.id()]/c)}}}else{for(var o={},i=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);i<u.degree&&(i=u.degree),o[l.id()]=u.degree}return{degree:function(w){return i===0?0:(Re(w)&&(w=r.filter(w)),o[w.id()]/i)}}}},degreeCentrality:function(e){e=Ds(e);var r=this.cy(),n=this,a=e,o=a.root,i=a.weight,s=a.directed,l=a.alpha;if(o=r.collection(o)[0],s){for(var c=o.connectedEdges(),d=c.filter(function(A){return A.target().same(o)&&n.has(A)}),g=c.filter(function(A){return A.source().same(o)&&n.has(A)}),m=d.length,p=g.length,y=0,w=0,x=0;x<d.length;x++)y+=i(d[x]);for(var L=0;L<g.length;L++)w+=i(g[L]);return{indegree:Math.pow(m,1-l)*Math.pow(y,l),outdegree:Math.pow(p,1-l)*Math.pow(w,l)}}else{for(var u=o.connectedEdges().intersection(n),f=u.length,h=0,v=0;v<u.length;v++)h+=i(u[v]);return{degree:Math.pow(f,1-l)*Math.pow(h,l)}}}};vn.dc=vn.degreeCentrality;vn.dcn=vn.degreeCentralityNormalised=vn.degreeCentralityNormalized;var Ls=bt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),dn={closenessCentralityNormalized:function(e){for(var r=Ls(e),n=r.harmonic,a=r.weight,o=r.directed,i=this.cy(),s={},l=0,u=this.nodes(),f=this.floydWarshall({weight:a,directed:o}),h=0;h<u.length;h++){for(var v=0,c=u[h],d=0;d<u.length;d++)if(h!==d){var g=f.distance(c,u[d]);n?v+=1/g:v+=g}n||(v=1/v),l<v&&(l=v),s[c.id()]=v}return{closeness:function(p){return l==0?0:(Re(p)?p=i.filter(p)[0].id():p=p.id(),s[p]/l)}}},closenessCentrality:function(e){var r=Ls(e),n=r.root,a=r.weight,o=r.directed,i=r.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:o}),l=0,u=this.nodes(),f=0;f<u.length;f++){var h=u[f];if(!h.same(n)){var v=s.distanceTo(h);i?l+=1/v:l+=v}}return i?l:1/l}};dn.cc=dn.closenessCentrality;dn.ccn=dn.closenessCentralityNormalised=dn.closenessCentralityNormalized;var v0=bt({weight:null,directed:!1}),eo={betweennessCentrality:function(e){for(var r=v0(e),n=r.directed,a=r.weight,o=a!=null,i=this.cy(),s=this.nodes(),l={},u={},f=0,h={set:function(w,x){u[w]=x,x>f&&(f=x)},get:function(w){return u[w]}},v=0;v<s.length;v++){var c=s[v],d=c.id();n?l[d]=c.outgoers().nodes():l[d]=c.openNeighborhood().nodes(),h.set(d,0)}for(var g=function(w){for(var x=s[w].id(),L=[],A={},S={},N={},M=new sa.default(function(z,V){return N[z]-N[V]}),b=0;b<s.length;b++){var T=s[b].id();A[T]=[],S[T]=0,N[T]=1/0}for(S[x]=1,N[x]=0,M.push(x);!M.empty();){var E=M.pop();if(L.push(E),o)for(var D=0;D<l[E].length;D++){var C=l[E][D],P=i.getElementById(E),I=void 0;P.edgesTo(C).length>0?I=P.edgesTo(C)[0]:I=C.edgesTo(P)[0];var R=a(I);C=C.id(),N[C]>N[E]+R&&(N[C]=N[E]+R,M.nodes.indexOf(C)<0?M.push(C):M.updateItem(C),S[C]=0,A[C]=[]),N[C]==N[E]+R&&(S[C]=S[C]+S[E],A[C].push(E))}else for(var F=0;F<l[E].length;F++){var _=l[E][F].id();N[_]==1/0&&(M.push(_),N[_]=N[E]+1),N[_]==N[E]+1&&(S[_]=S[_]+S[E],A[_].push(E))}}for(var H={},k=0;k<s.length;k++)H[s[k].id()]=0;for(;L.length>0;){for(var G=L.pop(),q=0;q<A[G].length;q++){var $=A[G][q];H[$]=H[$]+S[$]/S[G]*(1+H[G])}G!=s[w].id()&&h.set(G,h.get(G)+H[G])}},m=0;m<s.length;m++)g(m);var p={betweenness:function(w){var x=i.collection(w).id();return h.get(x)},betweennessNormalized:function(w){if(f==0)return 0;var x=i.collection(w).id();return h.get(x)/f}};return p.betweennessNormalised=p.betweennessNormalized,p}};eo.bc=eo.betweennessCentrality;var d0=bt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),g0=function(e){return d0(e)},p0=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},m0=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Gu=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var o=0;o<r;o++)n+=e[o*r+a];for(var i=0;i<r;i++)e[i*r+a]=e[i*r+a]/n}},y0=function(e,r,n){for(var a=new Array(n*n),o=0;o<n;o++){for(var i=0;i<n;i++)a[o*n+i]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[o*n+l]+=e[o*n+s]*r[s*n+l]}return a},w0=function(e,r,n){for(var a=e.slice(0),o=1;o<n;o++)e=y0(e,a,r);return e},b0=function(e,r,n){for(var a=new Array(r*r),o=0;o<r*r;o++)a[o]=Math.pow(e[o],n);return Gu(a,r),a},E0=function(e,r,n,a){for(var o=0;o<n;o++){var i=Math.round(e[o]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(r[o]*Math.pow(10,a))/Math.pow(10,a);if(i!==s)return!1}return!0},x0=function(e,r,n,a){for(var o=[],i=0;i<r;i++){for(var s=[],l=0;l<r;l++)Math.round(e[i*r+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&o.push(a.collection(s))}return o},T0=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},C0=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&T0(e[r],e[n])&&e.splice(n,1);return e},Ns=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),o=g0(e),i={},s=0;s<r.length;s++)i[r[s].id()]=s;for(var l=r.length,u=l*l,f=new Array(u),h,v=0;v<u;v++)f[v]=0;for(var c=0;c<n.length;c++){var d=n[c],g=i[d.source().id()],m=i[d.target().id()],p=p0(d,o.attributes);f[g*l+m]+=p,f[m*l+g]+=p}m0(f,l,o.multFactor),Gu(f,l);for(var y=!0,w=0;y&&w<o.maxIterations;)y=!1,h=w0(f,l,o.expandFactor),f=b0(h,l,o.inflateFactor),E0(f,h,u,4)||(y=!0),w++;var x=x0(f,l,r,a);return x=C0(x),x},S0={markovClustering:Ns,mcl:Ns},D0=function(e){return e},Uu=function(e,r){return Math.abs(r-e)},Ms=function(e,r,n){return e+Uu(r,n)},As=function(e,r,n){return e+Math.pow(n-r,2)},L0=function(e){return Math.sqrt(e)},N0=function(e,r,n){return Math.max(e,Uu(r,n))},In=function(e,r,n,a,o){for(var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:D0,s=a,l,u,f=0;f<e;f++)l=r(f),u=n(f),s=o(s,l,u);return i(s)},yn={euclidean:function(e,r,n){return e>=2?In(e,r,n,0,As,L0):In(e,r,n,0,Ms)},squaredEuclidean:function(e,r,n){return In(e,r,n,0,As)},manhattan:function(e,r,n){return In(e,r,n,0,Ms)},max:function(e,r,n){return In(e,r,n,-1/0,N0)}};yn["squared-euclidean"]=yn.squaredEuclidean;yn.squaredeuclidean=yn.squaredEuclidean;function gi(t,e,r,n,a,o){var i;return at(t)?i=t:i=yn[t]||yn.euclidean,e===0&&at(t)?i(a,o):i(e,r,n,a,o)}var M0=bt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Io=function(e){return M0(e)},Wa=function(e,r,n,a,o){var i=o!=="kMedoids",s=i?function(h){return n[h]}:function(h){return a[h](n)},l=function(v){return a[v](r)},u=n,f=r;return gi(e,a.length,s,l,u,f)},zi=function(e,r,n){for(var a=n.length,o=new Array(a),i=new Array(a),s=new Array(r),l=null,u=0;u<a;u++)o[u]=e.min(n[u]).value,i[u]=e.max(n[u]).value;for(var f=0;f<r;f++){l=[];for(var h=0;h<a;h++)l[h]=Math.random()*(i[h]-o[h])+o[h];s[f]=l}return s},Vu=function(e,r,n,a,o){for(var i=1/0,s=0,l=0;l<r.length;l++){var u=Wa(n,e,r[l],a,o);u<i&&(i=u,s=l)}return s},Hu=function(e,r,n){for(var a=[],o=null,i=0;i<r.length;i++)o=r[i],n[o.id()]===e&&a.push(o);return a},A0=function(e,r,n){return Math.abs(r-e)<=n},O0=function(e,r,n){for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++){var i=Math.abs(e[a][o]-r[a][o]);if(i>n)return!1}return!0},R0=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},Os=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var o=e[Math.floor(Math.random()*e.length)];R0(o,n,a);)o=e[Math.floor(Math.random()*e.length)];n[a]=o}else for(var i=0;i<r;i++)n[i]=e[Math.floor(Math.random()*e.length)];return n},Rs=function(e,r,n){for(var a=0,o=0;o<r.length;o++)a+=Wa("manhattan",r[o],e,n,"kMedoids");return a},I0=function(e){var r=this.cy(),n=this.nodes(),a=null,o=Io(e),i=new Array(o.k),s={},l;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,l=zi(n,o.k,o.attributes)):vt(o.testCentroids)==="object"?l=o.testCentroids:l=zi(n,o.k,o.attributes):l=zi(n,o.k,o.attributes);for(var u=!0,f=0;u&&f<o.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],s[a.id()]=Vu(a,l,o.distance,o.attributes,"kMeans");u=!1;for(var v=0;v<o.k;v++){var c=Hu(v,n,s);if(c.length!==0){for(var d=o.attributes.length,g=l[v],m=new Array(d),p=new Array(d),y=0;y<d;y++){p[y]=0;for(var w=0;w<c.length;w++)a=c[w],p[y]+=o.attributes[y](a);m[y]=p[y]/c.length,A0(m[y],g[y],o.sensitivityThreshold)||(u=!0)}l[v]=m,i[v]=r.collection(c)}}f++}return i},P0=function(e){var r=this.cy(),n=this.nodes(),a=null,o=Io(e),i=new Array(o.k),s,l={},u,f=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(vt(o.testCentroids)==="object"?s=o.testCentroids:s=Os(n,o.k)):s=Os(n,o.k);for(var h=!0,v=0;h&&v<o.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],l[a.id()]=Vu(a,s,o.distance,o.attributes,"kMedoids");h=!1;for(var d=0;d<s.length;d++){var g=Hu(d,n,l);if(g.length!==0){f[d]=Rs(s[d],g,o.attributes);for(var m=0;m<g.length;m++)u=Rs(g[m],g,o.attributes),u<f[d]&&(f[d]=u,s[d]=g[m],h=!0);i[d]=r.collection(g)}}v++}return i},F0=function(e,r,n,a,o){for(var i,s,l=0;l<r.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],o.m);for(var f=0;f<e.length;f++)for(var h=0;h<o.attributes.length;h++){i=0,s=0;for(var v=0;v<r.length;v++)i+=a[v][f]*o.attributes[h](r[v]),s+=a[v][f];e[f][h]=i/s}},B0=function(e,r,n,a,o){for(var i=0;i<e.length;i++)r[i]=e[i].slice();for(var s,l,u,f=2/(o.m-1),h=0;h<n.length;h++)for(var v=0;v<a.length;v++){s=0;for(var c=0;c<n.length;c++)l=Wa(o.distance,a[v],n[h],o.attributes,"cmeans"),u=Wa(o.distance,a[v],n[c],o.attributes,"cmeans"),s+=Math.pow(l/u,f);e[v][h]=1/s}},k0=function(e,r,n,a){for(var o=new Array(n.k),i=0;i<o.length;i++)o[i]=[];for(var s,l,u=0;u<r.length;u++){s=-1/0,l=-1;for(var f=0;f<r[0].length;f++)r[u][f]>s&&(s=r[u][f],l=f);o[l].push(e[u])}for(var h=0;h<o.length;h++)o[h]=a.collection(o[h]);return o},Is=function(e){var r=this.cy(),n=this.nodes(),a=Io(e),o,i,s,l,u;l=new Array(n.length);for(var f=0;f<n.length;f++)l[f]=new Array(a.k);s=new Array(n.length);for(var h=0;h<n.length;h++)s[h]=new Array(a.k);for(var v=0;v<n.length;v++){for(var c=0,d=0;d<a.k;d++)s[v][d]=Math.random(),c+=s[v][d];for(var g=0;g<a.k;g++)s[v][g]=s[v][g]/c}i=new Array(a.k);for(var m=0;m<a.k;m++)i[m]=new Array(a.attributes.length);u=new Array(n.length);for(var p=0;p<n.length;p++)u[p]=new Array(a.k);for(var y=!0,w=0;y&&w<a.maxIterations;)y=!1,F0(i,n,s,u,a),B0(s,l,i,n,a),O0(s,l,a.sensitivityThreshold)||(y=!0),w++;return o=k0(n,s,a,r),{clusters:o,degreeOfMembership:s}},_0={kMeans:I0,kMedoids:P0,fuzzyCMeans:Is,fcm:Is},z0=bt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),G0={single:"min",complete:"max"},U0=function(e){var r=z0(e),n=G0[r.linkage];return n!=null&&(r.linkage=n),r},Ps=function(e,r,n,a,o){for(var i=0,s=1/0,l,u=o.attributes,f=function(M,b){return gi(o.distance,u.length,function(T){return u[T](M)},function(T){return u[T](b)},M,b)},h=0;h<e.length;h++){var v=e[h].key,c=n[v][a[v]];c<s&&(i=v,s=c)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var d=r[i],g=r[a[i]],m;o.mode==="dendrogram"?m={left:d,right:g,key:d.key}:m={value:d.value.concat(g.value),key:d.key},e[d.index]=m,e.splice(g.index,1),r[d.key]=m;for(var p=0;p<e.length;p++){var y=e[p];d.key===y.key?l=1/0:o.linkage==="min"?(l=n[d.key][y.key],n[d.key][y.key]>n[g.key][y.key]&&(l=n[g.key][y.key])):o.linkage==="max"?(l=n[d.key][y.key],n[d.key][y.key]<n[g.key][y.key]&&(l=n[g.key][y.key])):o.linkage==="mean"?l=(n[d.key][y.key]*d.size+n[g.key][y.key]*g.size)/(d.size+g.size):o.mode==="dendrogram"?l=f(y.value,d.value):l=f(y.value[0],d.value[0]),n[d.key][y.key]=n[y.key][d.key]=l}for(var w=0;w<e.length;w++){var x=e[w].key;if(a[x]===d.key||a[x]===g.key){for(var L=x,A=0;A<e.length;A++){var S=e[A].key;n[x][S]<n[x][L]&&(L=S)}a[x]=L}e[w].index=w}return d.key=g.key=d.index=g.index=null,!0},Ca=function t(e,r,n){!e||(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))},V0=function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),a=t(e.right,r),o=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:o.id()}}),r.add({group:"edges",data:{source:a,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},H0=function t(e,r,n){if(!e)return[];var a=[],o=[],i=[];return r===0?(e.left&&Ca(e.left,a),e.right&&Ca(e.right,o),i=a.concat(o),[n.collection(i)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Ca(e.left,a),e.right&&Ca(e.right,o),[n.collection(a),n.collection(o)]):e.value?[n.collection(e.value)]:(e.left&&(a=t(e.left,r-1,n)),e.right&&(o=t(e.right,r-1,n)),a.concat(o))},Fs=function(e){for(var r=this.cy(),n=this.nodes(),a=U0(e),o=a.attributes,i=function(w,x){return gi(a.distance,o.length,function(L){return o[L](w)},function(L){return o[L](x)},w,x)},s=[],l=[],u=[],f=[],h=0;h<n.length;h++){var v={value:a.mode==="dendrogram"?n[h]:[n[h]],key:h,index:h};s[h]=v,f[h]=v,l[h]=[],u[h]=0}for(var c=0;c<s.length;c++)for(var d=0;d<=c;d++){var g=void 0;a.mode==="dendrogram"?g=c===d?1/0:i(s[c].value,s[d].value):g=c===d?1/0:i(s[c].value[0],s[d].value[0]),l[c][d]=g,l[d][c]=g,g<l[c][u[c]]&&(u[c]=d)}for(var m=Ps(s,f,l,u,a);m;)m=Ps(s,f,l,u,a);var p;return a.mode==="dendrogram"?(p=H0(s[0],a.dendrogramDepth,r),a.addDendrogram&&V0(s[0],r)):(p=new Array(s.length),s.forEach(function(y,w){y.key=y.index=null,p[w]=r.collection(y.value)})),p},$0={hierarchicalClustering:Fs,hca:Fs},Y0=bt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),q0=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||it("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(o){return o===n})||we(n)||it("Preference must be one of [".concat(a.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Y0(e)},W0=function(e,r,n,a){var o=function(s,l){return a[l](s)};return-gi(e,a.length,function(i){return o(r,i)},function(i){return o(n,i)},r,n)},X0=function(e,r){var n=null;return r==="median"?n=qy(e):r==="mean"?n=Yy(e):r==="min"?n=Hy(e):r==="max"?n=$y(e):n=r,n},K0=function(e,r,n){for(var a=[],o=0;o<e;o++)r[o*e+o]+n[o*e+o]>0&&a.push(o);return a},Bs=function(e,r,n){for(var a=[],o=0;o<e;o++){for(var i=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];r[o*e+u]>s&&(i=u,s=r[o*e+u])}i>0&&a.push(i)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},Z0=function(e,r,n){for(var a=Bs(e,r,n),o=0;o<n.length;o++){for(var i=[],s=0;s<a.length;s++)a[s]===n[o]&&i.push(s);for(var l=-1,u=-1/0,f=0;f<i.length;f++){for(var h=0,v=0;v<i.length;v++)h+=r[i[v]*e+i[f]];h>u&&(l=f,u=h)}n[o]=i[l]}return a=Bs(e,r,n),a},ks=function(e){for(var r=this.cy(),n=this.nodes(),a=q0(e),o={},i=0;i<n.length;i++)o[n[i].id()]=i;var s,l,u,f,h,v;s=n.length,l=s*s,u=new Array(l);for(var c=0;c<l;c++)u[c]=-1/0;for(var d=0;d<s;d++)for(var g=0;g<s;g++)d!==g&&(u[d*s+g]=W0(a.distance,n[d],n[g],a.attributes));f=X0(u,a.preference);for(var m=0;m<s;m++)u[m*s+m]=f;h=new Array(l);for(var p=0;p<l;p++)h[p]=0;v=new Array(l);for(var y=0;y<l;y++)v[y]=0;for(var w=new Array(s),x=new Array(s),L=new Array(s),A=0;A<s;A++)w[A]=0,x[A]=0,L[A]=0;for(var S=new Array(s*a.minIterations),N=0;N<S.length;N++)S[N]=0;var M;for(M=0;M<a.maxIterations;M++){for(var b=0;b<s;b++){for(var T=-1/0,E=-1/0,D=-1,C=0,P=0;P<s;P++)w[P]=h[b*s+P],C=v[b*s+P]+u[b*s+P],C>=T?(E=T,T=C,D=P):C>E&&(E=C);for(var I=0;I<s;I++)h[b*s+I]=(1-a.damping)*(u[b*s+I]-T)+a.damping*w[I];h[b*s+D]=(1-a.damping)*(u[b*s+D]-E)+a.damping*w[D]}for(var R=0;R<s;R++){for(var F=0,_=0;_<s;_++)w[_]=v[_*s+R],x[_]=Math.max(0,h[_*s+R]),F+=x[_];F-=x[R],x[R]=h[R*s+R],F+=x[R];for(var H=0;H<s;H++)v[H*s+R]=(1-a.damping)*Math.min(0,F-x[H])+a.damping*w[H];v[R*s+R]=(1-a.damping)*(F-x[R])+a.damping*w[R]}for(var k=0,G=0;G<s;G++){var q=v[G*s+G]+h[G*s+G]>0?1:0;S[M%a.minIterations*s+G]=q,k+=q}if(k>0&&(M>=a.minIterations-1||M==a.maxIterations-1)){for(var $=0,z=0;z<s;z++){L[z]=0;for(var V=0;V<a.minIterations;V++)L[z]+=S[V*s+z];(L[z]===0||L[z]===a.minIterations)&&$++}if($===s)break}}for(var B=K0(s,h,v),Y=Z0(s,u,B),W={},J=0;J<B.length;J++)W[B[J]]=[];for(var le=0;le<n.length;le++){var pe=o[n[le].id()],Oe=Y[pe];Oe!=null&&W[Oe].push(n[le])}for(var Q=new Array(B.length),oe=0;oe<B.length;oe++)Q[oe]=r.collection(W[B[oe]]);return Q},Q0={affinityPropagation:ks,ap:ks},J0=bt({root:void 0,directed:!1}),j0={hierholzer:function(e){if(!Ue(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=J0(e),a=n.root,o=n.directed,i=this,s=!1,l,u,f;a&&(f=Re(a)?this.filter(a)[0].id():a[0].id());var h={},v={};o?i.forEach(function(y){var w=y.id();if(y.isNode()){var x=y.indegree(!0),L=y.outdegree(!0),A=x-L,S=L-x;A==1?l?s=!0:l=w:S==1?u?s=!0:u=w:(S>1||A>1)&&(s=!0),h[w]=[],y.outgoers().forEach(function(N){N.isEdge()&&h[w].push(N.id())})}else v[w]=[void 0,y.target().id()]}):i.forEach(function(y){var w=y.id();if(y.isNode()){var x=y.degree(!0);x%2&&(l?u?s=!0:u=w:l=w),h[w]=[],y.connectedEdges().forEach(function(L){return h[w].push(L.id())})}else v[w]=[y.source().id(),y.target().id()]});var c={found:!1,trail:void 0};if(s)return c;if(u&&l)if(o){if(f&&u!=f)return c;f=u}else{if(f&&u!=f&&l!=f)return c;f||(f=u)}else f||(f=i[0].id());var d=function(w){for(var x=w,L=[w],A,S,N;h[x].length;)A=h[x].shift(),S=v[A][0],N=v[A][1],x!=N?(h[N]=h[N].filter(function(M){return M!=A}),x=N):!o&&x!=S&&(h[S]=h[S].filter(function(M){return M!=A}),x=S),L.unshift(A),L.unshift(x);return L},g=[],m=[];for(m=d(f);m.length!=1;)h[m[0]].length==0?(g.unshift(i.getElementById(m.shift())),g.unshift(i.getElementById(m.shift()))):m=d(m.shift()).concat(m);g.unshift(i.getElementById(m.shift()));for(var p in h)if(h[p].length)return c;return c.found=!0,c.trail=this.spawn(g,!0),c}},Sa=function(){var e=this,r={},n=0,a=0,o=[],i=[],s={},l=function(v,c){for(var d=i.length-1,g=[],m=e.spawn();i[d].x!=v||i[d].y!=c;)g.push(i.pop().edge),d--;g.push(i.pop().edge),g.forEach(function(p){var y=p.connectedNodes().intersection(e);m.merge(p),y.forEach(function(w){var x=w.id(),L=w.connectedEdges().intersection(e);m.merge(w),r[x].cutVertex?m.merge(L.filter(function(A){return A.isLoop()})):m.merge(L)})}),o.push(m)},u=function h(v,c,d){v===d&&(a+=1),r[c]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(c).connectedEdges().intersection(e);if(g.size()===0)o.push(e.spawn(e.getElementById(c)));else{var m,p,y,w;g.forEach(function(x){m=x.source().id(),p=x.target().id(),y=m===c?p:m,y!==d&&(w=x.id(),s[w]||(s[w]=!0,i.push({x:c,y,edge:x})),y in r?r[c].low=Math.min(r[c].low,r[y].id):(h(v,y,c),r[c].low=Math.min(r[c].low,r[y].low),r[c].id<=r[y].low&&(r[c].cutVertex=!0,l(c,y))))})}};e.forEach(function(h){if(h.isNode()){var v=h.id();v in r||(a=0,u(v,v),r[v].cutVertex=a>1)}});var f=Object.keys(r).filter(function(h){return r[h].cutVertex}).map(function(h){return e.getElementById(h)});return{cut:e.spawn(f),components:o}},ew={hopcroftTarjanBiconnected:Sa,htbc:Sa,htb:Sa,hopcroftTarjanBiconnectedComponents:Sa},Da=function(){var e=this,r={},n=0,a=[],o=[],i=e.spawn(e),s=function l(u){o.push(u),r[u]={index:n,low:n++,explored:!1};var f=e.getElementById(u).connectedEdges().intersection(e);if(f.forEach(function(g){var m=g.target().id();m!==u&&(m in r||l(m),r[m].explored||(r[u].low=Math.min(r[u].low,r[m].low)))}),r[u].index===r[u].low){for(var h=e.spawn();;){var v=o.pop();if(h.merge(e.getElementById(v)),r[v].low=r[u].index,r[v].explored=!0,v===u)break}var c=h.edgesWith(h),d=h.merge(c);a.push(d),i=i.difference(d)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in r||s(u)}}),{cut:i,components:a}},tw={tarjanStronglyConnected:Da,tsc:Da,tscc:Da,tarjanStronglyConnectedComponents:Da},$u={};[Xn,Oy,Ry,Py,By,_y,Uy,c0,vn,dn,eo,S0,_0,$0,Q0,j0,ew,tw].forEach(function(t){Fe($u,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Yu=0,qu=1,Wu=2,lr=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=Yu,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};lr.prototype={fulfill:function(e){return _s(this,qu,"fulfillValue",e)},reject:function(e){return _s(this,Wu,"rejectReason",e)},then:function(e,r){var n=this,a=new lr;return n.onFulfilled.push(Gs(e,a,"fulfill")),n.onRejected.push(Gs(r,a,"reject")),Xu(n),a.proxy}};var _s=function(e,r,n,a){return e.state===Yu&&(e.state=r,e[n]=a,Xu(e)),e},Xu=function(e){e.state===qu?zs(e,"onFulfilled",e.fulfillValue):e.state===Wu&&zs(e,"onRejected",e.rejectReason)},zs=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var o=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},Gs=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var o;try{o=e(a)}catch(i){r.reject(i);return}rw(r,o)}}},rw=function t(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(vt(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(o){e.reject(o);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(o){a||(a=!0,o===r?e.reject(new TypeError("circular thenable chain")):t(e,o))},function(o){a||(a=!0,e.reject(o))})}catch(o){a||e.reject(o)}return}e.fulfill(r)};lr.all=function(t){return new lr(function(e,r){for(var n=new Array(t.length),a=0,o=function(l,u){n[l]=u,a++,a===t.length&&e(n)},i=0;i<t.length;i++)(function(s){var l=t[s],u=l!=null&&l.then!=null;if(u)l.then(function(h){o(s,h)},function(h){r(h)});else{var f=l;o(s,f)}})(i)})};lr.resolve=function(t){return new lr(function(e,r){e(t)})};lr.reject=function(t){return new lr(function(e,r){r(t)})};var Sn=typeof Promise<"u"?Promise:lr,to=function(e,r,n){var a=So(e),o=!a,i=this._private=Fe({duration:1e3},r,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&at(i.complete)&&i.completes.push(i.complete),o){var s=e.position();i.startPosition=i.startPosition||{x:s.x,y:s.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(a){var l=e.pan();i.startPan={x:l.x,y:l.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},$r=to.prototype;Fe($r,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Ft(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,f){var h=e[u];h!=null&&(e[u]=e[f],e[f]=h)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var o=e.style[a],i=o.name,s=e.startStyle[i];e.startStyle[i]=o,e.style[a]=s}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new Sn(function(a,o){n.push(function(){a()})})}});$r.complete=$r.completed;$r.run=$r.play;$r.running=$r.playing;var nw={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return!1;var i=a[0];if(i)return i._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var i=0;i<a.length;i++){var s=a[i];s._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,o=a.length!==void 0,i=o?a:[a],s=this._private.cy||this,l=!o,u=!l;if(!s.styleEnabled())return this;var f=s.style();r=Fe({},r,n);var h=Object.keys(r).length===0;if(h)return new to(i[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(u&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),u&&r.renderedPosition!=null){var v=r.renderedPosition,c=s.pan(),d=s.zoom();r.position=Ru(v,d,c)}if(l&&r.panBy!=null){var g=r.panBy,m=s.pan();r.pan={x:m.x+g.x,y:m.y+g.y}}var p=r.center||r.centre;if(l&&p!=null){var y=s.getCenterPan(p.eles,r.zoom);y!=null&&(r.pan=y)}if(l&&r.fit!=null){var w=r.fit,x=s.getFitViewport(w.eles||w.boundingBox,w.padding);x!=null&&(r.pan=x.pan,r.zoom=x.zoom)}if(l&&Ue(r.zoom)){var L=s.getZoomedViewport(r.zoom);L!=null?(L.zoomed&&(r.zoom=L.zoom),L.panned&&(r.pan=L.pan)):r.zoom=null}return new to(i[0],r)}},animate:function(){return function(r,n){var a=this,o=a.length!==void 0,i=o?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(r=Fe({},r,n));for(var l=0;l<i.length;l++){var u=i[l],f=u.animated()&&(r.queue===void 0||r.queue),h=u.animation(r,f?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(r,n){var a=this,o=a.length!==void 0,i=o?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<i.length;l++){for(var u=i[l],f=u._private,h=f.animation.current,v=0;v<h.length;v++){var c=h[v],d=c._private;n&&(d.duration=0)}r&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},aw={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,o){},onSet:function(a){},canSet:function(a){return!0}};return e=Fe({},r,e),function(a,o){var i=e,s=this,l=s.length!==void 0,u=l?s:[s],f=l?s[0]:s;if(Re(a)){var h=a.indexOf(".")!==-1,v=h&&Hm.default(a);if(i.allowGetting&&o===void 0){var c;return f&&(i.beforeGet(f),v&&f._private[i.field][a]===void 0?c=Um.default(f._private[i.field],v):c=f._private[i.field][a]),c}else if(i.allowSetting&&o!==void 0){var d=!i.immutableKeys[a];if(d){var g=pu({},a,o);i.beforeSet(s,g);for(var m=0,p=u.length;m<p;m++){var y=u[m];i.canSet(y)&&(v&&f._private[i.field][a]===void 0?Vm.default(y._private[i.field],v,o):y._private[i.field][a]=o)}i.updateStyle&&s.updateStyle(),i.onSet(s),i.settingTriggersEvent&&s[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&Ue(a)){var w=a,x,L,A=Object.keys(w);i.beforeSet(s,w);for(var S=0;S<A.length;S++){x=A[S],L=w[x];var N=!i.immutableKeys[x];if(N)for(var M=0;M<u.length;M++){var b=u[M];i.canSet(b)&&(b._private[i.field][x]=L)}}i.updateStyle&&s.updateStyle(),i.onSet(s),i.settingTriggersEvent&&s[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&at(a)){var T=a;s.on(i.bindingEvent,T)}else if(i.allowGetting&&a===void 0){var E;return f&&(i.beforeGet(f),E=f._private[i.field]),E}return s}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Fe({},r,e),function(a){var o=e,i=this,s=i.length!==void 0,l=s?i:[i];if(Re(a)){for(var u=a.split(/\s+/),f=u.length,h=0;h<f;h++){var v=u[h];if(!Nr(v)){var c=!o.immutableKeys[v];if(c)for(var d=0,g=l.length;d<g;d++)l[d]._private[o.field][v]=void 0}}o.triggerEvent&&i[o.triggerFnName](o.event)}else if(a===void 0){for(var m=0,p=l.length;m<p;m++)for(var y=l[m]._private[o.field],w=Object.keys(y),x=0;x<w.length;x++){var L=w[x],A=!o.immutableKeys[L];A&&(y[L]=void 0)}o.triggerEvent&&i[o.triggerFnName](o.event)}return i}}},iw={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var o=this,i=Array.prototype.slice.call(arguments,0);return new Sn(function(s,l){var u=function(c){o.off.apply(o,h),s(c)},f=i.concat([u]),h=f.concat([]);o.on.apply(o,f)})}}},qe={};[nw,aw,iw].forEach(function(t){Fe(qe,t)});var ow={animate:qe.animate(),animation:qe.animation(),animated:qe.animated(),clearQueue:qe.clearQueue(),delay:qe.delay(),delayAnimation:qe.delayAnimation(),stop:qe.stop()},Fa={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(d){return n.push(d)}),n}else Qe(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],o=new Cn(e),i=0;i<r.length;i++){for(var s=r[i],l=s._private,u=l.classes,f=!1,h=0;h<e.length;h++){var v=e[h],c=u.has(v);if(!c){f=!0;break}}f||(f=u.size!==e.length),f&&(l.classes=o,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){Qe(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,o=[],i=0,s=n.length;i<s;i++)for(var l=n[i],u=l._private.classes,f=!1,h=0;h<e.length;h++){var v=e[h],c=u.has(v),d=!1;r||a&&!c?(u.add(v),d=!0):(!r||a&&c)&&(u.delete(v),d=!0),!f&&d&&(o.push(l),f=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Fa.className=Fa.classNames=Fa.classes;var Ge={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:ct,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ge.variable="(?:[\\w-.]|(?:\\\\"+Ge.metaChar+"))+";Ge.className="(?:[\\w-]|(?:\\\\"+Ge.metaChar+"))+";Ge.value=Ge.string+"|"+Ge.number;Ge.id=Ge.variable;(function(){var t,e,r;for(t=Ge.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Ge.comparatorOp+="|@"+e;for(t=Ge.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Ge.comparatorOp+="|\\!"+e)})();var Ze=function(){return{checks:[]}},Ne={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ro=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return fy(t.selector,e.selector)}),sw=function(){for(var t={},e,r=0;r<ro.length;r++)e=ro[r],t[e.selector]=e.matches;return t}(),lw=function(e,r){return sw[e](r)},uw="("+ro.map(function(t){return t.selector}).join("|")+")",tn=function(e){return e.replace(new RegExp("\\\\("+Ge.metaChar+")","g"),function(r,n){return n})},yr=function(e,r,n){e[e.length-1]=n},no=[{name:"group",query:!0,regex:"("+Ge.group+")",populate:function(e,r,n){var a=rr(n,1),o=a[0];r.checks.push({type:Ne.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:uw,populate:function(e,r,n){var a=rr(n,1),o=a[0];r.checks.push({type:Ne.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+Ge.id+")",populate:function(e,r,n){var a=rr(n,1),o=a[0];r.checks.push({type:Ne.ID,value:tn(o)})}},{name:"className",query:!0,regex:"\\.("+Ge.className+")",populate:function(e,r,n){var a=rr(n,1),o=a[0];r.checks.push({type:Ne.CLASS,value:tn(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ge.variable+")\\s*\\]",populate:function(e,r,n){var a=rr(n,1),o=a[0];r.checks.push({type:Ne.DATA_EXIST,field:tn(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ge.variable+")\\s*("+Ge.comparatorOp+")\\s*("+Ge.value+")\\s*\\]",populate:function(e,r,n){var a=rr(n,3),o=a[0],i=a[1],s=a[2],l=new RegExp("^"+Ge.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),r.checks.push({type:Ne.DATA_COMPARE,field:tn(o),operator:i,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ge.boolOp+")\\s*("+Ge.variable+")\\s*\\]",populate:function(e,r,n){var a=rr(n,2),o=a[0],i=a[1];r.checks.push({type:Ne.DATA_BOOL,field:tn(i),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ge.meta+")\\s*("+Ge.comparatorOp+")\\s*("+Ge.number+")\\s*\\]\\]",populate:function(e,r,n){var a=rr(n,3),o=a[0],i=a[1],s=a[2];r.checks.push({type:Ne.META_COMPARE,field:tn(o),operator:i,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ge.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,o=e.compoundCount,i=e[e.length-1];n!=null&&(i.subject=n,e.currentSubject=null),i.edgeCount=a,i.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Ze();return s}},{name:"directedEdge",separator:!0,regex:Ge.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=r,o=Ze();return n.checks.push({type:Ne.DIRECTED_EDGE,source:a,target:o}),yr(e,r,n),e.edgeCount++,o}else{var i=Ze(),s=r,l=Ze();return i.checks.push({type:Ne.NODE_SOURCE,source:s,target:l}),yr(e,r,i),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Ge.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=r,o=Ze();return n.checks.push({type:Ne.UNDIRECTED_EDGE,nodes:[a,o]}),yr(e,r,n),e.edgeCount++,o}else{var i=Ze(),s=r,l=Ze();return i.checks.push({type:Ne.NODE_NEIGHBOR,node:s,neighbor:l}),yr(e,r,i),l}}},{name:"child",separator:!0,regex:Ge.child,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=Ze(),o=e[e.length-1];return n.checks.push({type:Ne.CHILD,parent:o,child:a}),yr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var i=Ze(),s=e[e.length-1],l=Ze(),u=Ze(),f=Ze(),h=Ze();return i.checks.push({type:Ne.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:Ne.TRUE}],h.checks.push({type:Ne.TRUE}),l.checks.push({type:Ne.PARENT,parent:h,child:f}),yr(e,s,i),e.currentSubject=u,e.compoundCount++,f}else{var v=Ze(),c=Ze(),d=[{type:Ne.PARENT,parent:v,child:c}];return v.checks=r.checks,r.checks=d,e.compoundCount++,c}}},{name:"descendant",separator:!0,regex:Ge.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ze(),a=Ze(),o=e[e.length-1];return n.checks.push({type:Ne.DESCENDANT,ancestor:o,descendant:a}),yr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var i=Ze(),s=e[e.length-1],l=Ze(),u=Ze(),f=Ze(),h=Ze();return i.checks.push({type:Ne.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=r.checks,r.checks=[{type:Ne.TRUE}],h.checks.push({type:Ne.TRUE}),l.checks.push({type:Ne.ANCESTOR,ancestor:h,descendant:f}),yr(e,s,i),e.currentSubject=u,e.compoundCount++,f}else{var v=Ze(),c=Ze(),d=[{type:Ne.ANCESTOR,ancestor:v,descendant:c}];return v.checks=r.checks,r.checks=d,e.compoundCount++,c}}},{name:"subject",modifier:!0,regex:Ge.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return We("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],o=a==null?null:a.type;o===Ne.DIRECTED_EDGE?a.type=Ne.NODE_TARGET:o===Ne.UNDIRECTED_EDGE&&(a.type=Ne.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];no.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var fw=function(e){for(var r,n,a,o=0;o<no.length;o++){var i=no[o],s=i.name,l=e.match(i.regexObj);if(l!=null){n=l,r=i,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:r,match:n,name:a,remaining:e}},hw=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},cw=function(e){var r=this,n=r.inputText=e,a=r[0]=Ze();for(r.length=1,n=hw(n);;){var o=fw(n);if(o.expr==null)return We("The selector `"+e+"`is invalid"),!1;var i=o.match.slice(1),s=o.expr.populate(r,a,i);if(s===!1)return!1;if(s!=null&&(a=s),n=o.remaining,n.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var u=0;u<r.length;u++){var f=r[u];if(f.compoundCount>0&&f.edgeCount>0)return We("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return We("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&We("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},vw=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f==null?"":f},r=function(f){return Re(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,h){var v=f.type,c=f.value;switch(v){case Ne.GROUP:{var d=e(c);return d.substring(0,d.length-1)}case Ne.DATA_COMPARE:{var g=f.field,m=f.operator;return"["+g+n(e(m))+r(c)+"]"}case Ne.DATA_BOOL:{var p=f.operator,y=f.field;return"["+e(p)+y+"]"}case Ne.DATA_EXIST:{var w=f.field;return"["+w+"]"}case Ne.META_COMPARE:{var x=f.operator,L=f.field;return"[["+L+n(e(x))+r(c)+"]]"}case Ne.STATE:return c;case Ne.ID:return"#"+c;case Ne.CLASS:return"."+c;case Ne.PARENT:case Ne.CHILD:return o(f.parent,h)+n(">")+o(f.child,h);case Ne.ANCESTOR:case Ne.DESCENDANT:return o(f.ancestor,h)+" "+o(f.descendant,h);case Ne.COMPOUND_SPLIT:{var A=o(f.left,h),S=o(f.subject,h),N=o(f.right,h);return A+(A.length>0?" ":"")+S+N}case Ne.TRUE:return""}},o=function(f,h){return f.checks.reduce(function(v,c,d){return v+(h===f&&d===0?"$":"")+a(c,h)},"")},i="",s=0;s<this.length;s++){var l=this[s];i+=o(l,l.subject),this.length>1&&s<this.length-1&&(i+=", ")}return this.toStringCache=i,i},dw={parse:cw,toString:vw},Ku=function(e,r,n){var a,o=Re(e),i=we(e),s=Re(n),l,u,f=!1,h=!1,v=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),h=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(o||s||f)&&(l=!o&&!i?"":""+e,u=""+n),f&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),r){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":v=!0,a=e>n;break;case">=":v=!0,a=e>=n;break;case"<":v=!0,a=e<n;break;case"<=":v=!0,a=e<=n;break;default:a=!1;break}return h&&(e!=null||!v)&&(a=!a),a},gw=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},pw=function(e){return e!==void 0},Po=function(e,r){return e.data(r)},mw=function(e,r){return e[r]()},st=[],tt=function(e,r){return e.checks.every(function(n){return st[n.type](n,r)})};st[Ne.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};st[Ne.STATE]=function(t,e){var r=t.value;return lw(r,e)};st[Ne.ID]=function(t,e){var r=t.value;return e.id()===r};st[Ne.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};st[Ne.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Ku(mw(e,r),n,a)};st[Ne.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Ku(Po(e,r),n,a)};st[Ne.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return gw(Po(e,r),n)};st[Ne.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,pw(Po(e,r))};st[Ne.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),o=e.target();return tt(r,a)&&tt(n,o)||tt(n,a)&&tt(r,o)};st[Ne.NODE_NEIGHBOR]=function(t,e){return tt(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&tt(t.neighbor,r)})};st[Ne.DIRECTED_EDGE]=function(t,e){return tt(t.source,e.source())&&tt(t.target,e.target())};st[Ne.NODE_SOURCE]=function(t,e){return tt(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&tt(t.target,r)})};st[Ne.NODE_TARGET]=function(t,e){return tt(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&tt(t.source,r)})};st[Ne.CHILD]=function(t,e){return tt(t.child,e)&&tt(t.parent,e.parent())};st[Ne.PARENT]=function(t,e){return tt(t.parent,e)&&e.children().some(function(r){return tt(t.child,r)})};st[Ne.DESCENDANT]=function(t,e){return tt(t.descendant,e)&&e.ancestors().some(function(r){return tt(t.ancestor,r)})};st[Ne.ANCESTOR]=function(t,e){return tt(t.ancestor,e)&&e.descendants().some(function(r){return tt(t.descendant,r)})};st[Ne.COMPOUND_SPLIT]=function(t,e){return tt(t.subject,e)&&tt(t.left,e)&&tt(t.right,e)};st[Ne.TRUE]=function(){return!0};st[Ne.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};st[Ne.FILTER]=function(t,e){var r=t.value;return r(e)};var yw=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Ne.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(o){for(var i=0;i<r.length;i++){var s=r[i];if(tt(s,o))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},ww=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(tt(a,e))return!0}return!1},bw={matches:ww,filter:yw},Ar=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Re(e)&&e.match(/^\s*$/)||(Ft(e)?this.addQuery({checks:[{type:Ne.COLLECTION,value:e.collection()}]}):at(e)?this.addQuery({checks:[{type:Ne.FILTER,value:e}]}):Re(e)?this.parse(e)||(this.invalid=!0):it("A selector must be created from a string; found "))},Or=Ar.prototype;[dw,bw].forEach(function(t){return Fe(Or,t)});Or.text=function(){return this.inputText};Or.size=function(){return this.length};Or.eq=function(t){return this[t]};Or.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Or.addQuery=function(t){this[this.length++]=t};Or.selector=Or.toString;var Dr={allAre:function(e){var r=new Ar(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Ar(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Dr.allAreNeighbours=Dr.allAreNeighbors;Dr.has=Dr.contains;Dr.equal=Dr.equals=Dr.same;var Ut=function(e,r){return function(a,o,i,s){var l=a,u=this,f;if(l==null?f="":Ft(l)&&l.length===1&&(f=l.id()),u.length===1&&f){var h=u[0]._private,v=h.traversalCache=h.traversalCache||{},c=v[r]=v[r]||[],d=Vr(f),g=c[d];return g||(c[d]=e.call(u,a,o,i,s))}else return e.call(u,a,o,i,s)}},wn={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var o=this[a],i=o._private.parent;i&&r.push(i)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var o=n[a];r.push(o)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],o=a.parents();r=r||o,r=r.intersect(o)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Ut(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,o=0;o<a.length;o++)e.push(a[o]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var o=0;o<a.length;o++){var i=a[o];r.push(i),i.children().nonempty()&&n(i.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Fo(t,e,r,n){for(var a=[],o=new Cn,i=t.cy(),s=i.hasCompoundNodes(),l=0;l<t.length;l++){var u=t[l];r?a.push(u):s&&n(a,o,u)}for(;a.length>0;){var f=a.shift();e(f),o.add(f.id()),s&&n(a,o,f)}return t}function Zu(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var o=n[a];e.has(o.id())||t.push(o)}}wn.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Fo(this,t,e,Zu)};function Qu(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}wn.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Fo(this,t,e,Qu)};function Ew(t,e,r){Qu(t,e,r),Zu(t,e,r)}wn.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Fo(this,t,e,Ew)};wn.ancestors=wn.parents;var Qn,Ju;Qn=Ju={data:qe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:qe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:qe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:qe.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:qe.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Qn.attr=Qn.data;Qn.removeAttr=Qn.removeData;var xw=Ju,pi={};function Gi(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],o=a._private.edges,i=0;i<o.length;i++){var s=o[i];!e&&s.isLoop()||(n+=t(a,s))}return n}else return}}Fe(pi,{degree:Gi(function(t,e){return e.source().same(e.target())?2:1}),indegree:Gi(function(t,e){return e.target().same(t)?1:0}),outdegree:Gi(function(t,e){return e.source().same(t)?1:0})});function rn(t,e){return function(r){for(var n,a=this.nodes(),o=0;o<a.length;o++){var i=a[o],s=i[t](r);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Fe(pi,{minDegree:rn("degree",function(t,e){return t<e}),maxDegree:rn("degree",function(t,e){return t>e}),minIndegree:rn("indegree",function(t,e){return t<e}),maxIndegree:rn("indegree",function(t,e){return t>e}),minOutdegree:rn("outdegree",function(t,e){return t<e}),maxOutdegree:rn("outdegree",function(t,e){return t>e})});Fe(pi,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Yt,ju,ef=function(e,r,n){for(var a=0;a<e.length;a++){var o=e[a];if(!o.locked()){var i=o._private.position,s={x:r.x!=null?r.x-i.x:0,y:r.y!=null?r.y-i.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,n),o.dirtyBoundingBoxCache()}}},Us={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){ef(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Yt=ju={position:qe.data(Us),silentPosition:qe.data(Fe({},Us,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){ef(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Ue(e))r?this.silentPosition(e):this.position(e);else if(at(e)){var n=e,a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var i=this[o],s=void 0;(s=n(i,o))&&(r?i.silentPosition(s):i.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Ue(e)?(a={x:we(e.x)?e.x:0,y:we(e.y)?e.y:0},n=r):Re(e)&&we(r)&&(a={x:0,y:0},a[e]=r),a!=null){var o=this.cy();o.startBatch();for(var i=0;i<this.length;i++){var s=this[i];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}o.endBatch()}return this},silentShift:function(e,r){return Ue(e)?this.shift(e,!0):Re(e)&&we(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),o=a.zoom(),i=a.pan(),s=Ue(e)?e:void 0,l=s!==void 0||r!==void 0&&Re(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var f=this[u];r!==void 0?f.position(e,(r-i[e])/o):s!==void 0&&f.position(Ru(s,o,i))}else{var h=n.position();return s=di(h,o,i),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),o=Ue(e)?e:void 0,i=o!==void 0||r!==void 0&&Re(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(i)for(var l=0;l<this.length;l++){var u=this[l],f=s?u.parent():null,h=f&&f.length>0,v=h;h&&(f=f[0]);var c=v?f.position():{x:0,y:0};r!==void 0?u.position(e,r+c[e]):o!==void 0&&u.position({x:o.x+c.x,y:o.y+c.y})}else{var d=n.position(),g=s?n.parent():null,m=g&&g.length>0,p=m;m&&(g=g[0]);var y=p?g.position():{x:0,y:0};return o={x:d.x-y.x,y:d.y-y.y},e===void 0?o:o[e]}else if(!i)return;return this}};Yt.modelPosition=Yt.point=Yt.position;Yt.modelPositions=Yt.points=Yt.positions;Yt.renderedPoint=Yt.renderedPosition;Yt.relativePoint=Yt.relativePosition;var Tw=ju,gn,Ir;gn=Ir={};Ir.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),o=e.x1*n+a.x,i=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:o,x2:i,y1:s,y2:l,w:i-o,h:l-s}};Ir.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};Ir.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(i){if(!i.isParent())return;var s=i._private,l=i.children(),u=i.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:i.pstyle("min-width").pfValue,left:i.pstyle("min-width-bias-left"),right:i.pstyle("min-width-bias-right")},height:{val:i.pstyle("min-height").pfValue,top:i.pstyle("min-height-bias-top"),bottom:i.pstyle("min-height-bias-bottom")}},h=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),v=s.position;(h.w===0||h.h===0)&&(h={w:i.pstyle("width").pfValue,h:i.pstyle("height").pfValue},h.x1=v.x-h.w/2,h.x2=v.x+h.w/2,h.y1=v.y-h.h/2,h.y2=v.y+h.h/2);function c(M,b,T){var E=0,D=0,C=b+T;return M>0&&C>0&&(E=b/C*M,D=T/C*M),{biasDiff:E,biasComplementDiff:D}}function d(M,b,T,E){if(T.units==="%")switch(E){case"width":return M>0?T.pfValue*M:0;case"height":return b>0?T.pfValue*b:0;case"average":return M>0&&b>0?T.pfValue*(M+b)/2:0;case"min":return M>0&&b>0?M>b?T.pfValue*b:T.pfValue*M:0;case"max":return M>0&&b>0?M>b?T.pfValue*M:T.pfValue*b:0;default:return 0}else return T.units==="px"?T.pfValue:0}var g=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(g=g*100/f.width.val);var m=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(m=m*100/f.width.val);var p=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(p=p*100/f.height.val);var y=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(y=y*100/f.height.val);var w=c(f.width.val-h.w,g,m),x=w.biasDiff,L=w.biasComplementDiff,A=c(f.height.val-h.h,p,y),S=A.biasDiff,N=A.biasComplementDiff;s.autoPadding=d(h.w,h.h,i.pstyle("padding"),i.pstyle("padding-relative-to").value),s.autoWidth=Math.max(h.w,f.width.val),v.x=(-x+h.x1+h.x2+L)/2,s.autoHeight=Math.max(h.h,f.height.val),v.y=(-S+h.y1+h.y2+N)/2}for(var n=0;n<this.length;n++){var a=this[n],o=a._private;(!o.compoundBoundsClean||t)&&(r(a),e.batching()||(o.compoundBoundsClean=!0))}return this};var Gt=function(e){return e===1/0||e===-1/0?0:e},Ht=function(e,r,n,a,o){a-r===0||o-n===0||r==null||n==null||a==null||o==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},kr=function(e,r){return r==null?e:Ht(e,r.x1,r.y1,r.x2,r.y2)},Pn=function(e,r,n){return $t(e,r,n)},La=function(e,r,n){if(!r.cy().headless()){var a=r._private,o=a.rstyle,i=o.arrowWidth/2,s=r.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=o.srcX,u=o.srcY):n==="target"?(l=o.tgtX,u=o.tgtY):(l=o.midX,u=o.midY);var f=a.arrowBounds=a.arrowBounds||{},h=f[n]=f[n]||{};h.x1=l-i,h.y1=u-i,h.x2=l+i,h.y2=u+i,h.w=h.x2-h.x1,h.h=h.y2-h.y1,Pa(h,1),Ht(e,h.x1,h.y1,h.x2,h.y2)}}},Ui=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var o=r._private,i=o.rstyle,s=r.pstyle(a+"label").strValue;if(s){var l=r.pstyle("text-halign"),u=r.pstyle("text-valign"),f=Pn(i,"labelWidth",n),h=Pn(i,"labelHeight",n),v=Pn(i,"labelX",n),c=Pn(i,"labelY",n),d=r.pstyle(a+"text-margin-x").pfValue,g=r.pstyle(a+"text-margin-y").pfValue,m=r.isEdge(),p=r.pstyle(a+"text-rotation"),y=r.pstyle("text-outline-width").pfValue,w=r.pstyle("text-border-width").pfValue,x=w/2,L=r.pstyle("text-background-padding").pfValue,A=2,S=h,N=f,M=N/2,b=S/2,T,E,D,C;if(m)T=v-M,E=v+M,D=c-b,C=c+b;else{switch(l.value){case"left":T=v-N,E=v;break;case"center":T=v-M,E=v+M;break;case"right":T=v,E=v+N;break}switch(u.value){case"top":D=c-S,C=c;break;case"center":D=c-b,C=c+b;break;case"bottom":D=c,C=c+S;break}}T+=d-Math.max(y,x)-L-A,E+=d+Math.max(y,x)+L+A,D+=g-Math.max(y,x)-L-A,C+=g+Math.max(y,x)+L+A;var P=n||"main",I=o.labelBounds,R=I[P]=I[P]||{};R.x1=T,R.y1=D,R.x2=E,R.y2=C,R.w=E-T,R.h=C-D;var F=m&&p.strValue==="autorotate",_=p.pfValue!=null&&p.pfValue!==0;if(F||_){var H=F?Pn(o.rstyle,"labelAngle",n):p.pfValue,k=Math.cos(H),G=Math.sin(H),q=(T+E)/2,$=(D+C)/2;if(!m){switch(l.value){case"left":q=E;break;case"right":q=T;break}switch(u.value){case"top":$=C;break;case"bottom":$=D;break}}var z=function(Oe,Q){return Oe=Oe-q,Q=Q-$,{x:Oe*k-Q*G+q,y:Oe*G+Q*k+$}},V=z(T,D),B=z(T,C),Y=z(E,D),W=z(E,C);T=Math.min(V.x,B.x,Y.x,W.x),E=Math.max(V.x,B.x,Y.x,W.x),D=Math.min(V.y,B.y,Y.y,W.y),C=Math.max(V.y,B.y,Y.y,W.y)}var J=P+"Rot",le=I[J]=I[J]||{};le.x1=T,le.y1=D,le.x2=E,le.y2=C,le.w=E-T,le.h=C-D,Ht(e,T,D,E,C),Ht(o.labelBounds.all,T,D,E,C)}return e}},Cw=function(e,r){var n=e._private.cy,a=n.styleEnabled(),o=n.headless(),i=It(),s=e._private,l=e.isNode(),u=e.isEdge(),f,h,v,c,d,g,m=s.rstyle,p=l&&a?e.pstyle("bounds-expansion").pfValue:[0],y=function(be){return be.pstyle("display").value!=="none"},w=!a||y(e)&&(!u||y(e.source())&&y(e.target()));if(w){var x=0,L=0;a&&r.includeOverlays&&(x=e.pstyle("overlay-opacity").value,x!==0&&(L=e.pstyle("overlay-padding").value));var A=0,S=0;a&&r.includeUnderlays&&(A=e.pstyle("underlay-opacity").value,A!==0&&(S=e.pstyle("underlay-padding").value));var N=Math.max(L,S),M=0,b=0;if(a&&(M=e.pstyle("width").pfValue,b=M/2),l&&r.includeNodes){var T=e.position();d=T.x,g=T.y;var E=e.outerWidth(),D=E/2,C=e.outerHeight(),P=C/2;f=d-D,h=d+D,v=g-P,c=g+P,Ht(i,f,v,h,c)}else if(u&&r.includeEdges)if(a&&!o){var I=e.pstyle("curve-style").strValue;if(f=Math.min(m.srcX,m.midX,m.tgtX),h=Math.max(m.srcX,m.midX,m.tgtX),v=Math.min(m.srcY,m.midY,m.tgtY),c=Math.max(m.srcY,m.midY,m.tgtY),f-=b,h+=b,v-=b,c+=b,Ht(i,f,v,h,c),I==="haystack"){var R=m.haystackPts;if(R&&R.length===2){if(f=R[0].x,v=R[0].y,h=R[1].x,c=R[1].y,f>h){var F=f;f=h,h=F}if(v>c){var _=v;v=c,c=_}Ht(i,f-b,v-b,h+b,c+b)}}else if(I==="bezier"||I==="unbundled-bezier"||I==="segments"||I==="taxi"){var H;switch(I){case"bezier":case"unbundled-bezier":H=m.bezierPts;break;case"segments":case"taxi":H=m.linePts;break}if(H!=null)for(var k=0;k<H.length;k++){var G=H[k];f=G.x-b,h=G.x+b,v=G.y-b,c=G.y+b,Ht(i,f,v,h,c)}}}else{var q=e.source(),$=q.position(),z=e.target(),V=z.position();if(f=$.x,h=V.x,v=$.y,c=V.y,f>h){var B=f;f=h,h=B}if(v>c){var Y=v;v=c,c=Y}f-=b,h+=b,v-=b,c+=b,Ht(i,f,v,h,c)}if(a&&r.includeEdges&&u&&(La(i,e,"mid-source"),La(i,e,"mid-target"),La(i,e,"source"),La(i,e,"target")),a){var W=e.pstyle("ghost").value==="yes";if(W){var J=e.pstyle("ghost-offset-x").pfValue,le=e.pstyle("ghost-offset-y").pfValue;Ht(i,i.x1+J,i.y1+le,i.x2+J,i.y2+le)}}var pe=s.bodyBounds=s.bodyBounds||{};Ss(pe,i),ki(pe,p),Pa(pe,1),a&&(f=i.x1,h=i.x2,v=i.y1,c=i.y2,Ht(i,f-N,v-N,h+N,c+N));var Oe=s.overlayBounds=s.overlayBounds||{};Ss(Oe,i),ki(Oe,p),Pa(Oe,1);var Q=s.labelBounds=s.labelBounds||{};Q.all!=null?Qy(Q.all):Q.all=It(),a&&r.includeLabels&&(r.includeMainLabels&&Ui(i,e,null),u&&(r.includeSourceLabels&&Ui(i,e,"source"),r.includeTargetLabels&&Ui(i,e,"target")))}return i.x1=Gt(i.x1),i.y1=Gt(i.y1),i.x2=Gt(i.x2),i.y2=Gt(i.y2),i.w=Gt(i.x2-i.x1),i.h=Gt(i.y2-i.y1),i.w>0&&i.h>0&&w&&(ki(i,p),Pa(i,1)),i},tf=function(e){var r=0,n=function(i){return(i?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a},rf=function(e){if(e.isEdge()){var r=e.source().position(),n=e.target().position(),a=function(i){return Math.round(i)};return wy([a(r.x),a(r.y),a(n.x),a(n.y)])}else return 0},Vs=function(e,r){var n=e._private,a,o=e.isEdge(),i=r==null?Hs:tf(r),s=i===Hs,l=rf(e),u=n.bbCachePosKey===l,f=r.useCache&&u,h=function(g){return g._private.bbCache==null||g._private.styleDirty},v=!f||h(e)||o&&h(e.source())||h(e.target());if(v?(u||e.recalculateRenderedStyle(f),a=Cw(e,Jn),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var c=e.isNode();a=It(),(r.includeNodes&&c||r.includeEdges&&!c)&&(r.includeOverlays?kr(a,n.overlayBounds):kr(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!o||r.includeSourceLabels&&r.includeTargetLabels)?kr(a,n.labelBounds.all):(r.includeMainLabels&&kr(a,n.labelBounds.mainRot),r.includeSourceLabels&&kr(a,n.labelBounds.sourceRot),r.includeTargetLabels&&kr(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Jn={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Hs=tf(Jn),$s=bt(Jn);Ir.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Jn:t=$s(t),e=Vs(this[0],t);else{e=It(),t=t||Jn;var r=$s(t),n=this,a=n.cy(),o=a.styleEnabled();if(o)for(var i=0;i<n.length;i++){var s=n[i],l=s._private,u=rf(s),f=l.bbCachePosKey===u,h=r.useCache&&f&&!l.styleDirty;s.recalculateRenderedStyle(h)}this.updateCompoundBounds(!t.useCache);for(var v=0;v<n.length;v++){var c=n[v];kr(e,Vs(c,r))}}return e.x1=Gt(e.x1),e.y1=Gt(e.y1),e.x2=Gt(e.x2),e.y2=Gt(e.y2),e.w=Gt(e.x2-e.x1),e.h=Gt(e.y2-e.y1),e};Ir.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Ir.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),Ue(t)){var o=t;t=function(){return o}}var i=function(f,h){return f._private.bbAtOldPos=t(f,h)},s=function(f){return f._private.bbAtOldPos};r.startBatch(),e.forEach(i).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=Zy(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),l};gn.boundingbox=gn.bb=gn.boundingBox;gn.renderedBoundingbox=gn.renderedBoundingBox;var Sw=Ir,zn,ha;zn=ha={};var nf=function(e){e.uppercaseName=Es(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Es(e.outerName),zn[e.name]=function(){var n=this[0],a=n._private,o=a.cy,i=o._private.styleEnabled;if(n)if(i){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},zn["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,o=a.cy,i=o._private.styleEnabled;if(n)if(i){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},zn["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},zn["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};nf({name:"width"});nf({name:"height"});ha.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};ha.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};ha.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Dw=ha,Lw=function(e,r){if(e.isEdge())return r(e)},Nw=function(e,r){if(e.isEdge()){var n=e.cy();return di(r(e),n.zoom(),n.pan())}},Mw=function(e,r){if(e.isEdge()){var n=e.cy(),a=n.pan(),o=n.zoom();return r(e).map(function(i){return di(i,o,a)})}},Aw=function(e){return e.renderer().getControlPoints(e)},Ow=function(e){return e.renderer().getSegmentPoints(e)},Rw=function(e){return e.renderer().getSourceEndpoint(e)},Iw=function(e){return e.renderer().getTargetEndpoint(e)},Pw=function(e){return e.renderer().getEdgeMidpoint(e)},Ys={controlPoints:{get:Aw,mult:!0},segmentPoints:{get:Ow,mult:!0},sourceEndpoint:{get:Rw},targetEndpoint:{get:Iw},midpoint:{get:Pw}},Fw=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Bw=Object.keys(Ys).reduce(function(t,e){var r=Ys[e],n=Fw(e);return t[e]=function(){return Lw(this,r.get)},r.mult?t[n]=function(){return Mw(this,r.get)}:t[n]=function(){return Nw(this,r.get)},t},{}),kw=Fe({},Tw,Sw,Dw,Bw);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var af=function(e,r){this.recycle(e,r)};function Fn(){return!1}function Na(){return!0}af.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Fn,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Na:Fn):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:n.x*a+o.x,y:n.y*a+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Na;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Na;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Na,this.stopPropagation()},isDefaultPrevented:Fn,isPropagationStopped:Fn,isImmediatePropagationStopped:Fn};var of=/^([^.]+)(\.(?:[^.]+))?$/,_w=".*",sf={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},qs=Object.keys(sf),zw={};function mi(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zw,e=arguments.length>1?arguments[1]:void 0,r=0;r<qs.length;r++){var n=qs[r];this[n]=t[n]||sf[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Rr=mi.prototype,lf=function(e,r,n,a,o,i,s){at(a)&&(o=a,a=null),s&&(i==null?i=s:i=Fe({},i,s));for(var l=Qe(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var f=l[u];if(!Nr(f)){var h=f.match(of);if(h){var v=h[1],c=h[2]?h[2]:null,d=r(e,f,v,c,a,o,i);if(d===!1)break}}}},Ws=function(e,r){return e.addEventFields(e.context,r),new af(r.type,r)},Gw=function(e,r,n){if(jm(n)){r(e,n);return}else if(Ue(n)){r(e,Ws(e,n));return}for(var a=Qe(n)?n:n.split(/\s+/),o=0;o<a.length;o++){var i=a[o];if(!Nr(i)){var s=i.match(of);if(s){var l=s[1],u=s[2]?s[2]:null,f=Ws(e,{type:l,namespace:u,target:e.context});r(e,f)}}}};Rr.on=Rr.addListener=function(t,e,r,n,a){return lf(this,function(o,i,s,l,u,f,h){at(f)&&o.listeners.push({event:i,callback:f,type:s,namespace:l,qualifier:u,conf:h})},t,e,r,n,a),this};Rr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Rr.removeListener=Rr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=Cy(this.listeners));for(var o=this.listeners,i=function(u){var f=o[u];lf(a,function(h,v,c,d,g,m){if((f.type===c||t==="*")&&(!d&&f.namespace!==".*"||f.namespace===d)&&(!g||h.qualifierCompare(f.qualifier,g))&&(!m||f.callback===m))return o.splice(u,1),!1},t,e,r,n)},s=o.length-1;s>=0;s--)i(s);return this};Rr.removeAllListeners=function(){return this.removeListener("*")};Rr.emit=Rr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,Qe(e)||(e=[e]),Gw(this,function(o,i){r!=null&&(n=[{event:i.event,type:i.type,namespace:i.namespace,callback:r}],a=n.length);for(var s=function(f){var h=n[f];if(h.type===i.type&&(!h.namespace||h.namespace===i.namespace||h.namespace===_w)&&o.eventMatches(o.context,h,i)){var v=[i];e!=null&&Dy(v,e),o.beforeEmit(o.context,h,i),h.conf&&h.conf.one&&(o.listeners=o.listeners.filter(function(g){return g!==h}));var c=o.callbackContext(o.context,h,i),d=h.callback.apply(c,v);o.afterEmit(o.context,h,i),d===!1&&(i.stopPropagation(),i.preventDefault())}},l=0;l<a;l++)s(l);o.bubble(o.context)&&!i.isPropagationStopped()&&o.parent(o.context).emit(i,e)},t),this.emitting--,this};var Uw={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ua(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ma=function(e){return Re(e)?new Ar(e):e},uf={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new mi(Uw,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=Ma(r),o=0;o<this.length;o++){var i=this[o];i.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=Ma(r),o=0;o<this.length;o++){var i=this[o];i.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=Ma(r),o=0;o<this.length;o++){var i=this[o];i.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=Ma(r),o=0;o<this.length;o++){var i=this[o];i.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};qe.eventAliasesOn(uf);var ff={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(Re(e)||Ft(e))return new Ar(e).filter(this);if(at(e)){for(var n=this.spawn(),a=this,o=0;o<a.length;o++){var i=a[o],s=r?e.apply(r,[i,o,a]):e(i,o,a);s&&n.push(i)}return n}return this.spawn()},not:function(e){if(e){Re(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],o=e.has(a);o||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Re(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,o=e,i=this.length<e.length,s=i?a:o,l=i?o:a,u=0;u<s.length;u++){var f=s[u];l.has(f)&&n.push(f)}return n},xor:function(e){var r=this._private.cy;Re(e)&&(e=r.$(e));var n=this.spawn(),a=this,o=e,i=function(l,u){for(var f=0;f<l.length;f++){var h=l[f],v=h._private.data.id,c=u.hasElementWithId(v);c||n.push(h)}};return i(a,o),i(o,a),n},diff:function(e){var r=this._private.cy;Re(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),o=this.spawn(),i=this,s=e,l=function(f,h,v){for(var c=0;c<f.length;c++){var d=f[c],g=d._private.data.id,m=h.hasElementWithId(g);m?o.merge(d):v.push(d)}};return l(i,s,n),l(s,i,a),{left:n,right:a,both:o}},add:function(e){var r=this._private.cy;if(!e)return this;if(Re(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),o=0;o<e.length;o++){var i=e[o],s=!this.has(i);s&&a.push(i)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&Re(e)){var a=e;e=n.mutableElements().filter(a)}for(var o=r.map,i=0;i<e.length;i++){var s=e[i],l=s._private.data.id,u=!o.has(l);if(u){var f=this.length++;this[f]=s,o.set(l,{ele:s,index:f})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,o=a.map;this[e]=void 0,o.delete(n);var i=e===this.length-1;if(this.length>1&&!i){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,o.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,o=a.get(n);if(!o)return this;var i=o.index;return this.unmergeAt(i),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&Re(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,o=0;o<a.length;o++){var i=a[o],s=r?e.apply(r,[i,o,a]):e(i,o,a);n.push(s)}return n},reduce:function(e,r){for(var n=r,a=this,o=0;o<a.length;o++)n=e(n,a[o],o,a);return n},max:function(e,r){for(var n=-1/0,a,o=this,i=0;i<o.length;i++){var s=o[i],l=r?e.apply(r,[s,i,o]):e(s,i,o);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,o=this,i=0;i<o.length;i++){var s=o[i],l=r?e.apply(r,[s,i,o]):e(s,i,o);l<n&&(n=l,a=s)}return{value:n,ele:a}}},He=ff;He.u=He["|"]=He["+"]=He.union=He.or=He.add;He["\\"]=He["!"]=He["-"]=He.difference=He.relativeComplement=He.subtract=He.not;He.n=He["&"]=He["."]=He.and=He.intersection=He.intersect;He["^"]=He["(+)"]=He["(-)"]=He.symmetricDifference=He.symdiff=He.xor;He.fnFilter=He.filterFn=He.stdFilter=He.filter;He.complement=He.abscomp=He.absoluteComplement;var Vw={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},hf=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function o(f){var h=f.pstyle("z-compound-depth");return h.value==="auto"?a?f.zDepth():0:h.value==="bottom"?-1:h.value==="top"?Lo:0}var i=o(e)-o(r);if(i!==0)return i;function s(f){var h=f.pstyle("z-index-compare");return h.value==="auto"&&f.isNode()?1:0}var l=s(e)-s(r);if(l!==0)return l;var u=e.pstyle("z-index").value-r.pstyle("z-index").value;return u!==0?u:e.poolIndex()-r.poolIndex()},Xa={forEach:function(e,r){if(at(e))for(var n=this.length,a=0;a<n;a++){var o=this[a],i=r?e.apply(r,[o,a,this]):e(o,a,this);if(i===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var o=e;o>=0&&o<r&&o<a;o++)n.push(this[o]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!at(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(hf)},zDepth:function(){var e=this[0];if(!!e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Lo-1}else{var o=r.source,i=r.target,s=o.zDepth(),l=i.zDepth();return Math.max(s,l,0)}}}};Xa.each=Xa.forEach;var Hw=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":vt(Symbol))!=e&&vt(Symbol.iterator)!=e;r&&(Xa[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},o=0,i=this.length;return pu({next:function(){return o<i?a.value=n[o++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};Hw();var $w=bt({nodeDimensionsIncludeLabels:!1}),Ba={layoutDimensions:function(e){e=$w(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(L){return!L.isParent()}),o=this.cy(),i=r.eles,s=function(A){return A.id()},l=Yn(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(A,S,N){var M={x:S.x1+S.w/2,y:S.y1+S.h/2},b={x:(N.x-M.x)*A,y:(N.y-M.y)*A};return{x:M.x+b.x,y:M.y+b.y}},f=r.spacingFactor&&r.spacingFactor!==1,h=function(){if(!f)return null;for(var A=It(),S=0;S<a.length;S++){var N=a[S],M=l(N,S);jy(A,M.x,M.y)}return A},v=h(),c=Yn(function(L,A){var S=l(L,A);if(f){var N=Math.abs(r.spacingFactor);S=u(N,v,S)}return r.transform!=null&&(S=r.transform(L,S)),S},s);if(r.animate){for(var d=0;d<a.length;d++){var g=a[d],m=c(g,d),p=r.animateFilter==null||r.animateFilter(g,d);if(p){var y=g.animation({position:m,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(y)}else g.position(m)}if(r.fit){var w=o.animation({fit:{boundingBox:i.boundingBoxAt(c),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(w)}else if(r.zoom!==void 0&&r.pan!==void 0){var x=o.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(x)}e.animations.forEach(function(L){return L.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),Sn.all(e.animations.map(function(L){return L.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(c),r.fit&&o.fit(r.eles,r.padding),r.zoom!=null&&o.zoom(r.zoom),r.pan&&o.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(Fe({},e,{eles:this}))}};Ba.createLayout=Ba.makeLayout=Ba.layout;function cf(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],o;return(o=a[t])!=null||(o=a[t]=e(r)),o}function yi(t,e){return t=Vr(t),function(n){return cf(t,e,n)}}function wi(t,e){t=Vr(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return cf(t,r,a)}}var yt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),o=this;e=!!(e||e===void 0),a&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=o;return e?i.emitAndNotify("style"):i.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(!!a.styleEnabled()&&n){this.cleanStyle();var o=n._private.style[e];return o!=null?o:r?a.style().getDefaultProperty(e):null}},numericStyle:function(e){var r=this[0];if(!!r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(!!r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,o=n.style();if(Ue(e)){var i=e;o.applyBypass(this,i,a),this.emitAndNotify("style")}else if(Re(e))if(r===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?o.getRawStyle(l):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),o=this;if(e===void 0)for(var i=0;i<o.length;i++){var s=o[i];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<o.length;l++){var u=o[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,o=n.pstyle("opacity").value;if(!r)return o;var i=a.data.parent?n.parents():null;if(i)for(var s=0;s<i.length;s++){var l=i[s],u=l.pstyle("opacity").value;o=u*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Vi(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var o=n[a];if(!e(o))return!1}return!0}function Bo(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var o=this[0],i=a.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!i||Vi(o,n);var l=s.source,u=s.target;return r(l)&&(!i||Vi(l,r))&&(l===u||r(u)&&(!i||Vi(u,r)))}}}var Dn=yi("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});yt.takesUpSpace=wi("takesUpSpace",Bo({ok:Dn}));var Yw=yi("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Dn(t)}),qw=yi("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Dn(t)});yt.interactive=wi("interactive",Bo({ok:Yw,parentOk:qw,edgeOkViaNode:Dn}));yt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Ww=yi("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Dn(t)}),Xw=Dn;yt.visible=wi("visible",Bo({ok:Ww,edgeOkViaNode:Xw}));yt.hidden=function(){var t=this[0];if(t)return!t.visible()};yt.isBundledBezier=wi("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});yt.bypass=yt.css=yt.style;yt.renderedCss=yt.renderedStyle;yt.removeBypass=yt.removeCss=yt.removeStyle;yt.pstyle=yt.parsedStyle;var Lr={};function Xs(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&at(e[0])){var o=e[0];this.on(t.event,o)}else if(e.length===0||e.length===1&&Qe(e[0])){for(var i=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!t.ableField||l._private[t.ableField],f=l._private[t.field]!=t.value;if(t.overrideAble){var h=t.overrideAble(l);if(h!==void 0&&(u=h,!h))return this}u&&(l._private[t.field]=t.value,f&&r.push(l))}var v=this.spawn(r);v.updateStyle(),v.emit(t.event),i&&v.emit(i)}return this}}function Ln(t){Lr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Lr[t.on]=Xs({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Lr[t.off]=Xs({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Ln({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Ln({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Ln({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Ln({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Lr.deselect=Lr.unselect;Lr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Ln({field:"active",on:"activate",off:"unactivate"});Ln({field:"pannable",on:"panify",off:"unpanify"});Lr.inactive=function(){var t=this[0];if(t)return!t._private.active};var St={},Ks=function(e){return function(n){for(var a=this,o=[],i=0;i<a.length;i++){var s=a[i];if(!!s.isNode()){for(var l=!1,u=s.connectedEdges(),f=0;f<u.length;f++){var h=u[f],v=h.source(),c=h.target();if(e.noIncomingEdges&&c===s&&v!==s||e.noOutgoingEdges&&v===s&&c!==s){l=!0;break}}l||o.push(s)}}return this.spawn(o,!0).filter(n)}},Zs=function(e){return function(r){for(var n=this,a=[],o=0;o<n.length;o++){var i=n[o];if(!!i.isNode())for(var s=i.connectedEdges(),l=0;l<s.length;l++){var u=s[l],f=u.source(),h=u.target();e.outgoing&&f===i?(a.push(u),a.push(h)):e.incoming&&h===i&&(a.push(u),a.push(f))}}return this.spawn(a,!0).filter(r)}},Qs=function(e){return function(r){for(var n=this,a=[],o={};;){var i=e.outgoing?n.outgoers():n.incomers();if(i.length===0)break;for(var s=!1,l=0;l<i.length;l++){var u=i[l],f=u.id();o[f]||(o[f]=!0,a.push(u),s=!0)}if(!s)break;n=i}return this.spawn(a,!0).filter(r)}};St.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Fe(St,{roots:Ks({noIncomingEdges:!0}),leaves:Ks({noOutgoingEdges:!0}),outgoers:Ut(Zs({outgoing:!0}),"outgoers"),successors:Qs({outgoing:!0}),incomers:Ut(Zs({incoming:!0}),"incomers"),predecessors:Qs({incoming:!0})});Fe(St,{neighborhood:Ut(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],o=a.connectedEdges(),i=0;i<o.length;i++){var s=o[i],l=s.source(),u=s.target(),f=a===l?u:l;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});St.neighbourhood=St.neighborhood;St.closedNeighbourhood=St.closedNeighborhood;St.openNeighbourhood=St.openNeighborhood;Fe(St,{source:Ut(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Ut(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Js({attr:"source"}),targets:Js({attr:"target"})});function Js(t){return function(r){for(var n=[],a=0;a<this.length;a++){var o=this[a],i=o._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(r)}}Fe(St,{edgesWith:Ut(js(),"edgesWith"),edgesTo:Ut(js({thisIsSrc:!0}),"edgesTo")});function js(t){return function(r){var n=[],a=this._private.cy,o=t||{};Re(r)&&(r=a.$(r));for(var i=0;i<r.length;i++)for(var s=r[i]._private.edges,l=0;l<s.length;l++){var u=s[l],f=u._private.data,h=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),v=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target),c=h||v;!c||(o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!h||o.thisIsTgt&&!v)||n.push(u)}return this.spawn(n,!0)}}Fe(St,{connectedEdges:Ut(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(!!a.isNode())for(var o=a._private.edges,i=0;i<o.length;i++){var s=o[i];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Ut(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];!a.isEdge()||(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Ut(el(),"parallelEdges"),codirectedEdges:Ut(el({codirected:!0}),"codirectedEdges")});function el(t){var e={codirected:!1};return t=Fe({},e,t),function(n){for(var a=[],o=this.edges(),i=t,s=0;s<o.length;s++)for(var l=o[s],u=l._private,f=u.source,h=f._private.data.id,v=u.data.target,c=f._private.edges,d=0;d<c.length;d++){var g=c[d],m=g._private.data,p=m.target,y=m.source,w=p===v&&y===h,x=h===p&&v===y;(i.codirected&&w||!i.codirected&&(w||x))&&a.push(g)}return this.spawn(a,!0).filter(n)}}Fe(St,{components:function(e){var r=this,n=r.cy(),a=n.collection(),o=e==null?r.nodes():e.nodes(),i=[];e!=null&&o.empty()&&(o=e.sources());var s=function(f,h){a.merge(f),o.unmerge(f),h.merge(f)};if(o.empty())return r.spawn();var l=function(){var f=n.collection();i.push(f);var h=o[0];s(h,f),r.bfs({directed:!1,roots:h,visit:function(c){return s(c,f)}}),f.forEach(function(v){v.connectedEdges().forEach(function(c){r.has(c)&&f.has(c.source())&&f.has(c.target())&&f.merge(c)})})};do l();while(o.length>0);return i},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});St.componentsOf=St.components;var wt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){it("A collection must have a reference to the core");return}var o=new Kt,i=!1;if(!r)r=[];else if(r.length>0&&Ue(r[0])&&!ua(r[0])){i=!0;for(var s=[],l=new Cn,u=0,f=r.length;u<f;u++){var h=r[u];h.data==null&&(h.data={});var v=h.data;if(v.id==null)v.id=Au();else if(e.hasElementWithId(v.id)||l.has(v.id))continue;var c=new vi(e,h,!1);s.push(c),l.add(v.id)}r=s}this.length=0;for(var d=0,g=r.length;d<g;d++){var m=r[d][0];if(m!=null){var p=m._private.data.id;(!n||!o.has(p))&&(n&&o.set(p,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var w=this.lazyMap=new Kt,x=this.eles,L=0;L<x.length;L++){var A=x[L];w.set(A.id(),{index:L,ele:A})}}},n&&(this._private.map=o),i&&!a&&this.restore()},je=vi.prototype=wt.prototype=Object.create(Array.prototype);je.instanceString=function(){return"collection"};je.spawn=function(t,e){return new wt(this.cy(),t,e)};je.spawnSelf=function(){return this.spawn(this)};je.cy=function(){return this._private.cy};je.renderer=function(){return this._private.cy.renderer()};je.element=function(){return this[0]};je.collection=function(){return yu(this)?this:new wt(this._private.cy,[this])};je.unique=function(){return new wt(this._private.cy,this,!0)};je.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};je.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new wt(e)};je.$id=je.getElementById;je.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};je.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};je.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};je.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Ue(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var o=!1,i={},s=t.data.source,l=t.data.target;s!=null&&s!=a.source&&(i.source=""+s,o=!0),l!=null&&l!=a.target&&(i.target=""+l,o=!0),o&&(e=e.move(i))}else{var u="parent"in t.data,f=t.data.parent;u&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var h=function(g,m,p){var y=t[g];y!=null&&y!==n[g]&&(y?e[m]():e[p]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var v={data:Xt(n.data),position:Xt(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};v.classes="";var c=0;return n.classes.forEach(function(d){return v.classes+=c++===0?d:" "+d}),v}}};je.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};je.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),o=new vi(t,a,!1);e.push(o)}return new wt(t,e)};je.copy=je.clone;je.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,o=[],i=[],s,l=0,u=r.length;l<u;l++){var f=r[l];e&&!f.removed()||(f.isNode()?o.push(f):i.push(f))}s=o.concat(i);var h,v=function(){s.splice(h,1),h--};for(h=0;h<s.length;h++){var c=s[h],d=c._private,g=d.data;if(c.clearTraversalCache(),!(!e&&!d.removed)){if(g.id===void 0)g.id=Au();else if(we(g.id))g.id=""+g.id;else if(Nr(g.id)||!Re(g.id)){it("Can not create element with invalid string ID `"+g.id+"`"),v();continue}else if(n.hasElementWithId(g.id)){it("Can not create second element with ID `"+g.id+"`"),v();continue}}var m=g.id;if(c.isNode()){var p=d.position;p.x==null&&(p.x=0),p.y==null&&(p.y=0)}if(c.isEdge()){for(var y=c,w=["source","target"],x=w.length,L=!1,A=0;A<x;A++){var S=w[A],N=g[S];we(N)&&(N=g[S]=""+g[S]),N==null||N===""?(it("Can not create edge `"+m+"` with unspecified "+S),L=!0):n.hasElementWithId(N)||(it("Can not create edge `"+m+"` with nonexistant "+S+" `"+N+"`"),L=!0)}if(L){v();continue}var M=n.getElementById(g.source),b=n.getElementById(g.target);M.same(b)?M._private.edges.push(y):(M._private.edges.push(y),b._private.edges.push(y)),y._private.source=M,y._private.target=b}d.map=new Kt,d.map.set(m,{ele:c,index:0}),d.removed=!1,e&&n.addToPool(c)}for(var T=0;T<o.length;T++){var E=o[T],D=E._private.data;we(D.parent)&&(D.parent=""+D.parent);var C=D.parent,P=C!=null;if(P||E._private.parent){var I=E._private.parent?n.collection().merge(E._private.parent):n.getElementById(C);if(I.empty())D.parent=void 0;else if(I[0].removed())We("Node added with missing parent, reference to parent removed"),D.parent=void 0,E._private.parent=null;else{for(var R=!1,F=I;!F.empty();){if(E.same(F)){R=!0,D.parent=void 0;break}F=F.parent()}R||(I[0]._private.children.push(E),E._private.parent=I[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var _=s.length===r.length?r:new wt(n,s),H=0;H<_.length;H++){var k=_[H];k.isNode()||(k.parallelEdges().clearTraversalCache(),k.source().clearTraversalCache(),k.target().clearTraversalCache())}var G;a.hasCompoundNodes?G=n.collection().merge(_).merge(_.connectedNodes()).merge(_.parent()):G=_,G.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?_.emitAndNotify("add"):e&&_.emit("add")}return r};je.removed=function(){var t=this[0];return t&&t._private.removed};je.inside=function(){var t=this[0];return t&&!t._private.removed};je.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},o=r._private.cy;function i(C){for(var P=C._private.edges,I=0;I<P.length;I++)l(P[I])}function s(C){for(var P=C._private.children,I=0;I<P.length;I++)l(P[I])}function l(C){var P=a[C.id()];e&&C.removed()||P||(a[C.id()]=!0,C.isNode()?(n.push(C),i(C),s(C)):n.unshift(C))}for(var u=0,f=r.length;u<f;u++){var h=r[u];l(h)}function v(C,P){var I=C._private.edges;Mr(I,P),C.clearTraversalCache()}function c(C){C.clearTraversalCache()}var d=[];d.ids={};function g(C,P){P=P[0],C=C[0];var I=C._private.children,R=C.id();Mr(I,P),P._private.parent=null,d.ids[R]||(d.ids[R]=!0,d.push(C))}r.dirtyCompoundBoundsCache(),e&&o.removeFromPool(n);for(var m=0;m<n.length;m++){var p=n[m];if(p.isEdge()){var y=p.source()[0],w=p.target()[0];v(y,p),v(w,p);for(var x=p.parallelEdges(),L=0;L<x.length;L++){var A=x[L];c(A),A.isBundledBezier()&&A.dirtyBoundingBoxCache()}}else{var S=p.parent();S.length!==0&&g(S,p)}e&&(p._private.removed=!0)}var N=o._private.elements;o._private.hasCompoundNodes=!1;for(var M=0;M<N.length;M++){var b=N[M];if(b.isParent()){o._private.hasCompoundNodes=!0;break}}var T=new wt(this.cy(),n);T.size()>0&&(t?T.emitAndNotify("remove"):e&&T.emit("remove"));for(var E=0;E<d.length;E++){var D=d[E];(!e||!D.removed())&&D.updateStyle()}return T};je.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,o=function(d){return d==null?d:""+d};if(t.source!==void 0||t.target!==void 0){var i=o(t.source),s=o(t.target),l=i!=null&&e.hasElementWithId(i),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var c=0;c<r.length;c++){var d=r[c],g=d._private.data;d.isEdge()&&(l&&(g.source=i),u&&(g.target=s))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var f=o(t.parent),h=f===null||e.hasElementWithId(f);if(h){var v=f===null?void 0:f;e.batch(function(){var c=r.remove(n,a);c.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var g=r[d],m=g._private.data;g.isNode()&&(m.parent=v)}c.restore(n,a)}),r.emitAndNotify("move")}}return this};[$u,ow,Fa,Dr,wn,xw,pi,kw,uf,ff,Vw,Xa,Ba,yt,Lr,St].forEach(function(t){Fe(je,t)});var Kw={add:function(e){var r,n=this;if(Ft(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var o=[],i=0;i<a.length;i++){var s=a[i];o.push(s.json())}r=new wt(n,o)}}else if(Qe(e)){var l=e;r=new wt(n,l)}else if(Ue(e)&&(Qe(e.nodes)||Qe(e.edges))){for(var u=e,f=[],h=["nodes","edges"],v=0,c=h.length;v<c;v++){var d=h[v],g=u[d];if(Qe(g))for(var m=0,p=g.length;m<p;m++){var y=Fe({group:d},g[m]);f.push(y)}}r=new wt(n,f)}else{var w=e;r=new vi(n,w).collection()}return r},remove:function(e){if(!Ft(e)){if(Re(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Zw(t,e,r,n){var a=4,o=.001,i=1e-7,s=10,l=11,u=1/(l-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var v=f?new Float32Array(l):new Array(l);function c(b,T){return 1-3*T+3*b}function d(b,T){return 3*T-6*b}function g(b){return 3*b}function m(b,T,E){return((c(T,E)*b+d(T,E))*b+g(T))*b}function p(b,T,E){return 3*c(T,E)*b*b+2*d(T,E)*b+g(T)}function y(b,T){for(var E=0;E<a;++E){var D=p(T,t,r);if(D===0)return T;var C=m(T,t,r)-b;T-=C/D}return T}function w(){for(var b=0;b<l;++b)v[b]=m(b*u,t,r)}function x(b,T,E){var D,C,P=0;do C=T+(E-T)/2,D=m(C,t,r)-b,D>0?E=C:T=C;while(Math.abs(D)>i&&++P<s);return C}function L(b){for(var T=0,E=1,D=l-1;E!==D&&v[E]<=b;++E)T+=u;--E;var C=(b-v[E])/(v[E+1]-v[E]),P=T+C*u,I=p(P,t,r);return I>=o?y(b,P):I===0?P:x(b,T,T+u)}var A=!1;function S(){A=!0,(t!==e||r!==n)&&w()}var N=function(T){return A||S(),t===e&&r===n?T:T===0?0:T===1?1:m(L(T),e,n)};N.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var M="generateBezier("+[t,e,r,n]+")";return N.toString=function(){return M},N}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Qw=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,o){var i={x:n.x+o.dx*a,v:n.v+o.dv*a,tension:n.tension,friction:n.friction};return{dx:i.v,dv:t(i)}}function r(n,a){var o={dx:n.v,dv:t(n)},i=e(n,a*.5,o),s=e(n,a*.5,i),l=e(n,a,s),u=1/6*(o.dx+2*(i.dx+s.dx)+l.dx),f=1/6*(o.dv+2*(i.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+f*a,n}return function n(a,o,i){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,f=1/1e4,h=16/1e3,v,c,d;for(a=parseFloat(a)||500,o=parseFloat(o)||20,i=i||null,s.tension=a,s.friction=o,v=i!==null,v?(u=n(a,o),c=u/i*h):c=h;d=r(d||s,c),l.push(1+d.x),u+=16,Math.abs(d.x)>f&&Math.abs(d.v)>f;);return v?function(g){return l[g*(l.length-1)|0]}:u}}(),Je=function(e,r,n,a){var o=Zw(e,r,n,a);return function(i,s,l){return i+(s-i)*o(l)}},ka={linear:function(e,r,n){return e+(r-e)*n},ease:Je(.25,.1,.25,1),"ease-in":Je(.42,0,1,1),"ease-out":Je(0,0,.58,1),"ease-in-out":Je(.42,0,.58,1),"ease-in-sine":Je(.47,0,.745,.715),"ease-out-sine":Je(.39,.575,.565,1),"ease-in-out-sine":Je(.445,.05,.55,.95),"ease-in-quad":Je(.55,.085,.68,.53),"ease-out-quad":Je(.25,.46,.45,.94),"ease-in-out-quad":Je(.455,.03,.515,.955),"ease-in-cubic":Je(.55,.055,.675,.19),"ease-out-cubic":Je(.215,.61,.355,1),"ease-in-out-cubic":Je(.645,.045,.355,1),"ease-in-quart":Je(.895,.03,.685,.22),"ease-out-quart":Je(.165,.84,.44,1),"ease-in-out-quart":Je(.77,0,.175,1),"ease-in-quint":Je(.755,.05,.855,.06),"ease-out-quint":Je(.23,1,.32,1),"ease-in-out-quint":Je(.86,0,.07,1),"ease-in-expo":Je(.95,.05,.795,.035),"ease-out-expo":Je(.19,1,.22,1),"ease-in-out-expo":Je(1,0,0,1),"ease-in-circ":Je(.6,.04,.98,.335),"ease-out-circ":Je(.075,.82,.165,1),"ease-in-out-circ":Je(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return ka.linear;var a=Qw(e,r,n);return function(o,i,s){return o+(i-o)*a(s)}},"cubic-bezier":Je};function tl(t,e,r,n,a){if(n===1||e===r)return r;var o=a(e,r,n);return t==null||((t.roundValue||t.color)&&(o=Math.round(o)),t.min!==void 0&&(o=Math.max(o,t.min)),t.max!==void 0&&(o=Math.min(o,t.max))),o}function rl(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function nn(t,e,r,n,a){var o=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var i=rl(t,a),s=rl(e,a);if(we(i)&&we(s))return tl(o,i,s,r,n);if(Qe(i)&&Qe(s)){for(var l=[],u=0;u<s.length;u++){var f=i[u],h=s[u];if(f!=null&&h!=null){var v=tl(o,f,h,r,n);l.push(v)}else l.push(h)}return l}}function Jw(t,e,r,n){var a=!n,o=t._private,i=e._private,s=i.easing,l=i.startTime,u=n?t:t.cy(),f=u.style();if(!i.easingImpl)if(s==null)i.easingImpl=ka.linear;else{var h;if(Re(s)){var v=f.parse("transition-timing-function",s);h=v.value}else h=s;var c,d;Re(h)?(c=h,d=[]):(c=h[1],d=h.slice(2).map(function(_){return+_})),d.length>0?(c==="spring"&&d.push(i.duration),i.easingImpl=ka[c].apply(null,d)):i.easingImpl=ka[c]}var g=i.easingImpl,m;if(i.duration===0?m=1:m=(r-l)/i.duration,i.applying&&(m=i.progress),m<0?m=0:m>1&&(m=1),i.delay==null){var p=i.startPosition,y=i.position;if(y&&a&&!t.locked()){var w={};Bn(p.x,y.x)&&(w.x=nn(p.x,y.x,m,g)),Bn(p.y,y.y)&&(w.y=nn(p.y,y.y,m,g)),t.position(w)}var x=i.startPan,L=i.pan,A=o.pan,S=L!=null&&n;S&&(Bn(x.x,L.x)&&(A.x=nn(x.x,L.x,m,g)),Bn(x.y,L.y)&&(A.y=nn(x.y,L.y,m,g)),t.emit("pan"));var N=i.startZoom,M=i.zoom,b=M!=null&&n;b&&(Bn(N,M)&&(o.zoom=Kn(o.minZoom,nn(N,M,m,g),o.maxZoom)),t.emit("zoom")),(S||b)&&t.emit("viewport");var T=i.style;if(T&&T.length>0&&a){for(var E=0;E<T.length;E++){var D=T[E],C=D.name,P=D,I=i.startStyle[C],R=f.properties[I.name],F=nn(I,P,m,g,R);f.overrideBypass(t,C,F)}t.emit("style")}}return i.progress=m,m}function Bn(t,e){return t==null||e==null?!1:we(t)&&we(e)?!0:!!(t&&e)}function jw(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function nl(t,e){var r=e._private.aniEles,n=[];function a(f,h){var v=f._private,c=v.animation.current,d=v.animation.queue,g=!1;if(c.length===0){var m=d.shift();m&&c.push(m)}for(var p=function(A){for(var S=A.length-1;S>=0;S--){var N=A[S];N()}A.splice(0,A.length)},y=c.length-1;y>=0;y--){var w=c[y],x=w._private;if(x.stopped){c.splice(y,1),x.hooked=!1,x.playing=!1,x.started=!1,p(x.frames);continue}!x.playing&&!x.applying||(x.playing&&x.applying&&(x.applying=!1),x.started||jw(f,w,t),Jw(f,w,t,h),x.applying&&(x.applying=!1),p(x.frames),x.step!=null&&x.step(t),w.completed()&&(c.splice(y,1),x.hooked=!1,x.playing=!1,x.started=!1,p(x.completes)),g=!0)}return!h&&c.length===0&&d.length===0&&n.push(f),g}for(var o=!1,i=0;i<r.length;i++){var s=r[i],l=a(s);o=o||l}var u=a(e,!0);(o||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var eb={animate:qe.animate(),animation:qe.animation(),animated:qe.animated(),clearQueue:qe.clearQueue(),delay:qe.delay(),delayAnimation:qe.delayAnimation(),stop:qe.stop(),addToAnimationPool:function(e){var r=this;!r.styleEnabled()||r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){!e._private.animationsRunning||Ya(function(o){nl(o,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(o,i){nl(i,e)},n.beforeRenderPriorities.animations):r()}},tb={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ua(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Aa=function(e){return Re(e)?new Ar(e):e},vf={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new mi(tb,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Aa(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Aa(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Aa(r),n),this},once:function(e,r,n){return this.emitter().one(e,Aa(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};qe.eventAliasesOn(vf);var ao={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};ao.jpeg=ao.jpg;var _a={layout:function(e){var r=this;if(e==null){it("Layout options must be specified to make a layout");return}if(e.name==null){it("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){it("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;Re(e.eles)?o=r.$(e.eles):o=e.eles!=null?e.eles:r.$();var i=new a(Fe({},e,{cy:r,eles:o}));return i}};_a.createLayout=_a.makeLayout=_a.layout;var rb={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(!!n.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var o=n[a],i=e[o],s=r.getElementById(o);s.data(i)}})}},nb=bt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),io={renderTo:function(e,r,n,a){var o=this._private.renderer;return o.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){it("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&We("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=nb(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};io.invalidateDimensions=io.resize;var za={collection:function(e,r){return Re(e)?this.$(e):Ft(e)?e.collection():Qe(e)?(r||(r={}),new wt(this,e,r.unique,r.removed)):new wt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};za.elements=za.filter=za.$;var Lt={},Vn="t",ab="f";Lt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),o=0;o<t.length;o++){var i=t[o],s=e.getContextMeta(i);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,i);i._private.appliedInitStyle?e.updateTransitions(i,u.diffProps):i._private.appliedInitStyle=!0;var f=e.updateStyleHints(i);f&&a.push(i)}}return a};Lt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,o=n[a];if(o)return o;for(var i=[],s={},l=0;l<r.length;l++){var u=r[l],f=t[l]===Vn,h=e[l]===Vn,v=f!==h,c=u.mappedProperties.length>0;if(v||h&&c){var d=void 0;v&&c||v?d=u.properties:c&&(d=u.mappedProperties);for(var g=0;g<d.length;g++){for(var m=d[g],p=m.name,y=!1,w=l+1;w<r.length;w++){var x=r[w],L=e[w]===Vn;if(!!L&&(y=x.properties[m.name]!=null,y))break}!s[p]&&!y&&(s[p]=!0,i.push(p))}}}return n[a]=i,i};Lt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",o=0;o<e.length;o++){var i=e[o],s=i.selector&&i.selector.matches(t);s?r+=Vn:r+=ab}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};Lt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},o=0;o<r.length;o++){var i=r[o],s=e[o]===Vn;if(!!s)for(var l=0;l<i.properties.length;l++){var u=i.properties[l];a[u.name]=u}}return n[e]=a,a};Lt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,o={},i=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],f=r.pstyle(l);if(!u)if(f)f.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(f!==u){if(u.mapped===i.fn&&f!=null&&f.mapping!=null&&f.mapping.value===u.value){var h=f.mapping,v=h.fnValue=u.value(r);if(v===h.prevFnValue)continue}var c=o[l]={prev:f};n.applyParsedProperty(r,u),c.next=r.pstyle(l),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}};Lt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,o=function(J,le,pe){return r.getPropertiesHash(J,le,pe)},i=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",l=t._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var f=a[u];e.styleKeys[f]=[ln,kn]}for(var h=function(J,le){return e.styleKeys[le][0]=qn(J,e.styleKeys[le][0])},v=function(J,le){return e.styleKeys[le][1]=Wn(J,e.styleKeys[le][1])},c=function(J,le){h(J,le),v(J,le)},d=function(J,le){for(var pe=0;pe<J.length;pe++){var Oe=J.charCodeAt(pe);h(Oe,le),v(Oe,le)}},g=2e9,m=function(J){return-128<J&&J<128&&Math.floor(J)!==J?g-(J*1024|0):J},p=0;p<n.length;p++){var y=n[p],w=l[y];if(w!=null){var x=this.properties[y],L=x.type,A=x.groupKey,S=void 0;x.hashOverride!=null?S=x.hashOverride(t,w):w.pfValue!=null&&(S=w.pfValue);var N=x.enums==null?w.value:null,M=S!=null,b=N!=null,T=M||b,E=w.units;if(L.number&&T&&!L.multiple){var D=M?S:N;c(m(D),A),!M&&E!=null&&d(E,A)}else d(w.strValue,A)}}for(var C=[ln,kn],P=0;P<a.length;P++){var I=a[P],R=e.styleKeys[I];C[0]=qn(R[0],C[0]),C[1]=Wn(R[1],C[1])}e.styleKey=yy(C[0],C[1]);var F=e.styleKeys;e.labelDimsKey=mr(F.labelDimensions);var _=o(t,["label"],F.labelDimensions);if(e.labelKey=mr(_),e.labelStyleKey=mr(Ea(F.commonLabel,_)),!s){var H=o(t,["source-label"],F.labelDimensions);e.sourceLabelKey=mr(H),e.sourceLabelStyleKey=mr(Ea(F.commonLabel,H));var k=o(t,["target-label"],F.labelDimensions);e.targetLabelKey=mr(k),e.targetLabelStyleKey=mr(Ea(F.commonLabel,k))}if(s){var G=e.styleKeys,q=G.nodeBody,$=G.nodeBorder,z=G.backgroundImage,V=G.compound,B=G.pie,Y=[q,$,z,V,B].filter(function(W){return W!=null}).reduce(Ea,[ln,kn]);e.nodeKey=mr(Y),e.hasPie=B!=null&&B[0]!==ln&&B[1]!==kn}return i!==e.styleKey};Lt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Lt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,o,i=r.types,s=r.properties[n.name].type,l=n.bypass,u=a[n.name],f=u&&u.bypass,h=t._private,v="mapping",c=function(q){return q==null?null:q.pfValue!=null?q.pfValue:q.value},d=function(){var q=c(u),$=c(n);r.checkTriggers(t,n.name,q,$)};if(n&&n.name.substr(0,3)==="pie"&&We("The pie style properties are deprecated.  Create charts using background images instead."),e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,d(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,d(),!0):!1:(d(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,d(),!0):!1:(d(),!0);var g=function(){We("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case i.mapData:{for(var m=n.field.split("."),p=h.data,y=0;y<m.length&&p;y++){var w=m[y];p=p[w]}if(p==null)return g(),!1;var x;if(we(p)){var L=n.fieldMax-n.fieldMin;L===0?x=0:x=(p-n.fieldMin)/L}else return We("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+p+"` for `"+t.id()+"` is non-numeric)"),!1;if(x<0?x=0:x>1&&(x=1),s.color){var A=n.valueMin[0],S=n.valueMax[0],N=n.valueMin[1],M=n.valueMax[1],b=n.valueMin[2],T=n.valueMax[2],E=n.valueMin[3]==null?1:n.valueMin[3],D=n.valueMax[3]==null?1:n.valueMax[3],C=[Math.round(A+(S-A)*x),Math.round(N+(M-N)*x),Math.round(b+(T-b)*x),Math.round(E+(D-E)*x)];o={bypass:n.bypass,name:n.name,value:C,strValue:"rgb("+C[0]+", "+C[1]+", "+C[2]+")"}}else if(s.number){var P=n.valueMin+(n.valueMax-n.valueMin)*x;o=this.parse(n.name,P,n.bypass,v)}else return!1;if(!o)return g(),!1;o.mapping=n,n=o;break}case i.data:{for(var I=n.field.split("."),R=h.data,F=0;F<I.length&&R;F++){var _=I[F];R=R[_]}if(R!=null&&(o=this.parse(n.name,R,n.bypass,v)),!o)return g(),!1;o.mapping=n,n=o;break}case i.fn:{var H=n.value,k=n.fnValue!=null?n.fnValue:H(t);if(n.prevFnValue=k,k==null)return We("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(o=this.parse(n.name,k,n.bypass,v),!o)return We("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;o.mapping=Xt(n),n=o;break}case void 0:break;default:return!1}return l?(f?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):f?u.bypassed=n:a[n.name]=n,d(),!0};Lt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,o=Object.keys(a),i=0;i<o.length;i++){var s=o[i],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};Lt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Lt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,i=t.pstyle("transition-delay").pfValue;if(a.length>0&&o>0){for(var s={},l=!1,u=0;u<a.length;u++){var f=a[u],h=t.pstyle(f),v=e[f];if(!!v){var c=v.prev,d=c,g=v.next!=null?v.next:h,m=!1,p=void 0,y=1e-6;!d||(we(d.pfValue)&&we(g.pfValue)?(m=g.pfValue-d.pfValue,p=d.pfValue+y*m):we(d.value)&&we(g.value)?(m=g.value-d.value,p=d.value+y*m):Qe(d.value)&&Qe(g.value)&&(m=d.value[0]!==g.value[0]||d.value[1]!==g.value[1]||d.value[2]!==g.value[2],p=d.strValue),m&&(s[f]=g.strValue,this.applyBypass(t,f,p),l=!0))}}if(!l)return;n.transitioning=!0,new Sn(function(w){i>0?t.delayAnimation(i).play().promise().then(w):w()}).then(function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};Lt.checkTrigger=function(t,e,r,n,a,o){var i=this.properties[e],s=a(i);s!=null&&s(r,n)&&o(i)};Lt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(o){return o.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};Lt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&(e==="curve-style"&&(r==="bezier"||n==="bezier")||e==="display"&&(r==="none"||n==="none"))&&t.parallelEdges().forEach(function(o){o.isBundledBezier()&&o.dirtyBoundingBoxCache()})})};Lt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var ca={};ca.applyBypass=function(t,e,r,n){var a=this,o=[],i=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,f=this.parse(u,r,!0);f&&o.push(f)}}else if(Re(e)){var h=this.parse(e,r,!0);h&&o.push(h)}else if(Ue(e)){var v=e;n=r;for(var c=Object.keys(v),d=0;d<c.length;d++){var g=c[d],m=v[g];if(m===void 0&&(m=v[ci(g)]),m!==void 0){var p=this.parse(g,m,!0);p&&o.push(p)}}}else return!1;if(o.length===0)return!1;for(var y=!1,w=0;w<t.length;w++){for(var x=t[w],L={},A=void 0,S=0;S<o.length;S++){var N=o[S];if(n){var M=x.pstyle(N.name);A=L[N.name]={prev:M}}y=this.applyParsedProperty(x,Xt(N))||y,n&&(A.next=x.pstyle(N.name))}y&&this.updateStyleHints(x),n&&this.updateTransitions(x,L,i)}return y};ca.overrideBypass=function(t,e,r){e=Do(e);for(var n=0;n<t.length;n++){var a=t[n],o=a._private.style[e],i=this.properties[e].type,s=i.color,l=i.mutiple,u=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(a,e,r):(o.value=r,o.pfValue!=null&&(o.pfValue=r),s?o.strValue="rgb("+r.join(",")+")":l?o.strValue=r.join(" "):o.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,u,r)}};ca.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};ca.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var o=t[a],i={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],f=o.pstyle(u.name);if(!(!f||!f.bypass)){var h="",v=this.parse(l,h,!0),c=i[u.name]={prev:f};this.applyParsedProperty(o,v),c.next=o.pstyle(u.name)}}this.updateStyleHints(o),r&&this.updateTransitions(o,i,n)}};var ko={};ko.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};ko.containerCss=function(t){var e=this._private.cy,r=e.container();if(rt&&r&&rt.getComputedStyle)return rt.getComputedStyle(r).getPropertyValue(t)};var Qt={};Qt.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};Qt.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var o=r.properties[a],i=r.getStylePropertyValue(t,o.name,e);i!=null&&(n[o.name]=i,n[ci(o.name)]=i)}return n}};Qt.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a!=null?a:t.cy().style().getDefaultProperty(e)[r][0]};Qt.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var o=a.type,i=t.pstyle(a.name);if(i){var s=i.value,l=i.units,u=i.strValue;if(r&&o.number&&s!=null&&we(s)){var f=t.cy().zoom(),h=function(m){return m*f},v=function(m,p){return h(m)+p},c=Qe(s),d=c?l.every(function(g){return g!=null}):l!=null;return d?c?s.map(function(g,m){return v(g,l[m])}).join(" "):v(s,l):c?s.map(function(g){return Re(g)?g:""+h(g)}).join(" "):""+h(s)}else if(u!=null)return u}return null}};Qt.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],o=a.name,i=t.pstyle(o);i!==void 0&&(Ue(i)?i=this.parse(o,i.strValue):i=this.parse(o,i)),i&&(r[o]=i)}return r};Qt.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var o=Object.keys(n),i=0;i<o.length;i++){var s=o[i],l=n[s],u=a[s]||a[Do(s)],f=this.parse(u.name,l);f&&r.push(f)}return r};Qt.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,o,i,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],o=t.pstyle(a,!1),o!=null)if(o.pfValue!=null)n[0]=qn(s,n[0]),n[1]=Wn(s,n[1]);else for(i=o.strValue,u=0;u<i.length;u++)s=i.charCodeAt(u),n[0]=qn(s,n[0]),n[1]=Wn(s,n[1]);return n};Qt.getPropertiesHash=Qt.getNonDefaultPropertiesHash;var bi={};bi.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,o=n.style||n.css,i=Object.keys(o);e.selector(a);for(var s=0;s<i.length;s++){var l=i[s],u=o[l];e.css(l,u)}}return e};bi.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};bi.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,o={},i=0;i<a.length;i++){var s=a[i];o[s.name]=s.strValue}t.push({selector:n?n.toString():"core",style:o})}return t};var _o={};_o.appendFromString=function(t){var e=this,r=this,n=""+t,a,o,i;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){o.length>i.length?o=o.substr(i.length):o=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){We("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var h=f[1];if(h!=="core"){var v=new Ar(h);if(v.invalid){We("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),s();continue}}var c=f[2],d=!1;o=c;for(var g=[];;){var m=o.match(/^\s*$/);if(m)break;var p=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){We("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),d=!0;break}i=p[0];var y=p[1],w=p[2],x=e.properties[y];if(!x){We("Skipping property: Invalid property name in: "+i),l();continue}var L=r.parse(y,w);if(!L){We("Skipping property: Invalid property definition in: "+i),l();continue}g.push({name:y,val:w}),l()}if(d){s();break}r.selector(h);for(var A=0;A<g.length;A++){var S=g[A];r.css(S.name,S.val)}s()}return r};_o.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var mt={};(function(){var t=ct,e=iy,r=sy,n=ly,a=uy,o=function(Y){return"^"+Y+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(Y){var W=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+Y+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+W+")\\s*\\,\\s*("+W+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];mt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Y,W){switch(Y.length){case 2:return W[0]!=="deg"&&W[0]!=="rad"&&W[1]!=="deg"&&W[1]!=="rad";case 1:return Re(Y[0])||W[0]==="deg"||W[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Y){var W=Y.length;return W===1||W===2||W===4}}};var l={zeroNonZero:function(Y,W){return(Y==null||W==null)&&Y!==W||Y==0&&W!=0?!0:Y!=0&&W==0},any:function(Y,W){return Y!=W},emptyNonEmpty:function(Y,W){var J=Nr(Y),le=Nr(W);return J&&!le||!J&&le}},u=mt.types,f=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],v=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],c=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],d=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],g=[{name:"events",type:u.bool},{name:"text-events",type:u.bool}],m=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.nonNegativeInt,triggersZOrder:l.any}],p=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any}],y=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any}],w=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],x=function(Y,W){return W.value==="label"?-Y.poolIndex():W.pfValue},L=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:x},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:x},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],A=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle}],S=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],N=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],M=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],b=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],T=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],E=[];mt.pieBackgroundN=16,E.push({name:"pie-size",type:u.sizeMaybePercent});for(var D=1;D<=mt.pieBackgroundN;D++)E.push({name:"pie-"+D+"-background-color",type:u.color}),E.push({name:"pie-"+D+"-background-size",type:u.percent}),E.push({name:"pie-"+D+"-background-opacity",type:u.zeroOneNumber});var C=[],P=mt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill}].forEach(function(B){P.forEach(function(Y){var W=Y+"-"+B.name,J=B.type,le=B.triggersBounds;C.push({name:W,type:J,triggersBounds:le})})},{});var I=mt.properties=[].concat(g,w,m,p,y,b,d,c,f,h,v,L,A,S,E,N,M,C,T),R=mt.propertyGroups={behavior:g,transition:w,visibility:m,overlay:p,underlay:y,ghost:b,commonLabel:d,labelDimensions:c,mainLabel:f,sourceLabel:h,targetLabel:v,nodeBody:L,nodeBorder:A,backgroundImage:S,pie:E,compound:N,edgeLine:M,edgeArrow:C,core:T},F=mt.propertyGroupNames={},_=mt.propertyGroupKeys=Object.keys(R);_.forEach(function(B){F[B]=R[B].map(function(Y){return Y.name}),R[B].forEach(function(Y){return Y.groupKey=B})});var H=mt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];mt.propertyNames=I.map(function(B){return B.name});for(var k=0;k<I.length;k++){var G=I[k];I[G.name]=G}for(var q=0;q<H.length;q++){var $=H[q],z=I[$.pointsTo],V={name:$.name,alias:!0,pointsTo:z};I.push(V),I[$.name]=V}})();mt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};mt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Fe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var f=1;f<=mt.pieBackgroundN;f++){var h=u.name.replace("{{i}}",f),v=u.value;l[h]=v}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(l,u){return mt.arrowPrefixes.forEach(function(f){var h=f+"-"+u.name,v=u.value;l[h]=v}),l},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var o=a.name,i=e[o],s=this.parse(o,i);r[o]=s}}return t.defaultProperties=r,t.defaultProperties};mt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ei={};Ei.parse=function(t,e,r,n){var a=this;if(at(e))return a.parseImplWarn(t,e,r,n);var o=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,i=r?"t":"f",s=""+e,l=Lu(t,s,i,o),u=a.propCache=a.propCache||[],f;return(f=u[l])||(f=u[l]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(f=Xt(f),f&&(f.value=Xt(f.value))),f};Ei.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&We("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&We("The style value of `label` is deprecated for `"+a.name+"`"),a};Ei.parseImpl=function(t,e,r,n){var a=this;t=Do(t);var o=a.properties[t],i=e,s=a.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,t=o.name);var l=Re(e);l&&(e=e.trim());var u=o.type;if(!u)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(at(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:r};var f,h;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(s.data.regex).exec(e))){if(r)return!1;var v=s.data;return{name:t,value:f,strValue:""+e,mapped:v,field:f[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(h=new RegExp(s.mapData.regex).exec(e))){if(r||u.multiple)return!1;var c=s.mapData;if(!(u.color||u.number))return!1;var d=this.parse(t,h[4]);if(!d||d.mapped)return!1;var g=this.parse(t,h[5]);if(!g||g.mapped)return!1;if(d.pfValue===g.pfValue||d.strValue===g.strValue)return We("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+d.strValue+"`"),this.parse(t,d.strValue);if(u.color){var m=d.value,p=g.value,y=m[0]===p[0]&&m[1]===p[1]&&m[2]===p[2]&&(m[3]===p[3]||(m[3]==null||m[3]===1)&&(p[3]==null||p[3]===1));if(y)return!1}return{name:t,value:h,strValue:""+e,mapped:c,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:d.value,valueMax:g.value,bypass:r}}}if(u.multiple&&n!=="multiple"){var w;if(l?w=e.split(/\s+/):Qe(e)?w=e:w=[e],u.evenMultiple&&w.length%2!==0)return null;for(var x=[],L=[],A=[],S="",N=!1,M=0;M<w.length;M++){var b=a.parse(t,w[M],r,"multiple");N=N||Re(b.value),x.push(b.value),A.push(b.pfValue!=null?b.pfValue:b.value),L.push(b.units),S+=(M>0?" ":"")+b.strValue}return u.validate&&!u.validate(x,L)?null:u.singleEnum&&N?x.length===1&&Re(x[0])?{name:t,value:x[0],strValue:x[0],bypass:r}:null:{name:t,value:x,pfValue:A,strValue:S,bypass:r,units:L}}var T=function(){for(var W=0;W<u.enums.length;W++){var J=u.enums[W];if(J===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(u.number){var E,D="px";if(u.units&&(E=u.units),u.implicitUnits&&(D=u.implicitUnits),!u.unitless)if(l){var C="px|em"+(u.allowPercent?"|\\%":"");E&&(C=E);var P=e.match("^("+ct+")("+C+")?$");P&&(e=P[1],E=P[2]||D)}else(!E||u.implicitUnits)&&(E=D);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=i,T();if(u.integer&&!Jm(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var I={name:t,value:e,strValue:""+e+(E||""),units:E,bypass:r};return u.unitless||E!=="px"&&E!=="em"?I.pfValue=e:I.pfValue=E==="px"||!E?e:this.getEmSizeInPixels()*e,(E==="ms"||E==="s")&&(I.pfValue=E==="ms"?e:1e3*e),(E==="deg"||E==="rad")&&(I.pfValue=E==="rad"?e:Wy(e)),E==="%"&&(I.pfValue=e/100),I}else if(u.propList){var R=[],F=""+e;if(F!=="none"){for(var _=F.split(/\s*,\s*|\s+/),H=0;H<_.length;H++){var k=_[H].trim();a.properties[k]?R.push(k):We("`"+k+"` is not a valid property name")}if(R.length===0)return null}return{name:t,value:R,strValue:R.length===0?"none":R.join(" "),bypass:r}}else if(u.color){var G=gy(e);return G?{name:t,value:G,pfValue:G,strValue:"rgb("+G[0]+","+G[1]+","+G[2]+")",bypass:r}:null}else if(u.regex||u.regexes){if(u.enums){var q=T();if(q)return q}for(var $=u.regexes?u.regexes:[u.regex],z=0;z<$.length;z++){var V=new RegExp($[z]),B=V.exec(e);if(B)return{name:t,value:u.singleRegexMatchValue?B[1]:B,strValue:""+e,bypass:r}}return null}else return u.string?{name:t,value:""+e,strValue:""+e,bypass:r}:u.enums?T():null};var Tt=function t(e){if(!(this instanceof t))return new t(e);if(!So(e)){it("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Dt=Tt.prototype;Dt.instanceString=function(){return"style"};Dt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var o=a[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};Dt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Dt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Dt.selector=function(t){var e=t==="core"?null:new Ar(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Dt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],o=r[a.name];o===void 0&&(o=r[ci(a.name)]),o!==void 0&&this.cssRule(a.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Dt.style=Dt.css;Dt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};Dt.append=function(t){return wu(t)?t.appendToStyle(this):Qe(t)?this.appendFromJson(t):Re(t)&&this.appendFromString(t),this};Tt.fromJson=function(t,e){var r=new Tt(t);return r.fromJson(e),r};Tt.fromString=function(t,e){return new Tt(t).fromString(e)};[Lt,ca,ko,Qt,bi,_o,mt,Ei].forEach(function(t){Fe(Dt,t)});Tt.types=Dt.types;Tt.properties=Dt.properties;Tt.propertyGroups=Dt.propertyGroups;Tt.propertyGroupNames=Dt.propertyGroupNames;Tt.propertyGroupKeys=Dt.propertyGroupKeys;var ib={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return wu(e)?r.style=e.generateStyle(this):Qe(e)?r.style=Tt.fromJson(this,e):Re(e)?r.style=Tt.fromString(this,e):r.style=Tt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},ob="single",Yr={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=ob),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,o,i,s;switch(e.length){case 0:return r;case 1:if(Re(e[0]))return n=e[0],r[n];if(Ue(e[0])){if(!this._private.panningEnabled)return this;o=e[0],i=o.x,s=o.y,we(i)&&(r.x=i),we(s)&&(r.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&we(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,o,i,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ue(e)&&(s=n[0],l=s.x,u=s.y,we(l)&&(a.x+=l),we(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:o=e,i=r,(o==="x"||o==="y")&&we(i)&&(a[o]+=i),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(we(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Re(e)){var a=e;e=this.$(a)}else if(ty(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Ft(e)||(e=this.mutableElements());if(!(Ft(e)&&e.empty())){n=n||e.boundingBox();var i=this.width(),s=this.height(),l;if(r=we(r)?r:0,!isNaN(i)&&!isNaN(s)&&i>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((i-2*r)/n.w,(s-2*r)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(i-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return we(e)&&we(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):we(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:we(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,o,i,s=!1;if(r.zoomingEnabled||(s=!0),we(e)?i=e:Ue(e)&&(i=e.level,e.position!=null?o=di(e.position,a,n):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!r.panningEnabled&&(s=!0)),i=i>r.maxZoom?r.maxZoom:i,i=i<r.minZoom?r.minZoom:i,s||!we(i)||i===a||o!=null&&(!we(o.x)||!we(o.y)))return null;if(o!=null){var l=n,u=a,f=i,h={x:-f/u*(o.x-l.x)+o.x,y:-f/u*(o.y-l.y)+o.y};return{zoomed:!0,panned:!0,zoom:f,pan:h}}else return{zoomed:!0,panned:!1,zoom:i,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,o=[],i=!1,s=!1;if(!e)return this;if(we(e.zoom)||(n=!1),Ue(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?i=!0:(r.zoom=l,o.push("zoom"))}if(a&&(!i||!e.cancelOnFailedZoom)&&r.panningEnabled){var u=e.pan;we(u.x)&&(r.pan.x=u.x,s=!1),we(u.y)&&(r.pan.y=u.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(!!this._private.panningEnabled){if(Re(e)){var n=e;e=this.mutableElements().filter(n)}else Ft(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),o=this.width(),i=this.height();r=r===void 0?this._private.zoom:r;var s={x:(o-r*(a.x1+a.x2))/2,y:(i-r*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container;return e.sizeCache=e.sizeCache||(r?function(){var n=rt.getComputedStyle(r),a=function(i){return parseFloat(n.getPropertyValue(i))};return{width:r.clientWidth-a("padding-left")-a("padding-right"),height:r.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Yr.centre=Yr.center;Yr.autolockNodes=Yr.autolock;Yr.autoungrabifyNodes=Yr.autoungrabify;var jn={data:qe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:qe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:qe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};jn.attr=jn.data;jn.removeAttr=jn.removeData;var ea=function(e){var r=this;e=Fe({},e);var n=e.container;n&&!$a(n)&&$a(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var o=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var i=rt!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Fe({name:i?"grid":"null"},s.layout),s.renderer=Fe({name:i?"canvas":"null"},s.renderer);var l=function(d,g,m){return g!==void 0?g:m!==void 0?m:d},u=this._private={container:n,ready:!1,options:s,elements:new wt(this),listeners:[],aniEles:new wt(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?i:s.styleEnabled,zoom:we(s.zoom)?s.zoom:1,pan:{x:Ue(s.pan)&&we(s.pan.x)?s.pan.x:0,y:Ue(s.pan)&&we(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function(d,g){var m=d.some(ry);if(m)return Sn.all(d).then(g);g(d)};u.styleEnabled&&r.setStyle([]);var h=Fe({},s,s.renderer);r.initRenderer(h);var v=function(d,g,m){r.notifications(!1);var p=r.mutableElements();p.length>0&&p.remove(),d!=null&&(Ue(d)||Qe(d))&&r.add(d),r.one("layoutready",function(w){r.notifications(!0),r.emit(w),r.one("load",g),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",m),r.emit("done")});var y=Fe({},r._private.options.layout);y.eles=r.elements(),r.layout(y).run()};f([s.style,s.elements],function(c){var d=c[0],g=c[1];u.styleEnabled&&r.style().append(d),v(g,function(){r.startAnimationLoop(),u.ready=!0,at(s.ready)&&r.on("ready",s.ready);for(var m=0;m<o.length;m++){var p=o[m];r.on("ready",p)}a&&(a.readies=[]),r.emit("ready")},s.done)})},Ka=ea.prototype;Fe(Ka,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!$a(e)&&$a(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(Fe({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Xt(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),o=function(x){return r.getElementById(x.id())};if(Ue(e)){if(r.startBatch(),e.elements){var i={},s=function(x,L){for(var A=[],S=[],N=0;N<x.length;N++){var M=x[N];if(!M.data.id){We("cy.json() cannot handle elements without an ID attribute");continue}var b=""+M.data.id,T=r.getElementById(b);i[b]=!0,T.length!==0?S.push({ele:T,json:M}):(L&&(M.group=L),A.push(M))}r.add(A);for(var E=0;E<S.length;E++){var D=S[E],C=D.ele,P=D.json;C.json(P)}};if(Qe(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var f=l[u],h=e.elements[f];Qe(h)&&s(h,f)}var v=r.collection();a.filter(function(w){return!i[w.id()]}).forEach(function(w){w.isParent()?v.merge(w):w.remove()}),v.forEach(function(w){return w.children().move({parent:null})}),v.forEach(function(w){return o(w).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var c=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<c.length;d++){var g=c[d];e[g]!=null&&r[g](e[g])}return r.endBatch(),this}else{var m=!!e,p={};m?p.elements=this.elements().map(function(w){return w.json()}):(p.elements={},a.forEach(function(w){var x=w.group();p.elements[x]||(p.elements[x]=[]),p.elements[x].push(w.json())})),this._private.styleEnabled&&(p.style=r.style().json()),p.data=Xt(r.data());var y=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=Xt(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=Xt(y.renderer),p.hideEdgesOnViewport=y.hideEdgesOnViewport,p.textureOnViewport=y.textureOnViewport,p.wheelSensitivity=y.wheelSensitivity,p.motionBlur=y.motionBlur,p.multiClickDebounceTime=y.multiClickDebounceTime,p}}});Ka.$id=Ka.getElementById;[Kw,eb,vf,ao,_a,rb,io,za,ib,Yr,jn].forEach(function(t){Fe(Ka,t)});var sb={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},an=function(e){return e.scratch("breadthfirst")},al=function(e,r){return e.scratch("breadthfirst",r)};function df(t){this.options=Fe({},sb,t)}df.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().filter(function(Q){return!Q.isParent()}),o=n,i=e.directed,s=e.maximal||e.maximalAdjustments>0,l=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u;if(Ft(e.roots))u=e.roots;else if(Qe(e.roots)){for(var f=[],h=0;h<e.roots.length;h++){var v=e.roots[h],c=r.getElementById(v);f.push(c)}u=r.collection(f)}else if(Re(e.roots))u=r.$(e.roots);else if(i)u=a.roots();else{var d=n.components();u=r.collection();for(var g=function(oe){var be=d[oe],me=be.maxDegree(!1),de=be.filter(function(ie){return ie.degree(!1)===me});u=u.add(de)},m=0;m<d.length;m++)g(m)}var p=[],y={},w=function(oe,be){p[be]==null&&(p[be]=[]);var me=p[be].length;p[be].push(oe),al(oe,{index:me,depth:be})},x=function(oe,be){var me=an(oe),de=me.depth,ie=me.index;p[de][ie]=null,w(oe,be)};o.bfs({roots:u,directed:e.directed,visit:function(oe,be,me,de,ie){var fe=oe[0],ye=fe.id();w(fe,ie),y[ye]=!0}});for(var L=[],A=0;A<a.length;A++){var S=a[A];y[S.id()]||L.push(S)}var N=function(oe){for(var be=p[oe],me=0;me<be.length;me++){var de=be[me];if(de==null){be.splice(me,1),me--;continue}al(de,{depth:oe,index:me})}},M=function(){for(var oe=0;oe<p.length;oe++)N(oe)},b=function(oe,be){for(var me=an(oe),de=oe.incomers().filter(function(O){return O.isNode()&&n.has(O)}),ie=-1,fe=oe.id(),ye=0;ye<de.length;ye++){var ce=de[ye],j=an(ce);ie=Math.max(ie,j.depth)}return me.depth<=ie?be[fe]?null:(x(oe,ie+1),be[fe]=!0,!0):!1};if(i&&s){var T=[],E={},D=function(oe){return T.push(oe)},C=function(){return T.shift()};for(a.forEach(function(Q){return T.push(Q)});T.length>0;){var P=C(),I=b(P,E);if(I)P.outgoers().filter(function(Q){return Q.isNode()&&n.has(Q)}).forEach(D);else if(I===null){We("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}M();var R=0;if(e.avoidOverlap)for(var F=0;F<a.length;F++){var _=a[F],H=_.layoutDimensions(e),k=H.w,G=H.h;R=Math.max(R,k,G)}var q={},$=function(oe){if(q[oe.id()])return q[oe.id()];for(var be=an(oe).depth,me=oe.neighborhood(),de=0,ie=0,fe=0;fe<me.length;fe++){var ye=me[fe];if(!(ye.isEdge()||ye.isParent()||!a.has(ye))){var ce=an(ye);if(ce!=null){var j=ce.index,O=ce.depth;if(!(j==null||O==null)){var X=p[O].length;O<be&&(de+=j/X,ie++)}}}}return ie=Math.max(1,ie),de=de/ie,ie===0&&(de=0),q[oe.id()]=de,de},z=function(oe,be){var me=$(oe),de=$(be),ie=me-de;return ie===0?Eu(oe.id(),be.id()):ie};e.depthSort!==void 0&&(z=e.depthSort);for(var V=0;V<p.length;V++)p[V].sort(z),N(V);for(var B=[],Y=0;Y<L.length;Y++)B.push(L[Y]);p.unshift(B),M();for(var W=0,J=0;J<p.length;J++)W=Math.max(p[J].length,W);var le={x:l.x1+l.w/2,y:l.x1+l.h/2},pe=p.reduce(function(Q,oe){return Math.max(Q,oe.length)},0),Oe=function(oe){var be=an(oe),me=be.depth,de=be.index,ie=p[me].length,fe=Math.max(l.w/((e.grid?pe:ie)+1),R),ye=Math.max(l.h/(p.length+1),R),ce=Math.min(l.w/2/p.length,l.h/2/p.length);if(ce=Math.max(ce,R),e.circle){var O=ce*me+ce-(p.length>0&&p[0].length<=3?ce/2:0),X=2*Math.PI/p[me].length*de;return me===0&&p[0].length===1&&(O=1),{x:le.x+O*Math.cos(X),y:le.y+O*Math.sin(X)}}else{var j={x:le.x+(de+1-(ie+1)/2)*fe,y:(me+1)*ye};return j}};return n.nodes().layoutPositions(this,e,Oe),this};var lb={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function gf(t){this.options=Fe({},lb,t)}gf.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=n.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var i=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:i.x1+i.w/2,y:i.y1+i.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,u=l/Math.max(1,o.length-1),f,h=0,v=0;v<o.length;v++){var c=o[v],d=c.layoutDimensions(e),g=d.w,m=d.h;h=Math.max(h,g,m)}if(we(e.radius)?f=e.radius:o.length<=1?f=0:f=Math.min(i.h,i.w)/2-h,o.length>1&&e.avoidOverlap){h*=1.75;var p=Math.cos(u)-Math.cos(0),y=Math.sin(u)-Math.sin(0),w=Math.sqrt(h*h/(p*p+y*y));f=Math.max(w,f)}var x=function(A,S){var N=e.startAngle+S*u*(a?1:-1),M=f*Math.cos(N),b=f*Math.sin(N),T={x:s.x+M,y:s.y+b};return T};return n.nodes().layoutPositions(this,e,x),this};var ub={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function pf(t){this.options=Fe({},ub,t)}pf.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,o=a.nodes().not(":parent"),i=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:i.x1+i.w/2,y:i.y1+i.h/2},l=[],u=0,f=0;f<o.length;f++){var h=o[f],v=void 0;v=e.concentric(h),l.push({value:v,node:h}),h._private.scratch.concentric=v}o.updateStyle();for(var c=0;c<o.length;c++){var d=o[c],g=d.layoutDimensions(e);u=Math.max(u,g.w,g.h)}l.sort(function(Q,oe){return oe.value-Q.value});for(var m=e.levelWidth(o),p=[[]],y=p[0],w=0;w<l.length;w++){var x=l[w];if(y.length>0){var L=Math.abs(y[0].value-x.value);L>=m&&(y=[],p.push(y))}y.push(x)}var A=u+e.minNodeSpacing;if(!e.avoidOverlap){var S=p.length>0&&p[0].length>1,N=Math.min(i.w,i.h)/2-A,M=N/(p.length+S?1:0);A=Math.min(A,M)}for(var b=0,T=0;T<p.length;T++){var E=p[T],D=e.sweep===void 0?2*Math.PI-2*Math.PI/E.length:e.sweep,C=E.dTheta=D/Math.max(1,E.length-1);if(E.length>1&&e.avoidOverlap){var P=Math.cos(C)-Math.cos(0),I=Math.sin(C)-Math.sin(0),R=Math.sqrt(A*A/(P*P+I*I));b=Math.max(R,b)}E.r=b,b+=A}if(e.equidistant){for(var F=0,_=0,H=0;H<p.length;H++){var k=p[H],G=k.r-_;F=Math.max(F,G)}_=0;for(var q=0;q<p.length;q++){var $=p[q];q===0&&(_=$.r),$.r=_,_+=F}}for(var z={},V=0;V<p.length;V++)for(var B=p[V],Y=B.dTheta,W=B.r,J=0;J<B.length;J++){var le=B[J],pe=e.startAngle+(r?1:-1)*Y*J,Oe={x:s.x+W*Math.cos(pe),y:s.y+W*Math.sin(pe)};z[le.node.id()]=Oe}return a.nodes().layoutPositions(this,e,function(Q){var oe=Q.id();return z[oe]}),this};var Hi,fb={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function xi(t){this.options=Fe({},fb,t),this.options.layout=this}xi.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?Hi=!0:Hi=!1;var n=hb(e,r,t);Hi&&db(n),t.randomize&&gb(n);var a=or(),o=function(){pb(n,e,t),t.fit===!0&&e.fit(t.padding)},i=function(v){return!(r.stopped||v>=t.numIter||(mb(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)o(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var v=t.eles.nodes(),c=mf(n,t,v);v.layoutPositions(r,t,c)}},l=0,u=!0;if(t.animate===!0){var f=function h(){for(var v=0;u&&v<t.refresh;)u=i(l),l++,v++;if(!u)ol(n,t),s();else{var c=or();c-a>=t.animationThreshold&&o(),Ya(h)}};f()}else{for(;u;)u=i(l),l++;ol(n,t),s()}return this};xi.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};xi.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var hb=function(e,r,n){for(var a=n.eles.edges(),o=n.eles.nodes(),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:It(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),l={},u=0;u<s.length;u++)for(var f=s[u],h=0;h<f.length;h++){var v=f[h];l[v.id()]=u}for(var u=0;u<i.nodeSize;u++){var c=o[u],d=c.layoutDimensions(n),g={};g.isLocked=c.locked(),g.id=c.data("id"),g.parentId=c.data("parent"),g.cmptId=l[c.id()],g.children=[],g.positionX=c.position("x"),g.positionY=c.position("y"),g.offsetX=0,g.offsetY=0,g.height=d.w,g.width=d.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(c.style("padding")),g.padRight=parseFloat(c.style("padding")),g.padTop=parseFloat(c.style("padding")),g.padBottom=parseFloat(c.style("padding")),g.nodeRepulsion=at(n.nodeRepulsion)?n.nodeRepulsion(c):n.nodeRepulsion,i.layoutNodes.push(g),i.idToIndex[g.id]=u}for(var m=[],p=0,y=-1,w=[],u=0;u<i.nodeSize;u++){var c=i.layoutNodes[u],x=c.parentId;x!=null?i.layoutNodes[i.idToIndex[x]].children.push(c.id):(m[++y]=c.id,w.push(c.id))}for(i.graphSet.push(w);p<=y;){var L=m[p++],A=i.idToIndex[L],v=i.layoutNodes[A],S=v.children;if(S.length>0){i.graphSet.push(S);for(var u=0;u<S.length;u++)m[++y]=S[u]}}for(var u=0;u<i.graphSet.length;u++)for(var N=i.graphSet[u],h=0;h<N.length;h++){var M=i.idToIndex[N[h]];i.indexToGraph[M]=u}for(var u=0;u<i.edgeSize;u++){var b=a[u],T={};T.id=b.data("id"),T.sourceId=b.data("source"),T.targetId=b.data("target");var E=at(n.idealEdgeLength)?n.idealEdgeLength(b):n.idealEdgeLength,D=at(n.edgeElasticity)?n.edgeElasticity(b):n.edgeElasticity,C=i.idToIndex[T.sourceId],P=i.idToIndex[T.targetId],I=i.indexToGraph[C],R=i.indexToGraph[P];if(I!=R){for(var F=cb(T.sourceId,T.targetId,i),_=i.graphSet[F],H=0,g=i.layoutNodes[C];_.indexOf(g.id)===-1;)g=i.layoutNodes[i.idToIndex[g.parentId]],H++;for(g=i.layoutNodes[P];_.indexOf(g.id)===-1;)g=i.layoutNodes[i.idToIndex[g.parentId]],H++;E*=H*n.nestingFactor}T.idealLength=E,T.elasticity=D,i.layoutEdges.push(T)}return i},cb=function(e,r,n){var a=vb(e,r,0,n);return 2>a.count?0:a.graph},vb=function t(e,r,n,a){var o=a.graphSet[n];if(-1<o.indexOf(e)&&-1<o.indexOf(r))return{count:2,graph:n};for(var i=0,s=0;s<o.length;s++){var l=o[s],u=a.idToIndex[l],f=a.layoutNodes[u].children;if(f.length!==0){var h=a.indexToGraph[a.idToIndex[f[0]]],v=t(e,r,h,a);if(v.count!==0)if(v.count===1){if(i++,i===2)break}else return v}}return{count:i,graph:n}},db,gb=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,o=0;o<e.nodeSize;o++){var i=e.layoutNodes[o];i.children.length===0&&!i.isLocked&&(i.positionX=Math.random()*n,i.positionY=Math.random()*a)}},mf=function(e,r,n){var a=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(i){var s=e.layoutNodes[e.idToIndex[i.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(i,s){var l=e.layoutNodes[e.idToIndex[i.data("id")]];if(r.boundingBox){var u=(l.positionX-o.x1)/o.w,f=(l.positionY-o.y1)/o.h;return{x:a.x1+u*a.w,y:a.y1+f*a.h}}else return{x:l.positionX,y:l.positionY}}},pb=function(e,r,n){var a=n.layout,o=n.eles.nodes(),i=mf(e,n,o);o.positions(i),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},mb=function(e,r,n){yb(e,r),Eb(e),xb(e,r),Tb(e),Cb(e)},yb=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],o=a.length,i=0;i<o;i++)for(var s=e.layoutNodes[e.idToIndex[a[i]]],l=i+1;l<o;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];wb(s,u,e,r)}},il=function(e){return-e+2*e*Math.random()},wb=function(e,r,n,a){var o=e.cmptId,i=r.cmptId;if(!(o!==i&&!n.isCompound)){var s=r.positionX-e.positionX,l=r.positionY-e.positionY,u=1;s===0&&l===0&&(s=il(u),l=il(u));var f=bb(e,r,s,l);if(f>0)var h=a.nodeOverlap*f,v=Math.sqrt(s*s+l*l),c=h*s/v,d=h*l/v;else var g=Za(e,s,l),m=Za(r,-1*s,-1*l),p=m.x-g.x,y=m.y-g.y,w=p*p+y*y,v=Math.sqrt(w),h=(e.nodeRepulsion+r.nodeRepulsion)/w,c=h*p/v,d=h*y/v;e.isLocked||(e.offsetX-=c,e.offsetY-=d),r.isLocked||(r.offsetX+=c,r.offsetY+=d)}},bb=function(e,r,n,a){if(n>0)var o=e.maxX-r.minX;else var o=r.maxX-e.minX;if(a>0)var i=e.maxY-r.minY;else var i=r.maxY-e.minY;return o>=0&&i>=0?Math.sqrt(o*o+i*i):0},Za=function(e,r,n){var a=e.positionX,o=e.positionY,i=e.height||1,s=e.width||1,l=n/r,u=i/s,f={};return r===0&&0<n||r===0&&0>n?(f.x=a,f.y=o+i/2,f):0<r&&-1*u<=l&&l<=u?(f.x=a+s/2,f.y=o+s*n/2/r,f):0>r&&-1*u<=l&&l<=u?(f.x=a-s/2,f.y=o-s*n/2/r,f):0<n&&(l<=-1*u||l>=u)?(f.x=a+i*r/2/n,f.y=o+i/2,f):(0>n&&(l<=-1*u||l>=u)&&(f.x=a-i*r/2/n,f.y=o-i/2),f)},Eb=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],o=e.idToIndex[a.sourceId],i=e.layoutNodes[o],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-i.positionX,f=l.positionY-i.positionY;if(!(u===0&&f===0)){var h=Za(i,u,f),v=Za(l,-1*u,-1*f),c=v.x-h.x,d=v.y-h.y,g=Math.sqrt(c*c+d*d),m=Math.pow(a.idealLength-g,2)/a.elasticity;if(g!==0)var p=m*c/g,y=m*d/g;else var p=0,y=0;i.isLocked||(i.offsetX+=p,i.offsetY+=y),l.isLocked||(l.offsetX-=p,l.offsetY-=y)}}},xb=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var o=e.graphSet[a],i=o.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[o[0]]],f=e.layoutNodes[e.idToIndex[u.parentId]],s=f.positionX,l=f.positionY;for(var h=0;h<i;h++){var v=e.layoutNodes[e.idToIndex[o[h]]];if(!v.isLocked){var c=s-v.positionX,d=l-v.positionY,g=Math.sqrt(c*c+d*d);if(g>n){var m=r.gravity*c/g,p=r.gravity*d/g;v.offsetX+=m,v.offsetY+=p}}}}},Tb=function(e,r){var n=[],a=0,o=-1;for(n.push.apply(n,e.graphSet[0]),o+=e.graphSet[0].length;a<=o;){var i=n[a++],s=e.idToIndex[i],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var f=l.offsetX,h=l.offsetY,v=0;v<u.length;v++){var c=e.layoutNodes[e.idToIndex[u[v]]];c.offsetX+=f,c.offsetY+=h,n[++o]=u[v]}l.offsetX=0,l.offsetY=0}}},Cb=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var o=Sb(a.offsetX,a.offsetY,e.temperature);a.positionX+=o.x,a.positionY+=o.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,Db(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Sb=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var o={x:n*e/a,y:n*r/a};else var o={x:e,y:r};return o},Db=function t(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],o=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,o=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,o=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,o=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,o=!0),o)return t(a,r)}},ol=function(e,r){for(var n=e.layoutNodes,a=[],o=0;o<n.length;o++){var i=n[o],s=i.cmptId,l=a[s]=a[s]||[];l.push(i)}for(var u=0,o=0;o<a.length;o++){var f=a[o];if(!!f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var h=0;h<f.length;h++){var v=f[h];f.x1=Math.min(f.x1,v.positionX-v.width/2),f.x2=Math.max(f.x2,v.positionX+v.width/2),f.y1=Math.min(f.y1,v.positionY-v.height/2),f.y2=Math.max(f.y2,v.positionY+v.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,u+=f.w*f.h}}a.sort(function(y,w){return w.w*w.h-y.w*y.h});for(var c=0,d=0,g=0,m=0,p=Math.sqrt(u)*e.clientWidth/e.clientHeight,o=0;o<a.length;o++){var f=a[o];if(!!f){for(var h=0;h<f.length;h++){var v=f[h];v.isLocked||(v.positionX+=c-f.x1,v.positionY+=d-f.y1)}c+=f.w+r.componentSpacing,g+=f.w+r.componentSpacing,m=Math.max(m,f.h),g>p&&(d+=m+r.componentSpacing,c=0,g=0,m=0)}}},Lb={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function yf(t){this.options=Fe({},Lb,t)}yf.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var o=It(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(o.h===0||o.w===0)n.nodes().layoutPositions(this,e,function(q){return{x:o.x1,y:o.y1}});else{var i=a.size(),s=Math.sqrt(i*o.h/o.w),l=Math.round(s),u=Math.round(o.w/o.h*s),f=function($){if($==null)return Math.min(l,u);var z=Math.min(l,u);z==l?l=$:u=$},h=function($){if($==null)return Math.max(l,u);var z=Math.max(l,u);z==l?l=$:u=$},v=e.rows,c=e.cols!=null?e.cols:e.columns;if(v!=null&&c!=null)l=v,u=c;else if(v!=null&&c==null)l=v,u=Math.ceil(i/l);else if(v==null&&c!=null)u=c,l=Math.ceil(i/u);else if(u*l>i){var d=f(),g=h();(d-1)*g>=i?f(d-1):(g-1)*d>=i&&h(g-1)}else for(;u*l<i;){var m=f(),p=h();(p+1)*m>=i?h(p+1):f(m+1)}var y=o.w/u,w=o.h/l;if(e.condense&&(y=0,w=0),e.avoidOverlap)for(var x=0;x<a.length;x++){var L=a[x],A=L._private.position;(A.x==null||A.y==null)&&(A.x=0,A.y=0);var S=L.layoutDimensions(e),N=e.avoidOverlapPadding,M=S.w+N,b=S.h+N;y=Math.max(y,M),w=Math.max(w,b)}for(var T={},E=function($,z){return!!T["c-"+$+"-"+z]},D=function($,z){T["c-"+$+"-"+z]=!0},C=0,P=0,I=function(){P++,P>=u&&(P=0,C++)},R={},F=0;F<a.length;F++){var _=a[F],H=e.position(_);if(H&&(H.row!==void 0||H.col!==void 0)){var k={row:H.row,col:H.col};if(k.col===void 0)for(k.col=0;E(k.row,k.col);)k.col++;else if(k.row===void 0)for(k.row=0;E(k.row,k.col);)k.row++;R[_.id()]=k,D(k.row,k.col)}}var G=function($,z){var V,B;if($.locked()||$.isParent())return!1;var Y=R[$.id()];if(Y)V=Y.col*y+y/2+o.x1,B=Y.row*w+w/2+o.y1;else{for(;E(C,P);)I();V=P*y+y/2+o.x1,B=C*w+w/2+o.y1,D(C,P),I()}return{x:V,y:B}};a.layoutPositions(this,e,G)}return this};var Nb={ready:function(){},stop:function(){}};function zo(t){this.options=Fe({},Nb,t)}zo.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};zo.prototype.stop=function(){return this};var Mb={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function wf(t){this.options=Fe({},Mb,t)}wf.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=at(t.positions);function a(o){if(t.positions==null)return Vy(o.position());if(n)return t.positions(o);var i=t.positions[o._private.data.id];return i==null?null:i}return r.layoutPositions(this,t,function(o,i){var s=a(o);return o.locked()||s==null?!1:s}),this};var Ab={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function bf(t){this.options=Fe({},Ab,t)}bf.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=It(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(i,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var Ob=[{name:"breadthfirst",impl:df},{name:"circle",impl:gf},{name:"concentric",impl:pf},{name:"cose",impl:xi},{name:"grid",impl:yf},{name:"null",impl:zo},{name:"preset",impl:wf},{name:"random",impl:bf}];function Ef(t){this.options=t,this.notifications=0}var sl=function(){},ll=function(){throw new Error("A headless instance can not render images")};Ef.prototype={recalculateRenderedStyle:sl,notify:function(){this.notifications++},init:sl,isHeadless:function(){return!0},png:ll,jpg:ll};var Go={};Go.arrowShapeWidth=.3;Go.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(u,f,h,v,c,d,g){var m=c.x-h/2-g,p=c.x+h/2+g,y=c.y-h/2-g,w=c.y+h/2+g,x=m<=u&&u<=p&&y<=f&&f<=w;return x},n=function(u,f,h,v,c){var d=u*Math.cos(v)-f*Math.sin(v),g=u*Math.sin(v)+f*Math.cos(v),m=d*h,p=g*h,y=m+c.x,w=p+c.y;return{x:y,y:w}},a=function(u,f,h,v){for(var c=[],d=0;d<u.length;d+=2){var g=u[d],m=u[d+1];c.push(n(g,m,f,h,v))}return c},o=function(u){for(var f=[],h=0;h<u.length;h++){var v=u[h];f.push(v.x,v.y)}return f},i=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,f){Re(f)&&(f=t[f]),t[u]=Fe({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(v,c,d,g,m,p){var y=o(a(this.points,d+2*p,g,m)),w=Rt(v,c,y);return w},roughCollide:r,draw:function(v,c,d,g){var m=a(this.points,c,d,g);e.arrowShapeImpl("polygon")(v,m)},spacing:function(v){return 0},gap:i},f)};s("none",{collide:qa,roughCollide:qa,draw:No,spacing:Ts,gap:Ts}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(u,f,h,v,c){var d=a(this.points,f,h,v),g=this.controlPoint,m=n(g[0],g[1],f,h,v);e.arrowShapeImpl(this.name)(u,d,m)},gap:function(u){return i(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,f,h,v,c,d,g){var m=o(a(this.points,h+2*g,v,c)),p=o(a(this.pointsTee,h+2*g,v,c)),y=Rt(u,f,m)||Rt(u,f,p);return y},draw:function(u,f,h,v,c){var d=a(this.points,f,h,v),g=a(this.pointsTee,f,h,v);e.arrowShapeImpl(this.name)(u,d,g)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,f,h,v,c,d,g){var m=c,p=Math.pow(m.x-u,2)+Math.pow(m.y-f,2)<=Math.pow((h+2*g)*this.radius,2),y=o(a(this.points,h+2*g,v,c));return Rt(u,f,y)||p},draw:function(u,f,h,v,c){var d=a(this.pointsTr,f,h,v);e.arrowShapeImpl(this.name)(u,d,v.x,v.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,f){var h=this.baseCrossLinePts.slice(),v=f/u,c=3,d=5;return h[c]=h[c]-v,h[d]=h[d]-v,h},collide:function(u,f,h,v,c,d,g){var m=o(a(this.points,h+2*g,v,c)),p=o(a(this.crossLinePts(h,d),h+2*g,v,c)),y=Rt(u,f,m)||Rt(u,f,p);return y},draw:function(u,f,h,v,c){var d=a(this.points,f,h,v),g=a(this.crossLinePts(f,c),f,h,v);e.arrowShapeImpl(this.name)(u,d,g)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return i(u)*.525}}),s("circle",{radius:.15,collide:function(u,f,h,v,c,d,g){var m=c,p=Math.pow(m.x-u,2)+Math.pow(m.y-f,2)<=Math.pow((h+2*g)*this.radius,2);return p},draw:function(u,f,h,v,c){e.arrowShapeImpl(this.name)(u,v.x,v.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Zr={};Zr.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],o=n[1],i=n[4],s=r.pan(),l=r.zoom(),u=((t-a)/i-s.x)/l,f=((e-o)/i-s.y)/l;return[u,f]};Zr.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=rt.getComputedStyle(t),n=function(p){return parseFloat(r.getPropertyValue(p))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},o={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},i=t.clientWidth,s=t.clientHeight,l=a.left+a.right,u=a.top+a.bottom,f=o.left+o.right,h=e.width/(i+f),v=i-l,c=s-u,d=e.left+a.left+o.left,g=e.top+a.top+o.top;return this.containerBB=[d,g,v,c,h]};Zr.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Zr.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};Zr.findNearestElements=function(t,e,r,n){var a=this,o=this,i=o.getCachedZSortedEles(),s=[],l=o.cy.zoom(),u=o.cy.hasCompoundNodes(),f=(n?24:8)/l,h=(n?8:2)/l,v=(n?8:2)/l,c=1/0,d,g;r&&(i=i.interactive);function m(S,N){if(S.isNode()){if(g)return;g=S,s.push(S)}if(S.isEdge()&&(N==null||N<c))if(d){if(d.pstyle("z-compound-depth").value===S.pstyle("z-compound-depth").value&&d.pstyle("z-compound-depth").value===S.pstyle("z-compound-depth").value){for(var M=0;M<s.length;M++)if(s[M].isEdge()){s[M]=S,d=S,c=N!=null?N:c;break}}}else s.push(S),d=S,c=N!=null?N:c}function p(S){var N=S.outerWidth()+2*h,M=S.outerHeight()+2*h,b=N/2,T=M/2,E=S.position();if(E.x-b<=t&&t<=E.x+b&&E.y-T<=e&&e<=E.y+T){var D=o.nodeShapes[a.getNodeShape(S)];if(D.checkPoint(t,e,0,N,M,E.x,E.y))return m(S,0),!0}}function y(S){var N=S._private,M=N.rscratch,b=S.pstyle("width").pfValue,T=S.pstyle("arrow-scale").value,E=b/2+f,D=E*E,C=E*2,F=N.source,_=N.target,P;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack"){for(var I=M.allpts,R=0;R+3<I.length;R+=2)if(t0(t,e,I[R],I[R+1],I[R+2],I[R+3],C)&&D>(P=o0(t,e,I[R],I[R+1],I[R+2],I[R+3])))return m(S,P),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"){for(var I=M.allpts,R=0;R+5<M.allpts.length;R+=4)if(r0(t,e,I[R],I[R+1],I[R+2],I[R+3],I[R+4],I[R+5],C)&&D>(P=i0(t,e,I[R],I[R+1],I[R+2],I[R+3],I[R+4],I[R+5])))return m(S,P),!0}for(var F=F||N.source,_=_||N.target,H=a.getArrowWidth(b,T),k=[{name:"source",x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}],R=0;R<k.length;R++){var G=k[R],q=o.arrowShapes[S.pstyle(G.name+"-arrow-shape").value],$=S.pstyle("width").pfValue;if(q.roughCollide(t,e,H,G.angle,{x:G.x,y:G.y},$,f)&&q.collide(t,e,H,G.angle,{x:G.x,y:G.y},$,f))return m(S),!0}u&&s.length>0&&(p(F),p(_))}function w(S,N,M){return $t(S,N,M)}function x(S,N){var M=S._private,b=v,T;N?T=N+"-":T="",S.boundingBox();var E=M.labelBounds[N||"main"],D=S.pstyle(T+"label").value,C=S.pstyle("text-events").strValue==="yes";if(!(!C||!D)){var P=w(M.rscratch,"labelX",N),I=w(M.rscratch,"labelY",N),R=w(M.rscratch,"labelAngle",N),F=S.pstyle(T+"text-margin-x").pfValue,_=S.pstyle(T+"text-margin-y").pfValue,H=E.x1-b-F,k=E.x2+b-F,G=E.y1-b-_,q=E.y2+b-_;if(R){var $=Math.cos(R),z=Math.sin(R),V=function(Oe,Q){return Oe=Oe-P,Q=Q-I,{x:Oe*$-Q*z+P,y:Oe*z+Q*$+I}},B=V(H,G),Y=V(H,q),W=V(k,G),J=V(k,q),le=[B.x+F,B.y+_,W.x+F,W.y+_,J.x+F,J.y+_,Y.x+F,Y.y+_];if(Rt(t,e,le))return m(S),!0}else if(mn(E,t,e))return m(S),!0}}for(var L=i.length-1;L>=0;L--){var A=i[L];A.isNode()?p(A)||x(A):y(A)||x(A)||x(A,"source")||x(A,"target")}return s};Zr.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,o=[],i=Math.min(t,r),s=Math.max(t,r),l=Math.min(e,n),u=Math.max(e,n);t=i,r=s,e=l,n=u;for(var f=It({x1:t,y1:e,x2:r,y2:n}),h=0;h<a.length;h++){var v=a[h];if(v.isNode()){var c=v,d=c.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Oo(f,d)&&!Pu(d,f)&&o.push(c)}else{var g=v,m=g._private,p=m.rscratch;if(p.startX!=null&&p.startY!=null&&!mn(f,p.startX,p.startY)||p.endX!=null&&p.endY!=null&&!mn(f,p.endX,p.endY))continue;if(p.edgeType==="bezier"||p.edgeType==="multibezier"||p.edgeType==="self"||p.edgeType==="compound"||p.edgeType==="segments"||p.edgeType==="haystack"){for(var y=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,w=!0,x=0;x<y.length;x++)if(!e0(f,y[x])){w=!1;break}w&&o.push(g)}else(p.edgeType==="haystack"||p.edgeType==="straight")&&o.push(g)}}return o};var Qa={};Qa.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",o=e.edgeType==="segments",i=e.edgeType==="compound",s=e.edgeType==="self",l,u,f,h,v,c,p,y;if(r?(f=e.haystackPts[0],h=e.haystackPts[1],v=e.haystackPts[2],c=e.haystackPts[3]):(f=e.arrowStartX,h=e.arrowStartY,v=e.arrowEndX,c=e.arrowEndY),p=e.midX,y=e.midY,o)l=f-e.segpts[0],u=h-e.segpts[1];else if(a||i||s||n){var d=e.allpts,g=gt(d[0],d[2],d[4],.1),m=gt(d[1],d[3],d[5],.1);l=f-g,u=h-m}else l=f-p,u=h-y;e.srcArrowAngle=xa(l,u);var p=e.midX,y=e.midY;if(r&&(p=(f+v)/2,y=(h+c)/2),l=v-f,u=c-h,o){var d=e.allpts;if(d.length/2%2===0){var w=d.length/2,x=w-2;l=d[w]-d[x],u=d[w+1]-d[x+1]}else{var w=d.length/2-1,x=w-2,L=w+2;l=d[w]-d[x],u=d[w+1]-d[x+1]}}else if(a||i||s){var d=e.allpts,A=e.ctrlpts,S,N,M,b;if(A.length/2%2===0){var T=d.length/2-1,E=T+2,D=E+2;S=gt(d[T],d[E],d[D],0),N=gt(d[T+1],d[E+1],d[D+1],0),M=gt(d[T],d[E],d[D],1e-4),b=gt(d[T+1],d[E+1],d[D+1],1e-4)}else{var E=d.length/2-1,T=E-2,D=E+2;S=gt(d[T],d[E],d[D],.4999),N=gt(d[T+1],d[E+1],d[D+1],.4999),M=gt(d[T],d[E],d[D],.5),b=gt(d[T+1],d[E+1],d[D+1],.5)}l=M-S,u=b-N}if(e.midtgtArrowAngle=xa(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,o){var d=e.allpts;if(d.length/2%2!==0){var w=d.length/2-1,L=w+2;l=-(d[L]-d[w]),u=-(d[L+1]-d[w+1])}}if(e.midsrcArrowAngle=xa(l,u),o)l=v-e.segpts[e.segpts.length-2],u=c-e.segpts[e.segpts.length-1];else if(a||i||s||n){var d=e.allpts,C=d.length,g=gt(d[C-6],d[C-4],d[C-2],.9),m=gt(d[C-5],d[C-3],d[C-1],.9);l=v-g,u=c-m}else l=v-p,u=c-y;e.tgtArrowAngle=xa(l,u)};Qa.getArrowWidth=Qa.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Mt={};Mt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var o=Math.random()*2*Math.PI;a.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,a.target={x:Math.cos(o),y:Math.sin(o)}}var i=n.source,s=n.target,l=i.position(),u=s.position(),f=i.width(),h=s.width(),v=i.height(),c=s.height(),d=r.pstyle("haystack-radius").value,g=d/2;a.haystackPts=a.allpts=[a.source.x*f*g+l.x,a.source.y*v*g+l.y,a.target.x*h*g+u.x,a.target.y*c*g+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Mt.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=e.posPts,a=e.intersectionPts,o=e.vectorNormInverse,i=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),l=t.pstyle("segment-distances"),u=Math.min(s.pfValue.length,l.pfValue.length);r.edgeType="segments",r.segpts=[];for(var f=0;f<u;f++){var h=s.pfValue[f],v=l.pfValue[f],c=1-h,d=h,g=i==="node-position"?n:a,m={x:g.x1*c+g.x2*d,y:g.y1*c+g.y2*d};r.segpts.push(m.x+o.x*v,m.y+o.y*v)}};Mt.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,o=e.dirCounts,i=e.srcPos,s=t.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,h=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var v=r,c=h;n&&(v=0,c=l);var d=u-Math.PI/2,g=d-f/2,m=d+f/2,p=String(u+"_"+f);v=o[p]===void 0?o[p]=0:++o[p],a.ctrlpts=[i.x+Math.cos(g)*1.4*c*(v/3+1),i.y+Math.sin(g)*1.4*c*(v/3+1),i.x+Math.cos(m)*1.4*c*(v/3+1),i.y+Math.sin(m)*1.4*c*(v/3+1)]};Mt.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var o=e.srcPos,i=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,f=e.tgtH,h=t.pstyle("control-point-step-size").pfValue,v=t.pstyle("control-point-distances"),c=v?v.pfValue[0]:void 0,d=r,g=h;n&&(d=0,g=c);var m=50,p={x:o.x-s/2,y:o.y-l/2},y={x:i.x-u/2,y:i.y-f/2},w={x:Math.min(p.x,y.x),y:Math.min(p.y,y.y)},x=.5,L=Math.max(x,Math.log(s*.01)),A=Math.max(x,Math.log(u*.01));a.ctrlpts=[w.x,w.y-(1+Math.pow(m,1.12)/100)*g*(d/3+1)*L,w.x-(1+Math.pow(m,1.12)/100)*g*(d/3+1)*A,w.y]};Mt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Mt.findBezierPoints=function(t,e,r,n,a){var o=t._private.rscratch,i=e.vectorNormInverse,s=e.posPts,l=e.intersectionPts,u=t.pstyle("edge-distances").value,f=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),v=t.pstyle("control-point-weights"),c=h&&v?Math.min(h.value.length,v.value.length):1,d=h?h.pfValue[0]:void 0,g=v.value[0],m=n;o.edgeType=m?"multibezier":"bezier",o.ctrlpts=[];for(var p=0;p<c;p++){var y=(.5-e.eles.length/2+r)*f*(a?-1:1),w=void 0,x=Iu(y);m&&(d=h?h.pfValue[p]:f,g=v.value[p]),n?w=d:w=d!==void 0?x*d:void 0;var L=w!==void 0?w:y,A=1-g,S=g,N=u==="node-position"?s:l,M={x:N.x1*A+N.x2*S,y:N.y1*A+N.y2*S};o.ctrlpts.push(M.x+i.x*L,M.y+i.y*L)}};Mt.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",o="leftward",i="rightward",s="downward",l="upward",u="auto",f=e.posPts,h=e.srcW,v=e.srcH,c=e.tgtW,d=e.tgtH,g=t.pstyle("edge-distances").value,m=g!=="node-position",p=t.pstyle("taxi-direction").value,y=p,w=t.pstyle("taxi-turn"),x=w.units==="%",L=w.pfValue,A=L<0,S=t.pstyle("taxi-turn-min-distance").pfValue,N=m?(h+c)/2:0,M=m?(v+d)/2:0,b=f.x2-f.x1,T=f.y2-f.y1,E=function(ae,se){return ae>0?Math.max(ae-se,0):Math.min(ae+se,0)},D=E(b,N),C=E(T,M),P=!1;y===u?p=Math.abs(D)>Math.abs(C)?a:n:y===l||y===s?(p=n,P=!0):(y===o||y===i)&&(p=a,P=!0);var I=p===n,R=I?C:D,F=I?T:b,_=Iu(F),H=!1;!(P&&(x||A))&&(y===s&&F<0||y===l&&F>0||y===o&&F>0||y===i&&F<0)&&(_*=-1,R=_*Math.abs(R),H=!0);var k;if(x){var G=L<0?1+L:L;k=G*R}else{var q=L<0?R:0;k=q+L*_}var $=function(ae){return Math.abs(ae)<S||Math.abs(ae)>=Math.abs(R)},z=$(k),V=$(Math.abs(R)-Math.abs(k)),B=z||V;if(B&&!H)if(I){var Y=Math.abs(F)<=v/2,W=Math.abs(b)<=c/2;if(Y){var J=(f.x1+f.x2)/2,le=f.y1,pe=f.y2;r.segpts=[J,le,J,pe]}else if(W){var Oe=(f.y1+f.y2)/2,Q=f.x1,oe=f.x2;r.segpts=[Q,Oe,oe,Oe]}else r.segpts=[f.x1,f.y2]}else{var be=Math.abs(F)<=h/2,me=Math.abs(T)<=d/2;if(be){var de=(f.y1+f.y2)/2,ie=f.x1,fe=f.x2;r.segpts=[ie,de,fe,de]}else if(me){var ye=(f.x1+f.x2)/2,ce=f.y1,j=f.y2;r.segpts=[ye,ce,ye,j]}else r.segpts=[f.x2,f.y1]}else if(I){var O=f.y1+k+(m?v/2*_:0),X=f.x1,te=f.x2;r.segpts=[X,O,te,O]}else{var ee=f.x1+k+(m?h/2*_:0),U=f.y1,re=f.y2;r.segpts=[ee,U,ee,re]}};Mt.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,o=e.srcW,i=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,f=e.tgtShape,h=!we(r.startX)||!we(r.startY),v=!we(r.arrowStartX)||!we(r.arrowStartY),c=!we(r.endX)||!we(r.endY),d=!we(r.arrowEndX)||!we(r.arrowEndY),g=3,m=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,p=g*m,y=Hr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=y<p,x=Hr({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),L=x<p,A=!1;if(h||v||w){A=!0;var S={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},N=Math.sqrt(S.x*S.x+S.y*S.y),M={x:S.x/N,y:S.y/N},b=Math.max(o,i),T={x:r.ctrlpts[0]+M.x*2*b,y:r.ctrlpts[1]+M.y*2*b},E=u.intersectLine(n.x,n.y,o,i,T.x,T.y,0);w?(r.ctrlpts[0]=r.ctrlpts[0]+M.x*(p-y),r.ctrlpts[1]=r.ctrlpts[1]+M.y*(p-y)):(r.ctrlpts[0]=E[0]+M.x*p,r.ctrlpts[1]=E[1]+M.y*p)}if(c||d||L){A=!0;var D={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},C=Math.sqrt(D.x*D.x+D.y*D.y),P={x:D.x/C,y:D.y/C},I=Math.max(o,i),R={x:r.ctrlpts[0]+P.x*2*I,y:r.ctrlpts[1]+P.y*2*I},F=f.intersectLine(a.x,a.y,s,l,R.x,R.y,0);L?(r.ctrlpts[0]=r.ctrlpts[0]+P.x*(p-x),r.ctrlpts[1]=r.ctrlpts[1]+P.y*(p-x)):(r.ctrlpts[0]=F[0]+P.x*p,r.ctrlpts[1]=F[1]+P.y*p)}A&&this.findEndpoints(t)}};Mt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=gt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=gt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments")if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4===0){var o=e.segpts.length/2,i=o-2;e.midX=(e.segpts[i]+e.segpts[o])/2,e.midY=(e.segpts[i+1]+e.segpts[o+1])/2}else{var s=e.segpts.length/2-1;e.midX=e.segpts[s],e.midY=e.segpts[s+1]}};Mt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||we(e.startX)&&we(e.startY)&&we(e.endX)&&we(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,We("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Mt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),o={map:new Kt,get:function(S){var N=this.map.get(S[0]);return N!=null?N.get(S[1]):null},set:function(S,N){var M=this.map.get(S[0]);M==null&&(M=new Kt,this.map.set(S[0],M)),M.set(S[1],N)}},i=[],s=[],l=0;l<t.length;l++){var u=t[l],f=u._private,h=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(h==="haystack"){s.push(u);continue}var v=h==="unbundled-bezier"||h==="segments"||h==="straight"||h==="straight-triangle"||h==="taxi",c=h==="unbundled-bezier"||h==="bezier",d=f.source,g=f.target,m=d.poolIndex(),p=g.poolIndex(),y=[m,p].sort(),w=o.get(y);w==null&&(w={eles:[]},o.set(y,w),i.push(y)),w.eles.push(u),v&&(w.hasUnbundled=!0),c&&(w.hasBezier=!0)}}for(var x=function(S){var N=i[S],M=o.get(N),b=void 0;if(!M.hasUnbundled){var T=M.eles[0].parallelEdges().filter(function(j){return j.isBundledBezier()});Mo(M.eles),T.forEach(function(j){return M.eles.push(j)}),M.eles.sort(function(j,O){return j.poolIndex()-O.poolIndex()})}var E=M.eles[0],D=E.source(),C=E.target();if(D.poolIndex()>C.poolIndex()){var P=D;D=C,C=P}var I=M.srcPos=D.position(),R=M.tgtPos=C.position(),F=M.srcW=D.outerWidth(),_=M.srcH=D.outerHeight(),H=M.tgtW=C.outerWidth(),k=M.tgtH=C.outerHeight(),G=M.srcShape=r.nodeShapes[e.getNodeShape(D)],q=M.tgtShape=r.nodeShapes[e.getNodeShape(C)];M.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<M.eles.length;$++){var z=M.eles[$],V=z[0]._private.rscratch,B=z.pstyle("curve-style").value,Y=B==="unbundled-bezier"||B==="segments"||B==="taxi",W=!D.same(z.source());if(!M.calculatedIntersection&&D!==C&&(M.hasBezier||M.hasUnbundled)){M.calculatedIntersection=!0;var J=G.intersectLine(I.x,I.y,F,_,R.x,R.y,0),le=M.srcIntn=J,pe=q.intersectLine(R.x,R.y,H,k,I.x,I.y,0),Oe=M.tgtIntn=pe,Q=M.intersectionPts={x1:J[0],x2:pe[0],y1:J[1],y2:pe[1]},oe=M.posPts={x1:I.x,x2:R.x,y1:I.y,y2:R.y},be=pe[1]-J[1],me=pe[0]-J[0],de=Math.sqrt(me*me+be*be),ie=M.vector={x:me,y:be},fe=M.vectorNorm={x:ie.x/de,y:ie.y/de},ye={x:-fe.y,y:fe.x};M.nodesOverlap=!we(de)||q.checkPoint(J[0],J[1],0,H,k,R.x,R.y)||G.checkPoint(pe[0],pe[1],0,F,_,I.x,I.y),M.vectorNormInverse=ye,b={nodesOverlap:M.nodesOverlap,dirCounts:M.dirCounts,calculatedIntersection:!0,hasBezier:M.hasBezier,hasUnbundled:M.hasUnbundled,eles:M.eles,srcPos:R,tgtPos:I,srcW:H,srcH:k,tgtW:F,tgtH:_,srcIntn:Oe,tgtIntn:le,srcShape:q,tgtShape:G,posPts:{x1:oe.x2,y1:oe.y2,x2:oe.x1,y2:oe.y1},intersectionPts:{x1:Q.x2,y1:Q.y2,x2:Q.x1,y2:Q.y1},vector:{x:-ie.x,y:-ie.y},vectorNorm:{x:-fe.x,y:-fe.y},vectorNormInverse:{x:-ye.x,y:-ye.y}}}var ce=W?b:M;V.nodesOverlap=ce.nodesOverlap,V.srcIntn=ce.srcIntn,V.tgtIntn=ce.tgtIntn,a&&(D.isParent()||D.isChild()||C.isParent()||C.isChild())&&(D.parents().anySame(C)||C.parents().anySame(D)||D.same(C)&&D.isParent())?e.findCompoundLoopPoints(z,ce,$,Y):D===C?e.findLoopPoints(z,ce,$,Y):B==="segments"?e.findSegmentsPoints(z,ce):B==="taxi"?e.findTaxiPoints(z,ce):B==="straight"||!Y&&M.eles.length%2===1&&$===Math.floor(M.eles.length/2)?e.findStraightEdgePoints(z):e.findBezierPoints(z,ce,$,Y,W),e.findEndpoints(z),e.tryToCorrectInvalidPoints(z,ce),e.checkForInvalidEdgeWarning(z),e.storeAllpts(z),e.storeEdgeProjections(z),e.calculateArrowAngles(z),e.recalculateEdgeLabelProjections(z),e.calculateLabelAngles(z)}},L=0;L<i.length;L++)x(L);this.findHaystackPoints(s)}};function xf(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Mt.getSegmentPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="segments")return this.recalculateRenderedStyle(t),xf(e.segpts)};Mt.getControlPoints=function(t){var e=t[0]._private.rscratch,r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return this.recalculateRenderedStyle(t),xf(e.ctrlpts)};Mt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var va={};va.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),o=t.outerHeight();if(e.value.length===2){var i=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(i[0]=i[0]*a),e.units[1]==="%"&&(i[1]=i[1]*o),i[0]+=n.x,i[1]+=n.y,i}else{var s=e.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(a,o),u=[n.x+Math.cos(s)*l,n.y+Math.sin(s)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,o,u[0],u[1],0)}};va.findEndpoints=function(t){var e=this,r,n=t.source()[0],a=t.target()[0],o=n.position(),i=a.position(),s=t.pstyle("target-arrow-shape").value,l=t.pstyle("source-arrow-shape").value,u=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,h=t.pstyle("curve-style").value,v=t._private.rscratch,c=v.edgeType,d=h==="taxi",g=c==="self"||c==="compound",m=c==="bezier"||c==="multibezier"||g,p=c!=="bezier",y=c==="straight"||c==="segments",w=c==="segments",x=m||p||y,L=g||d,A=t.pstyle("source-endpoint"),S=L?"outside-to-node":A.value,N=t.pstyle("target-endpoint"),M=L?"outside-to-node":N.value;v.srcManEndpt=A,v.tgtManEndpt=N;var b,T,E,D;if(m){var C=[v.ctrlpts[0],v.ctrlpts[1]],P=p?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:C;b=P,T=C}else if(y){var I=w?v.segpts.slice(0,2):[i.x,i.y],R=w?v.segpts.slice(v.segpts.length-2):[o.x,o.y];b=R,T=I}if(M==="inside-to-node")r=[i.x,i.y];else if(N.units)r=this.manualEndptToPx(a,N);else if(M==="outside-to-line")r=v.tgtIntn;else if(M==="outside-to-node"||M==="outside-to-node-or-label"?E=b:(M==="outside-to-line"||M==="outside-to-line-or-label")&&(E=[o.x,o.y]),r=e.nodeShapes[this.getNodeShape(a)].intersectLine(i.x,i.y,a.outerWidth(),a.outerHeight(),E[0],E[1],0),M==="outside-to-node-or-label"||M==="outside-to-line-or-label"){var F=a._private.rscratch,_=F.labelWidth,H=F.labelHeight,k=F.labelX,G=F.labelY,q=_/2,$=H/2,z=a.pstyle("text-valign").value;z==="top"?G-=$:z==="bottom"&&(G+=$);var V=a.pstyle("text-halign").value;V==="left"?k-=q:V==="right"&&(k+=q);var B=Zn(E[0],E[1],[k-q,G-$,k+q,G-$,k+q,G+$,k-q,G+$],i.x,i.y);if(B.length>0){var Y=o,W=Br(Y,un(r)),J=Br(Y,un(B)),le=W;if(J<W&&(r=B,le=J),B.length>2){var pe=Br(Y,{x:B[2],y:B[3]});pe<le&&(r=[B[2],B[3]])}}}var Oe=Ta(r,b,e.arrowShapes[s].spacing(t)+u),Q=Ta(r,b,e.arrowShapes[s].gap(t)+u);if(v.endX=Q[0],v.endY=Q[1],v.arrowEndX=Oe[0],v.arrowEndY=Oe[1],S==="inside-to-node")r=[o.x,o.y];else if(A.units)r=this.manualEndptToPx(n,A);else if(S==="outside-to-line")r=v.srcIntn;else if(S==="outside-to-node"||S==="outside-to-node-or-label"?D=T:(S==="outside-to-line"||S==="outside-to-line-or-label")&&(D=[i.x,i.y]),r=e.nodeShapes[this.getNodeShape(n)].intersectLine(o.x,o.y,n.outerWidth(),n.outerHeight(),D[0],D[1],0),S==="outside-to-node-or-label"||S==="outside-to-line-or-label"){var oe=n._private.rscratch,be=oe.labelWidth,me=oe.labelHeight,de=oe.labelX,ie=oe.labelY,fe=be/2,ye=me/2,ce=n.pstyle("text-valign").value;ce==="top"?ie-=ye:ce==="bottom"&&(ie+=ye);var j=n.pstyle("text-halign").value;j==="left"?de-=fe:j==="right"&&(de+=fe);var O=Zn(D[0],D[1],[de-fe,ie-ye,de+fe,ie-ye,de+fe,ie+ye,de-fe,ie+ye],o.x,o.y);if(O.length>0){var X=i,te=Br(X,un(r)),ee=Br(X,un(O)),U=te;if(ee<te&&(r=[O[0],O[1]],U=ee),O.length>2){var re=Br(X,{x:O[2],y:O[3]});re<U&&(r=[O[2],O[3]])}}}var K=Ta(r,T,e.arrowShapes[l].spacing(t)+f),ae=Ta(r,T,e.arrowShapes[l].gap(t)+f);v.startX=ae[0],v.startY=ae[1],v.arrowStartX=K[0],v.arrowStartY=K[1],x&&(!we(v.startX)||!we(v.startY)||!we(v.endX)||!we(v.endY)?v.badLine=!0:v.badLine=!1)};va.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};va.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Uo={};function Rb(t,e,r){for(var n=function(u,f,h,v){return gt(u,f,h,v)},a=e._private,o=a.rstyle.bezierPts,i=0;i<t.bezierProjPcts.length;i++){var s=t.bezierProjPcts[i];o.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}Uo.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)Rb(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var o=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)o.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var i=r.haystackPts;e.rstyle.haystackPts=[{x:i[0],y:i[1]},{x:i[2],y:i[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Uo.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Jt={};Jt.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Nr(e)){var r,n,a=t._private,o=t.width(),i=t.height(),s=t.padding(),l=t.position(),u=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,h=a.rscratch,v=a.rstyle;switch(u){case"left":r=l.x-o/2-s;break;case"right":r=l.x+o/2+s;break;default:r=l.x}switch(f){case"top":n=l.y-i/2-s;break;case"bottom":n=l.y+i/2+s;break;default:n=l.y}h.labelX=r,h.labelY=n,v.labelX=r,v.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var Tf=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},Cf=function(e,r){var n=r.x-e.x,a=r.y-e.y;return Tf(n,a)},Ib=function(e,r,n,a){var o=Kn(0,a-.001,1),i=Kn(0,a+.001,1),s=cn(e,r,n,o),l=cn(e,r,n,i);return Cf(s,l)};Jt.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(!!(o.mid||o.source||o.target)){e={x:n.midX,y:n.midY};var i=function(h,v,c){Er(r.rscratch,h,v,c),Er(r.rstyle,h,v,c)};i("labelX",null,e.x),i("labelY",null,e.y);var s=Tf(n.midDispX,n.midDispY);i("labelAutoAngle",null,s);var l=function f(){if(f.cache)return f.cache;for(var h=[],v=0;v+5<n.allpts.length;v+=4){var c={x:n.allpts[v],y:n.allpts[v+1]},d={x:n.allpts[v+2],y:n.allpts[v+3]},g={x:n.allpts[v+4],y:n.allpts[v+5]};h.push({p0:c,p1:d,p2:g,startDist:0,length:0,segments:[]})}var m=r.rstyle.bezierPts,p=a.bezierProjPcts.length;function y(S,N,M,b,T){var E=Hr(N,M),D=S.segments[S.segments.length-1],C={p0:N,p1:M,t0:b,t1:T,startDist:D?D.startDist+D.length:0,length:E};S.segments.push(C),S.length+=E}for(var w=0;w<h.length;w++){var x=h[w],L=h[w-1];L&&(x.startDist=L.startDist+L.length),y(x,x.p0,m[w*p],0,a.bezierProjPcts[0]);for(var A=0;A<p-1;A++)y(x,m[w*p+A],m[w*p+A+1],a.bezierProjPcts[A],a.bezierProjPcts[A+1]);y(x,m[w*p+p-1],x.p2,a.bezierProjPcts[p-1],1)}return f.cache=h},u=function(h){var v,c=h==="source";if(!!o[h]){var d=t.pstyle(h+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=l(),m,p=0,y=0,w=0;w<g.length;w++){for(var x=g[c?w:g.length-1-w],L=0;L<x.segments.length;L++){var A=x.segments[c?L:x.segments.length-1-L],S=w===g.length-1&&L===x.segments.length-1;if(p=y,y+=A.length,y>=d||S){m={cp:x,segment:A};break}}if(m)break}var N=m.cp,M=m.segment,b=(d-p)/M.length,T=M.t1-M.t0,E=c?M.t0+T*b:M.t1-T*b;E=Kn(0,E,1),e=cn(N.p0,N.p1,N.p2,E),v=Ib(N.p0,N.p1,N.p2,E);break}case"straight":case"segments":case"haystack":{for(var D=0,C,P,I,R,F=n.allpts.length,_=0;_+3<F&&(c?(I={x:n.allpts[_],y:n.allpts[_+1]},R={x:n.allpts[_+2],y:n.allpts[_+3]}):(I={x:n.allpts[F-2-_],y:n.allpts[F-1-_]},R={x:n.allpts[F-4-_],y:n.allpts[F-3-_]}),C=Hr(I,R),P=D,D+=C,!(D>=d));_+=2);var H=d-P,k=H/C;k=Kn(0,k,1),e=Ky(I,R,k),v=Cf(I,R);break}}i("labelX",h,e.x),i("labelY",h,e.y),i("labelAutoAngle",h,v)}};u("source"),u("target"),this.applyLabelDimensions(t)}};Jt.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};Jt.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=this.calculateLabelDimensions(t,n),o=t.pstyle("line-height").pfValue,i=t.pstyle("text-wrap").strValue,s=$t(r.rscratch,"labelWrapCachedLines",e)||[],l=i!=="wrap"?1:Math.max(s.length,1),u=a.height/l,f=u*o,h=a.width,v=a.height+(l-1)*(o-1)*u;Er(r.rstyle,"labelWidth",e,h),Er(r.rscratch,"labelWidth",e,h),Er(r.rstyle,"labelHeight",e,v),Er(r.rscratch,"labelHeight",e,v),Er(r.rscratch,"labelLineHeight",e,f)};Jt.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,o=t.pstyle("text-transform").value,i=function(H,k){return k?(Er(r.rscratch,H,e,k),k):$t(r.rscratch,H,e)};if(!a)return"";o=="none"||(o=="uppercase"?a=a.toUpperCase():o=="lowercase"&&(a=a.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var l=i("labelKey");if(l!=null&&i("labelWrapKey")===l)return i("labelWrapCachedText");for(var u="\u200B",f=a.split(`
`),h=t.pstyle("text-max-width").pfValue,v=t.pstyle("text-overflow-wrap").value,c=v==="anywhere",d=[],g=/[\s\u200b]+/,m=c?"":" ",p=0;p<f.length;p++){var y=f[p],w=this.calculateLabelDimensions(t,y),x=w.width;if(c){var L=y.split("").join(u);y=L}if(x>h){for(var A=y.split(g),S="",N=0;N<A.length;N++){var M=A[N],b=S.length===0?M:S+m+M,T=this.calculateLabelDimensions(t,b),E=T.width;E<=h?S+=M+m:(S&&d.push(S),S=M+m)}S.match(/^[\s\u200b]+$/)||d.push(S)}else d.push(y)}i("labelWrapCachedLines",d),a=i("labelWrapCachedText",d.join(`
`)),i("labelWrapKey",l)}else if(s==="ellipsis"){var D=t.pstyle("text-max-width").pfValue,C="",P="\u2026",I=!1;if(this.calculateLabelDimensions(t,a).width<D)return a;for(var R=0;R<a.length;R++){var F=this.calculateLabelDimensions(t,C+a[R]+P).width;if(F>D)break;C+=a[R],R===a.length-1&&(I=!0)}return I||(C+=P),C}return a};Jt.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Jt.calculateLabelDimensions=function(t,e){var r=this,n=Vr(e,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),o=a[n];if(o!=null)return o;var i=0,s=t.pstyle("font-style").strValue,l=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,h=this.labelCalcCanvas,v=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=document.createElement("canvas"),v=this.labelCalcCanvasContext=h.getContext("2d");var c=h.style;c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none"}v.font="".concat(s," ").concat(f," ").concat(l,"px ").concat(u);for(var d=0,g=0,m=e.split(`
`),p=0;p<m.length;p++){var y=m[p],w=v.measureText(y),x=Math.ceil(w.width),L=l;d=Math.max(x,d),g+=L}return d+=i,g+=i,a[n]={width:d,height:g}};Jt.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),o=e?e+"-":"",i=t.pstyle(o+"text-rotation"),s=i.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:i.pfValue};Jt.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Sf={},ul=28,fl=!1;Sf.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<ul||t.height()<ul))return fl||(We("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),fl=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Ti={};Ti.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(i),s)for(var l=0;l<i.length;l++){var u=i[l],f=u._private,h=f.rstyle;h.clean=!1,h.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(i){var s=i.target;n(s)}).on("style.* background.*",function(i){var s=i.target;n(s,!1)});var a=function(i){if(i){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],f=u._private.rstyle;u.isNode()&&!f.cleanConnected&&(n(u.connectedEdges()),f.cleanConnected=!0)}if(s)for(var h=0;h<s.length;h++){var v=s[h];v(i,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Ti.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Ti.recalculateRenderedStyle=function(t,e){var r=function(x){return x._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<t.length;o++){var i=t[o],s=i._private,l=s.rstyle;i.isEdge()&&(!r(i.source())||!r(i.target()))&&(l.clean=!1),!(e&&l.clean||i.removed())&&i.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(i):n.push(i),l.clean=!0)}for(var u=0;u<a.length;u++){var f=a[u],h=f._private,v=h.rstyle,c=f.position();this.recalculateNodeLabelProjection(f),v.nodeX=c.x,v.nodeY=c.y,v.nodeW=f.pstyle("width").pfValue,v.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var g=n[d],m=g._private,p=m.rstyle,y=m.rscratch;p.srcX=y.arrowStartX,p.srcY=y.arrowStartY,p.tgtX=y.arrowEndX,p.tgtY=y.arrowEndY,p.midX=y.midX,p.midY=y.midY,p.labelAngle=y.labelAngle,p.sourceLabelAngle=y.sourceLabelAngle,p.targetLabelAngle=y.targetLabelAngle}}};var Ci={};Ci.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(!!t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Ci.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Ci.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(hf),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Df={};[Zr,Qa,Mt,va,Uo,Jt,Sf,Ti,Ci].forEach(function(t){Fe(Df,t)});var Lf={};Lf.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},o=a[t];if(o)return o.image.complete||o.image.addEventListener("load",r),o.image;o=a[t]=a[t]||{};var i=o.image=new Image;i.addEventListener("load",r),i.addEventListener("error",function(){i.error=!0});var s="data:",l=t.substring(0,s.length).toLowerCase()===s;return l||(i.crossOrigin=e),i.src=t,i};var Nn={};Nn.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,a)};Nn.binder=function(t){var e=this,r=t===window||t===document||t===document.body||ey(t);if(e.supportsPassiveEvents==null){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});window.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=n}var o=function(s,l,u){var f=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(f[2]={capture:u!=null?u:!1,passive:!1,once:!1}),e.bindings.push({target:t,args:f}),(t.addEventListener||t.on).apply(t,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Nn.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Nn.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Nn.load=function(){var t=this,e=function(O){return O.selected()},r=function(O,X,te,ee){O==null&&(O=t.cy);for(var U=0;U<X.length;U++){var re=X[U];O.emit({originalEvent:te,type:re,position:ee})}},n=function(O){return O.shiftKey||O.metaKey||O.ctrlKey},a=function(O,X){var te=!0;if(t.cy.hasCompoundNodes()&&O&&O.pannable())for(var ee=0;X&&ee<X.length;ee++){var O=X[ee];if(O.isNode()&&O.isParent()&&!O.pannable()){te=!1;break}}else te=!0;return te},o=function(O){O[0]._private.grabbed=!0},i=function(O){O[0]._private.grabbed=!1},s=function(O){O[0]._private.rscratch.inDragLayer=!0},l=function(O){O[0]._private.rscratch.inDragLayer=!1},u=function(O){O[0]._private.rscratch.isGrabTarget=!0},f=function(O){O[0]._private.rscratch.isGrabTarget=!1},h=function(O,X){var te=X.addToList,ee=te.has(O);!ee&&O.grabbable()&&!O.locked()&&(te.merge(O),o(O))},v=function(O,X){if(!!O.cy().hasCompoundNodes()&&!(X.inDragLayer==null&&X.addToList==null)){var te=O.descendants();X.inDragLayer&&(te.forEach(s),te.connectedEdges().forEach(s)),X.addToList&&h(te,X)}},c=function(O,X){X=X||{};var te=O.cy().hasCompoundNodes();X.inDragLayer&&(O.forEach(s),O.neighborhood().stdFilter(function(ee){return!te||ee.isEdge()}).forEach(s)),X.addToList&&O.forEach(function(ee){h(ee,X)}),v(O,X),m(O,{inDragLayer:X.inDragLayer}),t.updateCachedGrabbedEles()},d=c,g=function(O){!O||(t.getCachedZSortedEles().forEach(function(X){i(X),l(X),f(X)}),t.updateCachedGrabbedEles())},m=function(O,X){if(!(X.inDragLayer==null&&X.addToList==null)&&!!O.cy().hasCompoundNodes()){var te=O.ancestors().orphans();if(!te.same(O)){var ee=te.descendants().spawnSelf().merge(te).unmerge(O).unmerge(O.descendants()),U=ee.connectedEdges();X.inDragLayer&&(U.forEach(s),ee.forEach(s)),X.addToList&&ee.forEach(function(re){h(re,X)})}}},p=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",w=typeof ResizeObserver<"u";y?(t.removeObserver=new MutationObserver(function(j){for(var O=0;O<j.length;O++){var X=j[O],te=X.removedNodes;if(te)for(var ee=0;ee<te.length;ee++){var U=te[ee];if(U===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(j){t.destroy()});var x=hi.default(function(){t.cy.resize()},100);y&&(t.styleObserver=new MutationObserver(x),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",x),w&&(t.resizeObserver=new ResizeObserver(x),t.resizeObserver.observe(t.container));var L=function(O,X){for(;O!=null;)X(O),O=O.parentNode},A=function(){t.invalidateContainerClientCoordsCache()};L(t.container,function(j){t.registerBinding(j,"transitionend",A),t.registerBinding(j,"animationend",A),t.registerBinding(j,"scroll",A)}),t.registerBinding(t.container,"contextmenu",function(j){j.preventDefault()});var S=function(){return t.selection[4]!==0},N=function(O){for(var X=t.findContainerClientCoords(),te=X[0],ee=X[1],U=X[2],re=X[3],K=O.touches?O.touches:[O],ae=!1,se=0;se<K.length;se++){var ue=K[se];if(te<=ue.clientX&&ue.clientX<=te+U&&ee<=ue.clientY&&ue.clientY<=ee+re){ae=!0;break}}if(!ae)return!1;for(var he=t.container,ge=O.target,ne=ge.parentNode,ve=!1;ne;){if(ne===he){ve=!0;break}ne=ne.parentNode}return!!ve};t.registerBinding(t.container,"mousedown",function(O){if(!!N(O)){O.preventDefault(),p(),t.hoverData.capture=!0,t.hoverData.which=O.which;var X=t.cy,te=[O.clientX,O.clientY],ee=t.projectIntoViewport(te[0],te[1]),U=t.selection,re=t.findNearestElements(ee[0],ee[1],!0,!1),K=re[0],ae=t.dragData.possibleDragElements;t.hoverData.mdownPos=ee,t.hoverData.mdownGPos=te;var se=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Te=t.hoverData.down;Te?Te.emit({originalEvent:O,type:"taphold",position:{x:ee[0],y:ee[1]}}):X.emit({originalEvent:O,type:"taphold",position:{x:ee[0],y:ee[1]}})}},t.tapholdDuration)};if(O.which==3){t.hoverData.cxtStarted=!0;var ue={originalEvent:O,type:"cxttapstart",position:{x:ee[0],y:ee[1]}};K?(K.activate(),K.emit(ue),t.hoverData.down=K):X.emit(ue),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(O.which==1){K&&K.activate();{if(K!=null&&t.nodeIsGrabbable(K)){var he=function(Te){return{originalEvent:O,type:Te,position:{x:ee[0],y:ee[1]}}},ge=function(Te){Te.emit(he("grab"))};if(u(K),!K.selected())ae=t.dragData.possibleDragElements=X.collection(),d(K,{addToList:ae}),K.emit(he("grabon")).emit(he("grab"));else{ae=t.dragData.possibleDragElements=X.collection();var ne=X.$(function(ve){return ve.isNode()&&ve.selected()&&t.nodeIsGrabbable(ve)});c(ne,{addToList:ae}),K.emit(he("grabon")),ne.forEach(ge)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=K,t.hoverData.downs=re,t.hoverData.downTime=new Date().getTime()}r(K,["mousedown","tapstart","vmousedown"],O,{x:ee[0],y:ee[1]}),K==null?(U[4]=1,t.data.bgActivePosistion={x:ee[0],y:ee[1]},t.redrawHint("select",!0),t.redraw()):K.pannable()&&(U[4]=1),se()}U[0]=U[2]=ee[0],U[1]=U[3]=ee[1]}},!1),t.registerBinding(window,"mousemove",function(O){var X=t.hoverData.capture;if(!(!X&&!N(O))){var te=!1,ee=t.cy,U=ee.zoom(),re=[O.clientX,O.clientY],K=t.projectIntoViewport(re[0],re[1]),ae=t.hoverData.mdownPos,se=t.hoverData.mdownGPos,ue=t.selection,he=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(he=t.findNearestElement(K[0],K[1],!0,!1));var ge=t.hoverData.last,ne=t.hoverData.down,ve=[K[0]-ue[2],K[1]-ue[3]],Te=t.dragData.possibleDragElements,Le;if(se){var Me=re[0]-se[0],Ce=Me*Me,Ee=re[1]-se[1],xe=Ee*Ee,Ae=Ce+xe;t.hoverData.isOverThresholdDrag=Le=Ae>=t.desktopTapThreshold2}var De=n(O);Le&&(t.hoverData.tapholdCancelled=!0);var Se=function(){var ft=t.hoverData.dragDelta=t.hoverData.dragDelta||[];ft.length===0?(ft.push(ve[0]),ft.push(ve[1])):(ft[0]+=ve[0],ft[1]+=ve[1])};te=!0,r(he,["mousemove","vmousemove","tapdrag"],O,{x:K[0],y:K[1]});var ze=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||ee.emit({originalEvent:O,type:"boxstart",position:{x:K[0],y:K[1]}}),ue[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Le){var ke={originalEvent:O,type:"cxtdrag",position:{x:K[0],y:K[1]}};ne?ne.emit(ke):ee.emit(ke),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||he!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:O,type:"cxtdragout",position:{x:K[0],y:K[1]}}),t.hoverData.cxtOver=he,he&&he.emit({originalEvent:O,type:"cxtdragover",position:{x:K[0],y:K[1]}}))}}else if(t.hoverData.dragging){if(te=!0,ee.panningEnabled()&&ee.userPanningEnabled()){var et;if(t.hoverData.justStartedPan){var lt=t.hoverData.mdownPos;et={x:(K[0]-lt[0])*U,y:(K[1]-lt[1])*U},t.hoverData.justStartedPan=!1}else et={x:ve[0]*U,y:ve[1]*U};ee.panBy(et),ee.emit("dragpan"),t.hoverData.dragged=!0}K=t.projectIntoViewport(O.clientX,O.clientY)}else if(ue[4]==1&&(ne==null||ne.pannable())){if(Le){if(!t.hoverData.dragging&&ee.boxSelectionEnabled()&&(De||!ee.panningEnabled()||!ee.userPanningEnabled()))ze();else if(!t.hoverData.selecting&&ee.panningEnabled()&&ee.userPanningEnabled()){var ut=a(ne,t.hoverData.downs);ut&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,ue[4]=0,t.data.bgActivePosistion=un(ae),t.redrawHint("select",!0),t.redraw())}ne&&ne.pannable()&&ne.active()&&ne.unactivate()}}else{if(ne&&ne.pannable()&&ne.active()&&ne.unactivate(),(!ne||!ne.grabbed())&&he!=ge&&(ge&&r(ge,["mouseout","tapdragout"],O,{x:K[0],y:K[1]}),he&&r(he,["mouseover","tapdragover"],O,{x:K[0],y:K[1]}),t.hoverData.last=he),ne)if(Le){if(ee.boxSelectionEnabled()&&De)ne&&ne.grabbed()&&(g(Te),ne.emit("freeon"),Te.emit("free"),t.dragData.didDrag&&(ne.emit("dragfreeon"),Te.emit("dragfree"))),ze();else if(ne&&ne.grabbed()&&t.nodeIsDraggable(ne)){var Be=!t.dragData.didDrag;Be&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||c(Te,{inDragLayer:!0});var Ie={x:0,y:0};if(we(ve[0])&&we(ve[1])&&(Ie.x+=ve[0],Ie.y+=ve[1],Be)){var Xe=t.hoverData.dragDelta;Xe&&we(Xe[0])&&we(Xe[1])&&(Ie.x+=Xe[0],Ie.y+=Xe[1])}t.hoverData.draggingEles=!0,Te.silentShift(Ie).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Se();te=!0}if(ue[2]=K[0],ue[3]=K[1],te)return O.stopPropagation&&O.stopPropagation(),O.preventDefault&&O.preventDefault(),!1}},!1);var M,b,T;t.registerBinding(window,"mouseup",function(O){var X=t.hoverData.capture;if(!!X){t.hoverData.capture=!1;var te=t.cy,ee=t.projectIntoViewport(O.clientX,O.clientY),U=t.selection,re=t.findNearestElement(ee[0],ee[1],!0,!1),K=t.dragData.possibleDragElements,ae=t.hoverData.down,se=n(O);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ae&&ae.unactivate(),t.hoverData.which===3){var ue={originalEvent:O,type:"cxttapend",position:{x:ee[0],y:ee[1]}};if(ae?ae.emit(ue):te.emit(ue),!t.hoverData.cxtDragged){var he={originalEvent:O,type:"cxttap",position:{x:ee[0],y:ee[1]}};ae?ae.emit(he):te.emit(he)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(r(re,["mouseup","tapend","vmouseup"],O,{x:ee[0],y:ee[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(r(ae,["click","tap","vclick"],O,{x:ee[0],y:ee[1]}),b=!1,O.timeStamp-T<=te.multiClickDebounceTime()?(M&&clearTimeout(M),b=!0,T=null,r(ae,["dblclick","dbltap","vdblclick"],O,{x:ee[0],y:ee[1]})):(M=setTimeout(function(){b||r(ae,["oneclick","onetap","voneclick"],O,{x:ee[0],y:ee[1]})},te.multiClickDebounceTime()),T=O.timeStamp)),ae==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!n(O)&&(te.$(e).unselect(["tapunselect"]),K.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=K=te.collection()),re==ae&&!t.dragData.didDrag&&!t.hoverData.selecting&&re!=null&&re._private.selectable&&(t.hoverData.dragging||(te.selectionType()==="additive"||se?re.selected()?re.unselect(["tapunselect"]):re.select(["tapselect"]):se||(te.$(e).unmerge(re).unselect(["tapunselect"]),re.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var ge=te.collection(t.getAllInBox(U[0],U[1],U[2],U[3]));t.redrawHint("select",!0),ge.length>0&&t.redrawHint("eles",!0),te.emit({type:"boxend",originalEvent:O,position:{x:ee[0],y:ee[1]}});var ne=function(Le){return Le.selectable()&&!Le.selected()};te.selectionType()==="additive"||se||te.$(e).unmerge(ge).unselect(),ge.emit("box").stdFilter(ne).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!U[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var ve=ae&&ae.grabbed();g(K),ve&&(ae.emit("freeon"),K.emit("free"),t.dragData.didDrag&&(ae.emit("dragfreeon"),K.emit("dragfree")))}}U[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var E=function(O){if(!t.scrollingPage){var X=t.cy,te=X.zoom(),ee=X.pan(),U=t.projectIntoViewport(O.clientX,O.clientY),re=[U[0]*te+ee.x,U[1]*te+ee.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||S()){O.preventDefault();return}if(X.panningEnabled()&&X.userPanningEnabled()&&X.zoomingEnabled()&&X.userZoomingEnabled()){O.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var K;O.deltaY!=null?K=O.deltaY/-250:O.wheelDeltaY!=null?K=O.wheelDeltaY/1e3:K=O.wheelDelta/1e3,K=K*t.wheelSensitivity;var ae=O.deltaMode===1;ae&&(K*=33);var se=X.zoom()*Math.pow(10,K);O.type==="gesturechange"&&(se=t.gestureStartZoom*O.scale),X.zoom({level:se,renderedPosition:{x:re[0],y:re[1]}}),X.emit(O.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",E,!0),t.registerBinding(window,"scroll",function(O){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(O){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||O.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(j){t.hasTouchStarted||E(j)},!0),t.registerBinding(t.container,"mouseout",function(O){var X=t.projectIntoViewport(O.clientX,O.clientY);t.cy.emit({originalEvent:O,type:"mouseout",position:{x:X[0],y:X[1]}})},!1),t.registerBinding(t.container,"mouseover",function(O){var X=t.projectIntoViewport(O.clientX,O.clientY);t.cy.emit({originalEvent:O,type:"mouseover",position:{x:X[0],y:X[1]}})},!1);var D,C,P,I,R,F,_,H,k,G,q,$,z,V=function(O,X,te,ee){return Math.sqrt((te-O)*(te-O)+(ee-X)*(ee-X))},B=function(O,X,te,ee){return(te-O)*(te-O)+(ee-X)*(ee-X)},Y;t.registerBinding(t.container,"touchstart",Y=function(O){if(t.hasTouchStarted=!0,!!N(O)){p(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var X=t.cy,te=t.touchData.now,ee=t.touchData.earlier;if(O.touches[0]){var U=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);te[0]=U[0],te[1]=U[1]}if(O.touches[1]){var U=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);te[2]=U[0],te[3]=U[1]}if(O.touches[2]){var U=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);te[4]=U[0],te[5]=U[1]}if(O.touches[1]){t.touchData.singleTouchMoved=!0,g(t.dragData.touchDragEles);var re=t.findContainerClientCoords();k=re[0],G=re[1],q=re[2],$=re[3],D=O.touches[0].clientX-k,C=O.touches[0].clientY-G,P=O.touches[1].clientX-k,I=O.touches[1].clientY-G,z=0<=D&&D<=q&&0<=P&&P<=q&&0<=C&&C<=$&&0<=I&&I<=$;var K=X.pan(),ae=X.zoom();R=V(D,C,P,I),F=B(D,C,P,I),_=[(D+P)/2,(C+I)/2],H=[(_[0]-K.x)/ae,(_[1]-K.y)/ae];var se=200,ue=se*se;if(F<ue&&!O.touches[2]){var he=t.findNearestElement(te[0],te[1],!0,!0),ge=t.findNearestElement(te[2],te[3],!0,!0);he&&he.isNode()?(he.activate().emit({originalEvent:O,type:"cxttapstart",position:{x:te[0],y:te[1]}}),t.touchData.start=he):ge&&ge.isNode()?(ge.activate().emit({originalEvent:O,type:"cxttapstart",position:{x:te[0],y:te[1]}}),t.touchData.start=ge):X.emit({originalEvent:O,type:"cxttapstart",position:{x:te[0],y:te[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(O.touches[2])X.boxSelectionEnabled()&&O.preventDefault();else if(!O.touches[1]){if(O.touches[0]){var ne=t.findNearestElements(te[0],te[1],!0,!0),ve=ne[0];if(ve!=null&&(ve.activate(),t.touchData.start=ve,t.touchData.starts=ne,t.nodeIsGrabbable(ve))){var Te=t.dragData.touchDragEles=X.collection(),Le=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),ve.selected()?(Le=X.$(function(Ae){return Ae.selected()&&t.nodeIsGrabbable(Ae)}),c(Le,{addToList:Te})):d(ve,{addToList:Te}),u(ve);var Me=function(De){return{originalEvent:O,type:De,position:{x:te[0],y:te[1]}}};ve.emit(Me("grabon")),Le?Le.forEach(function(Ae){Ae.emit(Me("grab"))}):ve.emit(Me("grab"))}r(ve,["touchstart","tapstart","vmousedown"],O,{x:te[0],y:te[1]}),ve==null&&(t.data.bgActivePosistion={x:U[0],y:U[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&r(t.touchData.start,["taphold"],O,{x:te[0],y:te[1]})},t.tapholdDuration)}}if(O.touches.length>=1){for(var Ce=t.touchData.startPosition=[],Ee=0;Ee<te.length;Ee++)Ce[Ee]=ee[Ee]=te[Ee];var xe=O.touches[0];t.touchData.startGPosition=[xe.clientX,xe.clientY]}}},!1);var W;t.registerBinding(window,"touchmove",W=function(O){var X=t.touchData.capture;if(!(!X&&!N(O))){var te=t.selection,ee=t.cy,U=t.touchData.now,re=t.touchData.earlier,K=ee.zoom();if(O.touches[0]){var ae=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);U[0]=ae[0],U[1]=ae[1]}if(O.touches[1]){var ae=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);U[2]=ae[0],U[3]=ae[1]}if(O.touches[2]){var ae=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);U[4]=ae[0],U[5]=ae[1]}var se=t.touchData.startGPosition,ue;if(X&&O.touches[0]&&se){for(var he=[],ge=0;ge<U.length;ge++)he[ge]=U[ge]-re[ge];var ne=O.touches[0].clientX-se[0],ve=ne*ne,Te=O.touches[0].clientY-se[1],Le=Te*Te,Me=ve+Le;ue=Me>=t.touchTapThreshold2}if(X&&t.touchData.cxt){O.preventDefault();var Ce=O.touches[0].clientX-k,Ee=O.touches[0].clientY-G,xe=O.touches[1].clientX-k,Ae=O.touches[1].clientY-G,De=B(Ce,Ee,xe,Ae),Se=De/F,ze=150,ke=ze*ze,et=1.5,lt=et*et;if(Se>=lt||De>=ke){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ut={originalEvent:O,type:"cxttapend",position:{x:U[0],y:U[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(ut),t.touchData.start=null):ee.emit(ut)}}if(X&&t.touchData.cxt){var ut={originalEvent:O,type:"cxtdrag",position:{x:U[0],y:U[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(ut):ee.emit(ut),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Be=t.findNearestElement(U[0],U[1],!0,!0);(!t.touchData.cxtOver||Be!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:O,type:"cxtdragout",position:{x:U[0],y:U[1]}}),t.touchData.cxtOver=Be,Be&&Be.emit({originalEvent:O,type:"cxtdragover",position:{x:U[0],y:U[1]}}))}else if(X&&O.touches[2]&&ee.boxSelectionEnabled())O.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||ee.emit({originalEvent:O,type:"boxstart",position:{x:U[0],y:U[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,te[4]=1,!te||te.length===0||te[0]===void 0?(te[0]=(U[0]+U[2]+U[4])/3,te[1]=(U[1]+U[3]+U[5])/3,te[2]=(U[0]+U[2]+U[4])/3+1,te[3]=(U[1]+U[3]+U[5])/3+1):(te[2]=(U[0]+U[2]+U[4])/3,te[3]=(U[1]+U[3]+U[5])/3),t.redrawHint("select",!0),t.redraw();else if(X&&O.touches[1]&&!t.touchData.didSelect&&ee.zoomingEnabled()&&ee.panningEnabled()&&ee.userZoomingEnabled()&&ee.userPanningEnabled()){O.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ie=t.dragData.touchDragEles;if(Ie){t.redrawHint("drag",!0);for(var Xe=0;Xe<Ie.length;Xe++){var ht=Ie[Xe]._private;ht.grabbed=!1,ht.rscratch.inDragLayer=!1}}var ft=t.touchData.start,Ce=O.touches[0].clientX-k,Ee=O.touches[0].clientY-G,xe=O.touches[1].clientX-k,Ae=O.touches[1].clientY-G,xt=V(Ce,Ee,xe,Ae),hr=xt/R;if(z){var cr=Ce-D,er=Ee-C,Jr=xe-P,vr=Ae-I,dr=(cr+Jr)/2,pa=(er+vr)/2,tr=ee.zoom(),jr=tr*hr,gr=ee.pan(),ma=H[0]*tr+gr.x,en=H[1]*tr+gr.y,ya={x:-jr/tr*(ma-gr.x-dr)+ma,y:-jr/tr*(en-gr.y-pa)+en};if(ft&&ft.active()){var Ie=t.dragData.touchDragEles;g(Ie),t.redrawHint("drag",!0),t.redrawHint("eles",!0),ft.unactivate().emit("freeon"),Ie.emit("free"),t.dragData.didDrag&&(ft.emit("dragfreeon"),Ie.emit("dragfree"))}ee.viewport({zoom:jr,pan:ya,cancelOnFailedZoom:!0}),ee.emit("pinchzoom"),R=xt,D=Ce,C=Ee,P=xe,I=Ae,t.pinching=!0}if(O.touches[0]){var ae=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);U[0]=ae[0],U[1]=ae[1]}if(O.touches[1]){var ae=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);U[2]=ae[0],U[3]=ae[1]}if(O.touches[2]){var ae=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);U[4]=ae[0],U[5]=ae[1]}}else if(O.touches[0]&&!t.touchData.didSelect){var At=t.touchData.start,Fr=t.touchData.last,Be;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Be=t.findNearestElement(U[0],U[1],!0,!0)),X&&At!=null&&O.preventDefault(),X&&At!=null&&t.nodeIsDraggable(At))if(ue){var Ie=t.dragData.touchDragEles,On=!t.dragData.didDrag;On&&c(Ie,{inDragLayer:!0}),t.dragData.didDrag=!0;var nt={x:0,y:0};if(we(he[0])&&we(he[1])&&(nt.x+=he[0],nt.y+=he[1],On)){t.redrawHint("eles",!0);var Pe=t.touchData.dragDelta;Pe&&we(Pe[0])&&we(Pe[1])&&(nt.x+=Pe[0],nt.y+=Pe[1])}t.hoverData.draggingEles=!0,Ie.silentShift(nt).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==re[0]&&t.touchData.startPosition[1]==re[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Pe=t.touchData.dragDelta=t.touchData.dragDelta||[];Pe.length===0?(Pe.push(he[0]),Pe.push(he[1])):(Pe[0]+=he[0],Pe[1]+=he[1])}if(r(At||Be,["touchmove","tapdrag","vmousemove"],O,{x:U[0],y:U[1]}),(!At||!At.grabbed())&&Be!=Fr&&(Fr&&Fr.emit({originalEvent:O,type:"tapdragout",position:{x:U[0],y:U[1]}}),Be&&Be.emit({originalEvent:O,type:"tapdragover",position:{x:U[0],y:U[1]}})),t.touchData.last=Be,X)for(var Xe=0;Xe<U.length;Xe++)U[Xe]&&t.touchData.startPosition[Xe]&&ue&&(t.touchData.singleTouchMoved=!0);if(X&&(At==null||At.pannable())&&ee.panningEnabled()&&ee.userPanningEnabled()){var $e=a(At,t.touchData.starts);$e&&(O.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=un(t.touchData.startPosition)),t.swipePanning?(ee.panBy({x:he[0]*K,y:he[1]*K}),ee.emit("dragpan")):ue&&(t.swipePanning=!0,ee.panBy({x:ne*K,y:Te*K}),ee.emit("dragpan"),At&&(At.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ae=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);U[0]=ae[0],U[1]=ae[1]}}for(var ge=0;ge<U.length;ge++)re[ge]=U[ge];X&&O.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var J;t.registerBinding(window,"touchcancel",J=function(O){var X=t.touchData.start;t.touchData.capture=!1,X&&X.unactivate()});var le,pe,Oe,Q;if(t.registerBinding(window,"touchend",le=function(O){var X=t.touchData.start,te=t.touchData.capture;if(te)O.touches.length===0&&(t.touchData.capture=!1),O.preventDefault();else return;var ee=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var U=t.cy,re=U.zoom(),K=t.touchData.now,ae=t.touchData.earlier;if(O.touches[0]){var se=t.projectIntoViewport(O.touches[0].clientX,O.touches[0].clientY);K[0]=se[0],K[1]=se[1]}if(O.touches[1]){var se=t.projectIntoViewport(O.touches[1].clientX,O.touches[1].clientY);K[2]=se[0],K[3]=se[1]}if(O.touches[2]){var se=t.projectIntoViewport(O.touches[2].clientX,O.touches[2].clientY);K[4]=se[0],K[5]=se[1]}X&&X.unactivate();var ue;if(t.touchData.cxt){if(ue={originalEvent:O,type:"cxttapend",position:{x:K[0],y:K[1]}},X?X.emit(ue):U.emit(ue),!t.touchData.cxtDragged){var he={originalEvent:O,type:"cxttap",position:{x:K[0],y:K[1]}};X?X.emit(he):U.emit(he)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!O.touches[2]&&U.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var ge=U.collection(t.getAllInBox(ee[0],ee[1],ee[2],ee[3]));ee[0]=void 0,ee[1]=void 0,ee[2]=void 0,ee[3]=void 0,ee[4]=0,t.redrawHint("select",!0),U.emit({type:"boxend",originalEvent:O,position:{x:K[0],y:K[1]}});var ne=function(ke){return ke.selectable()&&!ke.selected()};ge.emit("box").stdFilter(ne).select().emit("boxselect"),ge.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(X!=null&&X.unactivate(),O.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!O.touches[1]){if(!O.touches[0]){if(!O.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var ve=t.dragData.touchDragEles;if(X!=null){var Te=X._private.grabbed;g(ve),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Te&&(X.emit("freeon"),ve.emit("free"),t.dragData.didDrag&&(X.emit("dragfreeon"),ve.emit("dragfree"))),r(X,["touchend","tapend","vmouseup","tapdragout"],O,{x:K[0],y:K[1]}),X.unactivate(),t.touchData.start=null}else{var Le=t.findNearestElement(K[0],K[1],!0,!0);r(Le,["touchend","tapend","vmouseup","tapdragout"],O,{x:K[0],y:K[1]})}var Me=t.touchData.startPosition[0]-K[0],Ce=Me*Me,Ee=t.touchData.startPosition[1]-K[1],xe=Ee*Ee,Ae=Ce+xe,De=Ae*re*re;t.touchData.singleTouchMoved||(X||U.$(":selected").unselect(["tapunselect"]),r(X,["tap","vclick"],O,{x:K[0],y:K[1]}),pe=!1,O.timeStamp-Q<=U.multiClickDebounceTime()?(Oe&&clearTimeout(Oe),pe=!0,Q=null,r(X,["dbltap","vdblclick"],O,{x:K[0],y:K[1]})):(Oe=setTimeout(function(){pe||r(X,["onetap","voneclick"],O,{x:K[0],y:K[1]})},U.multiClickDebounceTime()),Q=O.timeStamp)),X!=null&&!t.dragData.didDrag&&X._private.selectable&&De<t.touchTapThreshold2&&!t.pinching&&(U.selectionType()==="single"?(U.$(e).unmerge(X).unselect(["tapunselect"]),X.select(["tapselect"])):X.selected()?X.unselect(["tapunselect"]):X.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Se=0;Se<K.length;Se++)ae[Se]=K[Se];t.dragData.didDrag=!1,O.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),O.touches.length<2&&(O.touches.length===1&&(t.touchData.startGPosition=[O.touches[0].clientX,O.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var oe=[],be=function(O){return{clientX:O.clientX,clientY:O.clientY,force:1,identifier:O.pointerId,pageX:O.pageX,pageY:O.pageY,radiusX:O.width/2,radiusY:O.height/2,screenX:O.screenX,screenY:O.screenY,target:O.target}},me=function(O){return{event:O,touch:be(O)}},de=function(O){oe.push(me(O))},ie=function(O){for(var X=0;X<oe.length;X++){var te=oe[X];if(te.event.pointerId===O.pointerId){oe.splice(X,1);return}}},fe=function(O){var X=oe.filter(function(te){return te.event.pointerId===O.pointerId})[0];X.event=O,X.touch=be(O)},ye=function(O){O.touches=oe.map(function(X){return X.touch})},ce=function(O){return O.pointerType==="mouse"||O.pointerType===4};t.registerBinding(t.container,"pointerdown",function(j){ce(j)||(j.preventDefault(),de(j),ye(j),Y(j))}),t.registerBinding(t.container,"pointerup",function(j){ce(j)||(ie(j),ye(j),le(j))}),t.registerBinding(t.container,"pointercancel",function(j){ce(j)||(ie(j),ye(j),J(j))}),t.registerBinding(t.container,"pointermove",function(j){ce(j)||(j.preventDefault(),fe(j),ye(j),W(j))})}};var ur={};ur.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,o,i,s){this.renderer.nodeShapeImpl("polygon",n,a,o,i,s,this.points)},intersectLine:function(n,a,o,i,s,l,u){return Zn(s,l,this.points,n,a,o/2,i/2,u)},checkPoint:function(n,a,o,i,s,l,u){return sr(n,a,this.points,l,u,i,s,[0,-1],o)}}};ur.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,i,s){return l0(o,i,e,r,n/2+s,a/2+s)},checkPoint:function(e,r,n,a,o,i,s){return Ur(e,r,a,o,i,s,n)}}};ur.generateRoundPolygon=function(t,e){for(var r=new Array(e.length*2),n=0;n<e.length/2;n++){var a=n*2,o=void 0;n<e.length/2-1?o=(n+1)*2:o=0,r[n*4]=e[a],r[n*4+1]=e[a+1];var i=e[o]-e[a],s=e[o+1]-e[a+1],l=Math.sqrt(i*i+s*s);r[n*4+2]=i/l,r[n*4+3]=s/l}return this.nodeShapes[t]={renderer:this,name:t,points:r,draw:function(f,h,v,c,d){this.renderer.nodeShapeImpl("round-polygon",f,h,v,c,d,this.points)},intersectLine:function(f,h,v,c,d,g,m){return u0(d,g,this.points,f,h,v,c)},checkPoint:function(f,h,v,c,d,g,m){return s0(f,h,this.points,g,m,c,d)}}};ur.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Nt(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,i,s){return Fu(o,i,e,r,n,a,s)},checkPoint:function(e,r,n,a,o,i,s){var l=fa(a,o),u=l*2;return!!(sr(e,r,this.points,i,s,a,o-u,[0,-1],n)||sr(e,r,this.points,i,s,a-u,o,[0,-1],n)||Ur(e,r,u,u,i-a/2+l,s-o/2+l,n)||Ur(e,r,u,u,i+a/2-l,s-o/2+l,n)||Ur(e,r,u,u,i+a/2-l,s+o/2-l,n)||Ur(e,r,u,u,i-a/2+l,s+o/2-l,n))}}};ur.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:zu(),points:Nt(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},generateCutTrianglePts:function(e,r,n,a){var o=this.cornerLength,i=r/2,s=e/2,l=n-s,u=n+s,f=a-i,h=a+i;return{topLeft:[l,f+o,l+o,f,l+o,f+o],topRight:[u-o,f,u,f+o,u-o,f+o],bottomRight:[u,h-o,u-o,h,u-o,h-o],bottomLeft:[l+o,h,l,h-o,l+o,h-o]}},intersectLine:function(e,r,n,a,o,i,s){var l=this.generateCutTrianglePts(n+2*s,a+2*s,e,r),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Zn(o,i,u,e,r)},checkPoint:function(e,r,n,a,o,i,s){if(sr(e,r,this.points,i,s,a,o-2*this.cornerLength,[0,-1],n)||sr(e,r,this.points,i,s,a-2*this.cornerLength,o,[0,-1],n))return!0;var l=this.generateCutTrianglePts(a,o,i,s);return Rt(e,r,l.topLeft)||Rt(e,r,l.topRight)||Rt(e,r,l.bottomRight)||Rt(e,r,l.bottomLeft)}}};ur.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Nt(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,i,s){var l=.15,u=.5,f=.85,h=this.generateBarrelBezierPts(n+2*s,a+2*s,e,r),v=function(g){var m=cn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),p=cn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},u),y=cn({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f);return[g[0],g[1],m.x,m.y,p.x,p.y,y.x,y.y,g[4],g[5]]},c=[].concat(v(h.topLeft),v(h.topRight),v(h.bottomRight),v(h.bottomLeft));return Zn(o,i,c,e,r)},generateBarrelBezierPts:function(e,r,n,a){var o=r/2,i=e/2,s=n-i,l=n+i,u=a-o,f=a+o,h=ji(e,r),v=h.heightOffset,c=h.widthOffset,d=h.ctrlPtOffsetPct*e,g={topLeft:[s,u+v,s+d,u,s+c,u],topRight:[l-c,u,l-d,u,l,u+v],bottomRight:[l,f-v,l-d,f,l-c,f],bottomLeft:[s+c,f,s+d,f,s,f-v]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,r,n,a,o,i,s){var l=ji(a,o),u=l.heightOffset,f=l.widthOffset;if(sr(e,r,this.points,i,s,a,o-2*u,[0,-1],n)||sr(e,r,this.points,i,s,a-2*f,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(a,o,i,s),v=function(S,N,M){var b=M[4],T=M[2],E=M[0],D=M[5],C=M[1],P=Math.min(b,E),I=Math.max(b,E),R=Math.min(D,C),F=Math.max(D,C);if(P<=S&&S<=I&&R<=N&&N<=F){var _=f0(b,T,E),H=n0(_[0],_[1],_[2],S),k=H.filter(function(G){return 0<=G&&G<=1});if(k.length>0)return k[0]}return null},c=Object.keys(h),d=0;d<c.length;d++){var g=c[d],m=h[g],p=v(e,r,m);if(p!=null){var y=m[5],w=m[3],x=m[1],L=gt(y,w,x,p);if(m.isTop&&L<=r||m.isBottom&&r<=L)return!0}}return!1}}};ur.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Nt(4,0),draw:function(e,r,n,a,o){this.renderer.nodeShapeImpl(this.name,e,r,n,a,o)},intersectLine:function(e,r,n,a,o,i,s){var l=e-(n/2+s),u=r-(a/2+s),f=u,h=e+(n/2+s),v=Tr(o,i,e,r,l,u,h,f,!1);return v.length>0?v:Fu(o,i,e,r,n,a,s)},checkPoint:function(e,r,n,a,o,i,s){var l=fa(a,o),u=2*l;if(sr(e,r,this.points,i,s,a,o-u,[0,-1],n)||sr(e,r,this.points,i,s,a-u,o,[0,-1],n))return!0;var f=a/2+2*n,h=o/2+2*n,v=[i-f,s-h,i-f,s,i+f,s,i+f,s-h];return!!(Rt(e,r,v)||Ur(e,r,u,u,i+a/2-l,s+o/2-l,n)||Ur(e,r,u,u,i-a/2+l,s+o/2-l,n))}}};ur.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Nt(3,0)),this.generateRoundPolygon("round-triangle",Nt(3,0)),this.generatePolygon("rectangle",Nt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Nt(5,0)),this.generateRoundPolygon("round-pentagon",Nt(5,0)),this.generatePolygon("hexagon",Nt(6,0)),this.generateRoundPolygon("round-hexagon",Nt(6,0)),this.generatePolygon("heptagon",Nt(7,0)),this.generateRoundPolygon("round-heptagon",Nt(7,0)),this.generatePolygon("octagon",Nt(8,0)),this.generateRoundPolygon("round-octagon",Nt(8,0));var n=new Array(20);{var a=Ji(5,0),o=Ji(5,Math.PI/5),i=.5*(3-Math.sqrt(5));i*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=i,o[s*2+1]*=i;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=o[s*2],n[s*4+3]=o[s*2+1]}n=_u(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}t.makePolygon=function(u){var f=u.join("$"),h="polygon-"+f,v;return(v=this[h])?v:e.generatePolygon(h,u)}};var da={};da.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};da.redraw=function(t){t=t||Ou();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};da.beforeRender=function(t,e){if(!this.destroyed){e==null&&it("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var hl=function(e,r,n){for(var a=e.beforeRenderCallbacks,o=0;o<a.length;o++)a[o].fn(r,n)};da.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function n(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){hl(t,!0,a);var o=or();t.render(t.renderOptions);var i=t.lastDrawTime=or();t.averageRedrawTime===void 0&&(t.averageRedrawTime=i-o),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=i-o;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else hl(t,!1,a);t.skipFrame=!1,Ya(n)}};Ya(r)}};var Pb=function(e){this.init(e)},Nf=Pb,Mn=Nf.prototype;Mn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Mn.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container();if(rt){var n=rt.document,a=n.head,o="__________cytoscape_stylesheet",i="__________cytoscape_container",s=n.getElementById(o)!=null;if(r.className.indexOf(i)<0&&(r.className=(r.className||"")+" "+i),!s){var l=n.createElement("style");l.id=o,l.innerHTML="."+i+" { position: relative; }",a.insertBefore(l,a.children[0])}var u=rt.getComputedStyle(r),f=u.getPropertyValue("position");f==="static"&&We("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=we(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Mn.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Mn.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Mn.isHeadless=function(){return!1};[Go,Df,Lf,Nn,ur,da].forEach(function(t){Fe(Mn,t)});var $i=1e3/60,Mf={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var o=hi.default(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),i=function(u,f){var h=or(),v=a.averageRedrawTime,c=a.lastRedrawTime,d=[],g=a.cy.extent(),m=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var p=or(),y=p-h,w=p-f;if(c<$i){var x=$i-(u?v:0);if(w>=e.deqFastCost*x)break}else if(u){if(y>=e.deqCost*c||y>=e.deqAvgCost*v)break}else if(w>=e.deqNoDrawCost*$i)break;var L=e.deq(n,m,g);if(L.length>0)for(var A=0;A<L.length;A++)d.push(L[A]);else break}d.length>0&&(e.onDeqd(n,d),!u&&e.shouldRedraw(n,d,m,g)&&o())},s=e.priority||No;a.beforeRender(i,s(n))}}}},Fb=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qa;To(this,t),this.idsByKey=new Kt,this.keyForId=new Kt,this.cachesByLvl=new Kt,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Co(t,[{key:"getIdsFor",value:function(r){r==null&&it("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new Cn,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),o=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(o,n),this.keyForId.set(n,o)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),o=this.getKey(r);return a!==o}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,o=n.get(r);return o||(o=new Kt,n.set(r,o),a.push(r)),o}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),o=this.getCache(a,n);return o!=null&&this.updateKeyMappingFor(r),o}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),o=this.getCache(a,n);return o}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var o=this.getKey(r);this.setCache(o,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var o=this.doesEleInvalidateKey(r);return o&&this.invalidateKey(a),o||this.getNumberOfIdsForKey(a)===0}}]),t}(),cl=25,Oa=50,Ga=-4,oo=3,Bb=7.99,kb=8,_b=1024,zb=1024,Gb=1024,Ub=.2,Vb=.8,Hb=10,$b=.15,Yb=.1,qb=.9,Wb=.9,Xb=100,Kb=1,fn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Zb=bt({getKey:null,doesEleInvalidateKey:qa,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Nu,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Gn=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=Zb(r);Fe(n,a),n.lookup=new Fb(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},dt=Gn.prototype;dt.reasons=fn;dt.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};dt.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};dt.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new sa.default(function(r,n){return n.reqs-r.reqs});return e};dt.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};dt.getElement=function(t,e,r,n,a){var o=this,i=this.renderer,s=i.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Ao(s*r))),n<Ga)n=Ga;else if(s>=Bb||n>oo)return null;var u=Math.pow(2,n),f=e.h*u,h=e.w*u,v=i.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,v))return null;var c=l.get(t,n);if(c&&c.invalidated&&(c.invalidated=!1,c.texture.invalidatedWidth-=c.width),c)return c;var d;if(f<=cl?d=cl:f<=Oa?d=Oa:d=Math.ceil(f/Oa)*Oa,f>Gb||h>zb)return null;var g=o.getTextureQueue(d),m=g[g.length-2],p=function(){return o.recycleTexture(d,h)||o.addTexture(d,h)};m||(m=g[g.length-1]),m||(m=p()),m.width-m.usedWidth<h&&(m=p());for(var y=function(I){return I&&I.scaledLabelShown===v},w=a&&a===fn.dequeue,x=a&&a===fn.highQuality,L=a&&a===fn.downscale,A,S=n+1;S<=oo;S++){var N=l.get(t,S);if(N){A=N;break}}var M=A&&A.level===n+1?A:null,b=function(){m.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,m.usedWidth,0,h,f)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,h,d),y(M))b();else if(y(A))if(x){for(var T=A.level;T>n;T--)M=o.getElement(t,e,r,T,fn.downscale);b()}else return o.queueElement(t,A.level-1),A;else{var E;if(!w&&!x&&!L)for(var D=n-1;D>=Ga;D--){var C=l.get(t,D);if(C){E=C;break}}if(y(E))return o.queueElement(t,n),E;m.context.translate(m.usedWidth,0),m.context.scale(u,u),this.drawElement(m.context,t,e,v,!1),m.context.scale(1/u,1/u),m.context.translate(-m.usedWidth,0)}return c={x:m.usedWidth,texture:m,level:n,scale:u,width:h,height:f,scaledLabelShown:v},m.usedWidth+=Math.ceil(h+kb),m.eleCaches.push(c),l.set(t,n,c),o.checkTextureFullness(m),c};dt.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};dt.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(!!a){for(var o=Ga;o<=oo;o++){var i=r.getForCachedKey(t,o);i&&n.push(i)}var s=r.invalidate(t);if(s)for(var l=0;l<n.length;l++){var u=n[l],f=u.texture;f.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}};dt.checkTextureUtility=function(t){t.invalidatedWidth>=Ub*t.width&&this.retireTexture(t)};dt.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>Vb&&t.fullnessChecks>=Hb?Mr(r,t):t.fullnessChecks++};dt.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Mr(n,t),t.retired=!0;for(var o=t.eleCaches,i=0;i<o.length;i++){var s=o[i];a.deleteCache(s.key,s.level)}Mo(o);var l=e.getRetiredTextureQueue(r);l.push(t)};dt.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(_b,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};dt.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),o=0;o<a.length;o++){var i=a[o];if(i.width>=e)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,Mo(i.eleCaches),i.context.setTransform(1,0,0,1,0,0),i.context.clearRect(0,0,i.width,i.height),Mr(a,i),n.push(i),i}};dt.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),o=this.getKey(t),i=a[o];if(i)i.level=Math.max(i.level,e),i.eles.merge(t),i.reqs++,n.updateItem(i);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:o};n.push(s),a[o]=s}};dt.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],o=e.lookup,i=0;i<Kb&&r.size()>0;i++){var s=r.pop(),l=s.key,u=s.eles[0],f=o.hasCache(u,s.level);if(n[l]=null,f)continue;a.push(s);var h=e.getBoundingBox(u);e.getElement(u,h,t,s.level,fn.dequeue)}return a};dt.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),o=n[a];o!=null&&(o.eles.length===1?(o.reqs=Lo,r.updateItem(o),r.pop(),n[a]=null):o.eles.unmerge(t))};dt.onDequeue=function(t){this.onDequeues.push(t)};dt.offDequeue=function(t){Mr(this.onDequeues,t)};dt.setupDequeueing=Mf.setupDequeueing({deqRedrawThreshold:Xb,deqCost:$b,deqAvgCost:Yb,deqNoDrawCost:qb,deqFastCost:Wb,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var o=0;o<r.length;o++)for(var i=r[o].eles,s=0;s<i.length;s++){var l=i[s].boundingBox();if(Oo(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Qb=1,Hn=-4,Ja=2,Jb=3.99,jb=50,e1=50,t1=.15,r1=.1,n1=.9,a1=.9,i1=1,vl=250,o1=4e3*4e3,s1=!0,Af=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=or()-2*vl,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=hi.default(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},e1),n.beforeRender(function(i,s){s-r.lastInvalidationTime<=vl?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var o=function(s,l){return l.reqs-s.reqs};r.layersQueue=new sa.default(o),r.setupDequeueing()},Et=Af.prototype,dl=0,l1=Math.pow(2,53)-1;Et.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),o=this.renderer.makeOffscreenCanvas(n,a),i={id:dl=++dl%l1,bb:t,level:e,width:n,height:a,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=i.context,l=-i.bb.x1,u=-i.bb.y1;return s.scale(r,r),s.translate(l,u),i};Et.getLayers=function(t,e,r){var n=this,a=n.renderer,o=a.cy,i=o.zoom(),s=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Ao(i*e)),r<Hn)r=Hn;else if(i>=Jb||r>Ja)return null}n.validateLayersElesOrdering(r,t);var l=n.layersByLevel,u=Math.pow(2,r),f=l[r]=l[r]||[],h,v=n.levelIsComplete(r,t),c,d=function(){var b=function(P){if(n.validateLayersElesOrdering(P,t),n.levelIsComplete(P,t))return c=l[P],!0},T=function(P){if(!c)for(var I=r+P;Hn<=I&&I<=Ja&&!b(I);I+=P);};T(1),T(-1);for(var E=f.length-1;E>=0;E--){var D=f[E];D.invalid&&Mr(f,D)}};if(!v)d();else return f;var g=function(){if(!h){h=It();for(var b=0;b<t.length;b++)Jy(h,t[b].boundingBox())}return h},m=function(b){b=b||{};var T=b.after;g();var E=h.w*u*(h.h*u);if(E>o1)return null;var D=n.makeLayer(h,r);if(T!=null){var C=f.indexOf(T)+1;f.splice(C,0,D)}else(b.insert===void 0||b.insert)&&f.unshift(D);return D};if(n.skipping&&!s)return null;for(var p=null,y=t.length/Qb,w=!s,x=0;x<t.length;x++){var L=t[x],A=L._private.rscratch,S=A.imgLayerCaches=A.imgLayerCaches||{},N=S[r];if(N){p=N;continue}if((!p||p.eles.length>=y||!Pu(p.bb,L.boundingBox()))&&(p=m({insert:!0,after:p}),!p))return null;c||w?n.queueLayer(p,L):n.drawEleInLayer(p,L,r,e),p.eles.push(L),S[r]=p}return c||(w?null:f)};Et.getEleLevelForLayerLevel=function(t,e){return t};Et.drawEleInLayer=function(t,e,r,n){var a=this,o=this.renderer,i=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),o.setImgSmoothing(i,!1),o.drawCachedElement(i,e,null,null,r,s1),o.setImgSmoothing(i,!0))};Et.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,o=0;o<n.length;o++){var i=n[o];if(i.reqs>0||i.invalid)return!1;a+=i.eles.length}return a===e.length};Et.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(!!r)for(var n=0;n<r.length;n++){for(var a=r[n],o=-1,i=0;i<e.length;i++)if(a.eles[0]===e[i]){o=i;break}if(o<0){this.invalidateLayer(a);continue}for(var s=o,i=0;i<a.eles.length;i++)if(a.eles[i]!==e[s+i]){this.invalidateLayer(a);break}}};Et.updateElementsInLayers=function(t,e){for(var r=this,n=ua(t[0]),a=0;a<t.length;a++)for(var o=n?null:t[a],i=n?t[a]:t[a].ele,s=i._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=Hn;u<=Ja;u++){var f=l[u];!f||o&&r.getEleLevelForLayerLevel(f.level)!==o.level||e(f,i,o)}};Et.haveLayers=function(){for(var t=this,e=!1,r=Hn;r<=Ja;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};Et.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=or(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,o){e.invalidateLayer(n)}))};Et.invalidateLayer=function(t){if(this.lastInvalidationTime=or(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Mr(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var o=r[a]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};Et.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,o){var i=n.replacement;if(i||(i=n.replacement=e.makeLayer(n.bb,n.level),i.replaces=n,i.eles=n.eles),!i.reqs)for(var s=0;s<i.eles.length;s++)e.queueLayer(i,i.eles[s])})};Et.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Et.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,o=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;a.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};Et.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<i1&&r.size()!==0;){var o=r.peek();if(o.replacement){r.pop();continue}if(o.replaces&&o!==o.replaces.replacement){r.pop();continue}if(o.invalid){r.pop();continue}var i=o.elesQueue.shift();i&&(e.drawEleInLayer(o,i,o.level,t),a++),n.length===0&&n.push(!0),o.elesQueue.length===0&&(r.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return n};Et.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var o=0;o<t.eles.length;o++){var i=t.eles[o]._private,s=i.imgLayerCaches=i.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};Et.requestRedraw=hi.default(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Et.setupDequeueing=Mf.setupDequeueing({deqRedrawThreshold:jb,deqCost:t1,deqAvgCost:r1,deqNoDrawCost:n1,deqFastCost:a1,deq:function(e,r){return e.dequeue(r)},onDeqd:No,shouldRedraw:Nu,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Of={},gl;function u1(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function f1(t,e,r){for(var n,a=0;a<e.length;a++){var o=e[a];a===0&&(n=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function pl(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var o=n[a];t.lineTo(o.x,o.y)}var i=r,s=r[0];t.moveTo(s.x,s.y);for(var a=1;a<i.length;a++){var o=i[a];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function h1(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var o=e,i=o[0];t.moveTo(i.x,i.y);for(var s=0;s<o.length;s++){var l=o[s];t.lineTo(l.x,l.y)}t.closePath&&t.closePath()}function c1(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}Of.arrowShapeImpl=function(t){return(gl||(gl={polygon:u1,"triangle-backcurve":f1,"triangle-tee":pl,"circle-triangle":h1,"triangle-cross":pl,circle:c1}))[t]};var jt={};jt.drawElement=function(t,e,r,n,a,o){var i=this;e.isNode()?i.drawNode(t,e,r,n,a,o):i.drawEdge(t,e,r,n,a,o)};jt.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};jt.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};jt.drawCachedElementPortion=function(t,e,r,n,a,o,i,s){var l=this,u=r.getBoundingBox(e);if(!(u.w===0||u.h===0)){var f=r.getElement(e,u,n,a,o);if(f!=null){var h=s(l,e);if(h===0)return;var v=i(l,e),c=u.x1,d=u.y1,g=u.w,m=u.h,p,y,w,x,L;if(v!==0){var A=r.getRotationPoint(e);w=A.x,x=A.y,t.translate(w,x),t.rotate(v),L=l.getImgSmoothing(t),L||l.setImgSmoothing(t,!0);var S=r.getRotationOffset(e);p=S.x,y=S.y}else p=c,y=d;var N;h!==1&&(N=t.globalAlpha,t.globalAlpha=N*h),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,p,y,g,m),h!==1&&(t.globalAlpha=N),v!==0&&(t.rotate(-v),t.translate(-w,-x),L||l.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var v1=function(){return 0},d1=function(e,r){return e.getTextAngle(r,null)},g1=function(e,r){return e.getTextAngle(r,"source")},p1=function(e,r){return e.getTextAngle(r,"target")},m1=function(e,r){return r.effectiveOpacity()},Yi=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};jt.drawCachedElement=function(t,e,r,n,a,o){var i=this,s=i.data,l=s.eleTxrCache,u=s.lblTxrCache,f=s.slbTxrCache,h=s.tlbTxrCache,v=e.boundingBox(),c=o===!0?l.reasons.highQuality:null;if(!(v.w===0||v.h===0||!e.visible())&&(!n||Oo(v,n))){var d=e.isEdge(),g=e.element()._private.rscratch.badLine;i.drawElementUnderlay(t,e),i.drawCachedElementPortion(t,e,l,r,a,c,v1,m1),(!d||!g)&&i.drawCachedElementPortion(t,e,u,r,a,c,d1,Yi),d&&!g&&(i.drawCachedElementPortion(t,e,f,r,a,c,g1,Yi),i.drawCachedElementPortion(t,e,h,r,a,c,p1,Yi)),i.drawElementOverlay(t,e)}};jt.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};jt.drawCachedElements=function(t,e,r,n){for(var a=this,o=0;o<e.length;o++){var i=e[o];a.drawCachedElement(t,i,r,n)}};jt.drawCachedNodes=function(t,e,r,n){for(var a=this,o=0;o<e.length;o++){var i=e[o];!i.isNode()||a.drawCachedElement(t,i,r,n)}};jt.drawLayeredElements=function(t,e,r,n){var a=this,o=a.data.lyrTxrCache.getLayers(e,r);if(o)for(var i=0;i<o.length;i++){var s=o[i],l=s.bb;l.w===0||l.h===0||t.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(t,e,r,n)};var fr={};fr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;r&&(l=r,t.translate(-l.x1,-l.y1));var u=o?e.pstyle("opacity").value:1,f=o?e.pstyle("line-opacity").value:1,h=e.pstyle("curve-style").value,v=e.pstyle("line-style").value,c=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,g=u*f,m=u*f,p=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;h==="straight-triangle"?(i.eleStrokeStyle(t,e,E),i.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=c,t.lineCap=d,i.eleStrokeStyle(t,e,E),i.drawEdgePath(e,t,s.allpts,v),t.lineCap="butt")},y=function(){!a||i.drawEdgeOverlay(t,e)},w=function(){!a||i.drawEdgeUnderlay(t,e)},x=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;i.drawArrowheads(t,e,E)},L=function(){i.drawElementText(t,e,null,n)};t.lineJoin="round";var A=e.pstyle("ghost").value==="yes";if(A){var S=e.pstyle("ghost-offset-x").pfValue,N=e.pstyle("ghost-offset-y").pfValue,M=e.pstyle("ghost-opacity").value,b=g*M;t.translate(S,N),p(b),x(b),t.translate(-S,-N)}w(),p(),x(),y(),L(),r&&t.translate(l.x1,l.y1)}};var Rf=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(!!n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var o=this,i=o.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,f=n.pstyle("".concat(e,"-color")).value;r.lineWidth=u,s.edgeType==="self"&&!i?r.lineCap="butt":r.lineCap="round",o.colorStrokeStyle(r,f[0],f[1],f[2],a),o.drawEdgePath(n,r,s.allpts,"solid")}}}};fr.drawEdgeOverlay=Rf("overlay");fr.drawEdgeUnderlay=Rf("underlay");fr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,o=e,i,s=!1,l=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(l){var h=r.join("$"),v=a.pathCacheKey&&a.pathCacheKey===h;v?(i=e=a.pathCache,s=!0):(i=e=new Path2D,a.pathCacheKey=h,a.pathCache=i)}if(o.setLineDash)switch(n){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=f;break;case"solid":o.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var c=2;c+3<r.length;c+=4)e.quadraticCurveTo(r[c],r[c+1],r[c+2],r[c+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<r.length;d+=2)e.lineTo(r[d],r[d+1]);break}e=o,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])};fr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var o=[r[a+2]-r[a],r[a+3]-r[a+1]],i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/i,-o[0]/i],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(r[a]-l[0],r[a+1]-l[1]),e.lineTo(r[a]+l[0],r[a+1]+l[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};fr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};fr.drawArrowhead=function(t,e,r,n,a,o,i){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(o)||o==null)){var s=this,l=e.pstyle(r+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,h=e.pstyle("width").pfValue,v=e.pstyle("opacity").value;i===void 0&&(i=v);var c=t.globalCompositeOperation;(i!==1||f==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,u,h,l,n,a,o),t.globalCompositeOperation=c);var d=e.pstyle(r+"-arrow-color").value;s.colorFillStyle(t,d[0],d[1],d[2],i),s.colorStrokeStyle(t,d[0],d[1],d[2],i),s.drawArrowShape(e,t,f,h,l,n,a,o)}}};fr.drawArrowShape=function(t,e,r,n,a,o,i,s){var l=this,u=this.usePaths()&&a!=="triangle-cross",f=!1,h,v=e,c={x:o,y:i},d=t.pstyle("arrow-scale").value,g=this.getArrowWidth(n,d),m=l.arrowShapes[a];if(u){var p=l.arrowPathCache=l.arrowPathCache||[],y=Vr(a),w=p[y];w!=null?(h=e=w,f=!0):(h=e=new Path2D,p[y]=h)}f||(e.beginPath&&e.beginPath(),u?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,g,s,c,n),e.closePath&&e.closePath()),e=v,u&&(e.translate(o,i),e.rotate(s),e.scale(g,g)),(r==="filled"||r==="both")&&(u?e.fill(h):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=(m.matchEdgeWidth?n:1)/(u?g:1),e.lineJoin="miter",u?e.stroke(h):e.stroke()),u&&(e.scale(1/g,1/g),e.rotate(-s),e.translate(-o,-i))};var Vo={};Vo.safeDrawImage=function(t,e,r,n,a,o,i,s,l,u){if(!(a<=0||o<=0||l<=0||u<=0))try{t.drawImage(e,r,n,a,o,i,s,l,u)}catch(f){We(f)}};Vo.drawInscribedImage=function(t,e,r,n,a){var o=this,i=r.position(),s=i.x,l=i.y,u=r.cy().style(),f=u.getIndexedStyle.bind(u),h=f(r,"background-fit","value",n),v=f(r,"background-repeat","value",n),c=r.width(),d=r.height(),g=r.padding()*2,m=c+(f(r,"background-width-relative-to","value",n)==="inner"?0:g),p=d+(f(r,"background-height-relative-to","value",n)==="inner"?0:g),y=r._private.rscratch,w=f(r,"background-clip","value",n),x=w==="node",L=f(r,"background-image-opacity","value",n)*a,A=f(r,"background-image-smoothing","value",n),S=e.width||e.cachedW,N=e.height||e.cachedH;(S==null||N==null)&&(document.body.appendChild(e),S=e.cachedW=e.width||e.offsetWidth,N=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var M=S,b=N;if(f(r,"background-width","value",n)!=="auto"&&(f(r,"background-width","units",n)==="%"?M=f(r,"background-width","pfValue",n)*m:M=f(r,"background-width","pfValue",n)),f(r,"background-height","value",n)!=="auto"&&(f(r,"background-height","units",n)==="%"?b=f(r,"background-height","pfValue",n)*p:b=f(r,"background-height","pfValue",n)),!(M===0||b===0)){if(h==="contain"){var T=Math.min(m/M,p/b);M*=T,b*=T}else if(h==="cover"){var T=Math.max(m/M,p/b);M*=T,b*=T}var E=s-m/2,D=f(r,"background-position-x","units",n),C=f(r,"background-position-x","pfValue",n);D==="%"?E+=(m-M)*C:E+=C;var P=f(r,"background-offset-x","units",n),I=f(r,"background-offset-x","pfValue",n);P==="%"?E+=(m-M)*I:E+=I;var R=l-p/2,F=f(r,"background-position-y","units",n),_=f(r,"background-position-y","pfValue",n);F==="%"?R+=(p-b)*_:R+=_;var H=f(r,"background-offset-y","units",n),k=f(r,"background-offset-y","pfValue",n);H==="%"?R+=(p-b)*k:R+=k,y.pathCache&&(E-=s,R-=l,s=0,l=0);var G=t.globalAlpha;t.globalAlpha=L;var q=o.getImgSmoothing(t),$=!1;if(A==="no"&&q?(o.setImgSmoothing(t,!1),$=!0):A==="yes"&&!q&&(o.setImgSmoothing(t,!0),$=!0),v==="no-repeat")x&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(r)].draw(t,s,l,m,p),t.clip())),o.safeDrawImage(t,e,0,0,S,N,E,R,M,b),x&&t.restore();else{var z=t.createPattern(e,v);t.fillStyle=z,o.nodeShapes[o.getNodeShape(r)].draw(t,s,l,m,p),t.translate(E,R),t.fill(),t.translate(-E,-R)}t.globalAlpha=G,$&&o.setImgSmoothing(t,q)}};var Qr={};Qr.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Ao(r*n));e=Math.pow(2,a)}var o=t.pstyle("font-size").pfValue*e,i=t.pstyle("min-zoomed-font-size").pfValue;return!(o<i)};Qr.drawElementText=function(t,e,r,n,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this;if(n==null){if(o&&!i.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=i.getLabelJustification(e);t.textAlign=l,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,f=e.pstyle("label"),h=e.pstyle("source-label"),v=e.pstyle("target-label");if(u||(!f||!f.value)&&(!h||!h.value)&&(!v||!v.value))return;t.textAlign="center",t.textBaseline="bottom"}var c=!r,d;r&&(d=r,t.translate(-d.x1,-d.y1)),a==null?(i.drawText(t,e,null,c,o),e.isEdge()&&(i.drawText(t,e,"source",c,o),i.drawText(t,e,"target",c,o))):i.drawText(t,e,a,c,o),r&&t.translate(d.x1,d.y1)};Qr.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Qr.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,i=e.pstyle("font-weight").strValue,s=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=n+" "+i+" "+a+" "+o,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],s),this.colorStrokeStyle(t,f[0],f[1],f[2],l)};function y1(t,e,r,n,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5;t.beginPath(),t.moveTo(e+o,r),t.lineTo(e+n-o,r),t.quadraticCurveTo(e+n,r,e+n,r+o),t.lineTo(e+n,r+a-o),t.quadraticCurveTo(e+n,r+a,e+n-o,r+a),t.lineTo(e+o,r+a),t.quadraticCurveTo(e,r+a,e,r+a-o),t.lineTo(e,r+o),t.quadraticCurveTo(e,r,e+o,r),t.closePath(),t.fill()}Qr.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,o=e?e+"-":"",i=t.pstyle(o+"text-rotation"),s=$t(a,"labelAngle",e);return i.strValue==="autorotate"?r=t.isEdge()?s:0:i.strValue==="none"?r=0:r=i.pfValue,r};Qr.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,i=o.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=$t(i,"labelX",r),u=$t(i,"labelY",r),f,h,v=this.getLabelText(e,r);if(v!=null&&v!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(t,e,a);var c=r?r+"-":"",d=$t(i,"labelWidth",r),g=$t(i,"labelHeight",r),m=e.pstyle(c+"text-margin-x").pfValue,p=e.pstyle(c+"text-margin-y").pfValue,y=e.isEdge(),w=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;y&&(w="center",x="center"),l+=m,u+=p;var L;switch(n?L=this.getTextAngle(e,r):L=0,L!==0&&(f=l,h=u,t.translate(f,h),t.rotate(L),l=0,u=0),x){case"top":break;case"center":u+=g/2;break;case"bottom":u+=g;break}var A=e.pstyle("text-background-opacity").value,S=e.pstyle("text-border-opacity").value,N=e.pstyle("text-border-width").pfValue,M=e.pstyle("text-background-padding").pfValue;if(A>0||N>0&&S>0){var b=l-M;switch(w){case"left":b-=d;break;case"center":b-=d/2;break}var T=u-g-M,E=d+2*M,D=g+2*M;if(A>0){var C=t.fillStyle,P=e.pstyle("text-background-color").value;t.fillStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+A*s+")";var I=e.pstyle("text-background-shape").strValue;I.indexOf("round")===0?y1(t,b,T,E,D,2):t.fillRect(b,T,E,D),t.fillStyle=C}if(N>0&&S>0){var R=t.strokeStyle,F=t.lineWidth,_=e.pstyle("text-border-color").value,H=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+_[0]+","+_[1]+","+_[2]+","+S*s+")",t.lineWidth=N,t.setLineDash)switch(H){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=N/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(t.strokeRect(b,T,E,D),H==="double"){var k=N/2;t.strokeRect(b+k,T+k,E-k*2,D-k*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=F,t.strokeStyle=R}}var G=2*e.pstyle("text-outline-width").pfValue;if(G>0&&(t.lineWidth=G),e.pstyle("text-wrap").value==="wrap"){var q=$t(i,"labelWrapCachedLines",r),$=$t(i,"labelLineHeight",r),z=d/2,V=this.getLabelJustification(e);switch(V==="auto"||(w==="left"?V==="left"?l+=-d:V==="center"&&(l+=-z):w==="center"?V==="left"?l+=-z:V==="right"&&(l+=z):w==="right"&&(V==="center"?l+=z:V==="right"&&(l+=d))),x){case"top":u-=(q.length-1)*$;break;case"center":case"bottom":u-=(q.length-1)*$;break}for(var B=0;B<q.length;B++)G>0&&t.strokeText(q[B],l,u),t.fillText(q[B],l,u),u+=$}else G>0&&t.strokeText(v,l,u),t.fillText(v,l,u);L!==0&&(t.rotate(-L),t.translate(-f,-h))}}};var An={};An.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,s,l,u=e._private,f=u.rscratch,h=e.position();if(!(!we(h.x)||!we(h.y))&&!(o&&!e.visible())){var v=o?e.effectiveOpacity():1,c=i.usePaths(),d,g=!1,m=e.padding();s=e.width()+2*m,l=e.height()+2*m;var p;r&&(p=r,t.translate(-p.x1,-p.y1));for(var y=e.pstyle("background-image"),w=y.value,x=new Array(w.length),L=new Array(w.length),A=0,S=0;S<w.length;S++){var N=w[S],M=x[S]=N!=null&&N!=="none";if(M){var b=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",S);A++,L[S]=i.getCachedImage(N,b,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var T=e.pstyle("background-blacken").value,E=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*v,C=e.pstyle("border-color").value,P=e.pstyle("border-style").value,I=e.pstyle("border-opacity").value*v;t.lineJoin="miter";var R=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;i.eleFillStyle(t,e,de)},F=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I;i.colorStrokeStyle(t,C[0],C[1],C[2],de)},_=e.pstyle("shape").strValue,H=e.pstyle("shape-polygon-points").pfValue;if(c){t.translate(h.x,h.y);var k=i.nodePathCache=i.nodePathCache||[],G=Lu(_==="polygon"?_+","+H.join(","):_,""+l,""+s),q=k[G];q!=null?(d=q,g=!0,f.pathCache=d):(d=new Path2D,k[G]=f.pathCache=d)}var $=function(){if(!g){var de=h;c&&(de={x:0,y:0}),i.nodeShapes[i.getNodeShape(e)].draw(d||t,de.x,de.y,s,l)}c?t.fill(d):t.fill()},z=function(){for(var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,fe=u.backgrounding,ye=0,ce=0;ce<L.length;ce++){var j=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ce);if(ie&&j==="over"||!ie&&j==="inside"){ye++;continue}x[ce]&&L[ce].complete&&!L[ce].error&&(ye++,i.drawInscribedImage(t,L[ce],e,ce,de))}u.backgrounding=ye!==A,fe!==u.backgrounding&&e.updateStyle(!1)},V=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;i.hasPie(e)&&(i.drawPie(t,e,ie),de&&(c||i.nodeShapes[i.getNodeShape(e)].draw(t,h.x,h.y,s,l)))},B=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v,ie=(T>0?T:-T)*de,fe=T>0?0:255;T!==0&&(i.colorFillStyle(t,fe,fe,fe,ie),c?t.fill(d):t.fill())},Y=function(){if(E>0){if(t.lineWidth=E,t.lineCap="butt",t.setLineDash)switch(P){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}if(c?t.stroke(d):t.stroke(),P==="double"){t.lineWidth=E/3;var de=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",c?t.stroke(d):t.stroke(),t.globalCompositeOperation=de}t.setLineDash&&t.setLineDash([])}},W=function(){a&&i.drawNodeOverlay(t,e,h,s,l)},J=function(){a&&i.drawNodeUnderlay(t,e,h,s,l)},le=function(){i.drawElementText(t,e,null,n)},pe=e.pstyle("ghost").value==="yes";if(pe){var Oe=e.pstyle("ghost-offset-x").pfValue,Q=e.pstyle("ghost-offset-y").pfValue,oe=e.pstyle("ghost-opacity").value,be=oe*v;t.translate(Oe,Q),R(oe*D),$(),z(be,!0),F(oe*I),Y(),V(T!==0||E!==0),z(be,!1),B(be),t.translate(-Oe,-Q)}c&&t.translate(-h.x,-h.y),J(),c&&t.translate(h.x,h.y),R(),$(),z(v,!0),F(),Y(),V(T!==0||E!==0),z(v,!1),B(),c&&t.translate(-h.x,-h.y),le(),W(),r&&t.translate(p.x1,p.y1)}};var If=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,o,i){var s=this;if(!!n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value;if(u>0){if(a=a||n.position(),o==null||i==null){var v=n.padding();o=n.width()+2*v,i=n.height()+2*v}s.colorFillStyle(r,f[0],f[1],f[2],u),s.nodeShapes[h].draw(r,a.x,a.y,o+l*2,i+l*2),r.fill()}}}};An.drawNodeOverlay=If("overlay");An.drawNodeUnderlay=If("underlay");An.hasPie=function(t){return t=t[0],t._private.hasPie};An.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),o=e.pstyle("pie-size"),i=n.x,s=n.y,l=e.width(),u=e.height(),f=Math.min(l,u)/2,h=0,v=this.usePaths();v&&(i=0,s=0),o.units==="%"?f=f*o.pfValue:o.pfValue!==void 0&&(f=o.pfValue/2);for(var c=1;c<=a.pieBackgroundN;c++){var d=e.pstyle("pie-"+c+"-background-size").value,g=e.pstyle("pie-"+c+"-background-color").value,m=e.pstyle("pie-"+c+"-background-opacity").value*r,p=d/100;p+h>1&&(p=1-h);var y=1.5*Math.PI+2*Math.PI*h,w=2*Math.PI*p,x=y+w;d===0||h>=1||h+p>1||(t.beginPath(),t.moveTo(i,s),t.arc(i,s,f,y,x),t.closePath(),this.colorFillStyle(t,g[0],g[1],g[2],m),t.fill(),h+=p)}};var kt={},w1=100;kt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};kt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};kt.createGradientStyleFor=function(t,e,r,n,a){var o,i=this.usePaths(),s=r.pstyle(e+"-gradient-stop-colors").value,l=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var u=r.sourceEndpoint(),f=r.targetEndpoint(),h=r.midpoint(),v=Hr(u,h),c=Hr(f,h);o=t.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(v,c))}else{var d=i?{x:0,y:0}:r.position(),g=r.paddedWidth(),m=r.paddedHeight();o=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(g,m))}else if(r.isEdge()){var p=r.sourceEndpoint(),y=r.targetEndpoint();o=t.createLinearGradient(p.x,p.y,y.x,y.y)}else{var w=i?{x:0,y:0}:r.position(),x=r.paddedWidth(),L=r.paddedHeight(),A=x/2,S=L/2,N=r.pstyle("background-gradient-direction").value;switch(N){case"to-bottom":o=t.createLinearGradient(w.x,w.y-S,w.x,w.y+S);break;case"to-top":o=t.createLinearGradient(w.x,w.y+S,w.x,w.y-S);break;case"to-left":o=t.createLinearGradient(w.x+A,w.y,w.x-A,w.y);break;case"to-right":o=t.createLinearGradient(w.x-A,w.y,w.x+A,w.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(w.x-A,w.y-S,w.x+A,w.y+S);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(w.x-A,w.y+S,w.x+A,w.y-S);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(w.x+A,w.y-S,w.x-A,w.y+S);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(w.x+A,w.y+S,w.x-A,w.y-S);break}}if(!o)return null;for(var M=l.length===s.length,b=s.length,T=0;T<b;T++)o.addColorStop(M?l[T]:T/(b-1),"rgba("+s[T][0]+","+s[T][1]+","+s[T][2]+","+a+")");return o};kt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};kt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};kt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};kt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};kt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};kt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};kt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],o=n[3],i=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(i=s);var l=a*i,u=o*i,f;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var h=r.canvasContainer;h.style.width=a+"px",h.style.height=o+"px";for(var v=0;v<e.CANVAS_LAYERS;v++)f=r.canvases[v],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=o+"px";for(var v=0;v<e.BUFFER_COUNT;v++)f=r.bufferCanvases[v],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=o+"px";e.textureMult=1,i<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=l*e.textureMult,f.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}};kt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};kt.render=function(t){t=t||Ou();var e=t.forcedContext,r=t.drawAllLayers,n=t.drawOnlyNodeLayer,a=t.forcedZoom,o=t.forcedPan,i=this,s=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=i.cy,u=i.data,f=u.canvasNeedsRedraw,h=i.textureOnViewport&&!e&&(i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming),v=t.motionBlur!==void 0?t.motionBlur:i.motionBlur,c=i.motionBlurPxRatio,d=l.hasCompoundNodes(),g=i.hoverData.draggingEles,m=!!(i.hoverData.selecting||i.touchData.selecting);v=v&&!e&&i.motionBlurEnabled&&!m;var p=v;e||(i.prevPxRatio!==s&&(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container),i.redrawHint("eles",!0),i.redrawHint("drag",!0)),i.prevPxRatio=s),!e&&i.motionBlurTimeout&&clearTimeout(i.motionBlurTimeout),v&&(i.mbFrames==null&&(i.mbFrames=0),i.mbFrames++,i.mbFrames<3&&(p=!1),i.mbFrames>i.minMbLowQualFrames&&(i.motionBlurPxRatio=i.mbPxRBlurry)),i.clearingMotionBlur&&(i.motionBlurPxRatio=1),i.textureDrawLastFrame&&!h&&(f[i.NODE]=!0,f[i.SELECT_BOX]=!0);var y=l.style(),w=l.zoom(),x=a!==void 0?a:w,L=l.pan(),A={x:L.x,y:L.y},S={zoom:w,pan:{x:L.x,y:L.y}},N=i.prevViewport,M=N===void 0||S.zoom!==N.zoom||S.pan.x!==N.pan.x||S.pan.y!==N.pan.y;!M&&!(g&&!d)&&(i.motionBlurPxRatio=1),o&&(A=o),x*=s,A.x*=s,A.y*=s;var b=i.getCachedZSortedEles();function T(Q,oe,be,me,de){var ie=Q.globalCompositeOperation;Q.globalCompositeOperation="destination-out",i.colorFillStyle(Q,255,255,255,i.motionBlurTransparency),Q.fillRect(oe,be,me,de),Q.globalCompositeOperation=ie}function E(Q,oe){var be,me,de,ie;!i.clearingMotionBlur&&(Q===u.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]||Q===u.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG])?(be={x:L.x*c,y:L.y*c},me=w*c,de=i.canvasWidth*c,ie=i.canvasHeight*c):(be=A,me=x,de=i.canvasWidth,ie=i.canvasHeight),Q.setTransform(1,0,0,1,0,0),oe==="motionBlur"?T(Q,0,0,de,ie):!e&&(oe===void 0||oe)&&Q.clearRect(0,0,de,ie),r||(Q.translate(be.x,be.y),Q.scale(me,me)),o&&Q.translate(o.x,o.y),a&&Q.scale(a,a)}if(h||(i.textureDrawLastFrame=!1),h){if(i.textureDrawLastFrame=!0,!i.textureCache){i.textureCache={},i.textureCache.bb=l.mutableElements().boundingBox(),i.textureCache.texture=i.data.bufferCanvases[i.TEXTURE_BUFFER];var D=i.data.bufferContexts[i.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,i.canvasWidth*i.textureMult,i.canvasHeight*i.textureMult),i.render({forcedContext:D,drawOnlyNodeLayer:!0,forcedPxRatio:s*i.textureMult});var S=i.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:i.canvasWidth,height:i.canvasHeight};S.mpan={x:(0-S.pan.x)/S.zoom,y:(0-S.pan.y)/S.zoom}}f[i.DRAG]=!1,f[i.NODE]=!1;var C=u.contexts[i.NODE],P=i.textureCache.texture,S=i.textureCache.viewport;C.setTransform(1,0,0,1,0,0),v?T(C,0,0,S.width,S.height):C.clearRect(0,0,S.width,S.height);var I=y.core("outside-texture-bg-color").value,R=y.core("outside-texture-bg-opacity").value;i.colorFillStyle(C,I[0],I[1],I[2],R),C.fillRect(0,0,S.width,S.height);var w=l.zoom();E(C,!1),C.clearRect(S.mpan.x,S.mpan.y,S.width/S.zoom/s,S.height/S.zoom/s),C.drawImage(P,S.mpan.x,S.mpan.y,S.width/S.zoom/s,S.height/S.zoom/s)}else i.textureOnViewport&&!e&&(i.textureCache=null);var F=l.extent(),_=i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming||i.hoverData.draggingEles||i.cy.animated(),H=i.hideEdgesOnViewport&&_,k=[];if(k[i.NODE]=!f[i.NODE]&&v&&!i.clearedForMotionBlur[i.NODE]||i.clearingMotionBlur,k[i.NODE]&&(i.clearedForMotionBlur[i.NODE]=!0),k[i.DRAG]=!f[i.DRAG]&&v&&!i.clearedForMotionBlur[i.DRAG]||i.clearingMotionBlur,k[i.DRAG]&&(i.clearedForMotionBlur[i.DRAG]=!0),f[i.NODE]||r||n||k[i.NODE]){var G=v&&!k[i.NODE]&&c!==1,C=e||(G?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]:u.contexts[i.NODE]),q=v&&!G?"motionBlur":void 0;E(C,q),H?i.drawCachedNodes(C,b.nondrag,s,F):i.drawLayeredElements(C,b.nondrag,s,F),i.debug&&i.drawDebugPoints(C,b.nondrag),!r&&!v&&(f[i.NODE]=!1)}if(!n&&(f[i.DRAG]||r||k[i.DRAG])){var G=v&&!k[i.DRAG]&&c!==1,C=e||(G?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]:u.contexts[i.DRAG]);E(C,v&&!G?"motionBlur":void 0),H?i.drawCachedNodes(C,b.drag,s,F):i.drawCachedElements(C,b.drag,s,F),i.debug&&i.drawDebugPoints(C,b.drag),!r&&!v&&(f[i.DRAG]=!1)}if(i.showFps||!n&&f[i.SELECT_BOX]&&!r){var C=e||u.contexts[i.SELECT_BOX];if(E(C),i.selection[4]==1&&(i.hoverData.selecting||i.touchData.selecting)){var w=i.cy.zoom(),$=y.core("selection-box-border-width").value/w;C.lineWidth=$,C.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",C.fillRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]),$>0&&(C.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",C.strokeRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]))}if(u.bgActivePosistion&&!i.hoverData.selecting){var w=i.cy.zoom(),z=u.bgActivePosistion;C.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",C.beginPath(),C.arc(z.x,z.y,y.core("active-bg-size").pfValue/w,0,2*Math.PI),C.fill()}var V=i.lastRedrawTime;if(i.showFps&&V){V=Math.round(V);var B=Math.round(1e3/V);C.setTransform(1,0,0,1,0,0),C.fillStyle="rgba(255, 0, 0, 0.75)",C.strokeStyle="rgba(255, 0, 0, 0.75)",C.lineWidth=1,C.fillText("1 frame = "+V+" ms = "+B+" fps",0,20);var Y=60;C.strokeRect(0,30,250,20),C.fillRect(0,30,250*Math.min(B/Y,1),20)}r||(f[i.SELECT_BOX]=!1)}if(v&&c!==1){var W=u.contexts[i.NODE],J=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_NODE],le=u.contexts[i.DRAG],pe=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_DRAG],Oe=function(oe,be,me){oe.setTransform(1,0,0,1,0,0),me||!p?oe.clearRect(0,0,i.canvasWidth,i.canvasHeight):T(oe,0,0,i.canvasWidth,i.canvasHeight);var de=c;oe.drawImage(be,0,0,i.canvasWidth*de,i.canvasHeight*de,0,0,i.canvasWidth,i.canvasHeight)};(f[i.NODE]||k[i.NODE])&&(Oe(W,J,k[i.NODE]),f[i.NODE]=!1),(f[i.DRAG]||k[i.DRAG])&&(Oe(le,pe,k[i.DRAG]),f[i.DRAG]=!1)}i.prevViewport=S,i.clearingMotionBlur&&(i.clearingMotionBlur=!1,i.motionBlurCleared=!0,i.motionBlur=!0),v&&(i.motionBlurTimeout=setTimeout(function(){i.motionBlurTimeout=null,i.clearedForMotionBlur[i.NODE]=!1,i.clearedForMotionBlur[i.DRAG]=!1,i.motionBlur=!1,i.clearingMotionBlur=!h,i.mbFrames=0,f[i.NODE]=!0,f[i.DRAG]=!0,i.redraw()},w1)),e||l.emit("render")};var Pr={};Pr.drawPolygonPath=function(t,e,r,n,a,o){var i=n/2,s=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+i*o[0],r+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+i*o[l*2],r+s*o[l*2+1]);t.closePath()};Pr.drawRoundPolygonPath=function(t,e,r,n,a,o){var i=n/2,s=a/2,l=Ro(n,a);t.beginPath&&t.beginPath();for(var u=0;u<o.length/4;u++){var f=void 0,h=void 0;u===0?f=o.length-2:f=u*4-2,h=u*4+2;var v=e+i*o[u*4],c=r+s*o[u*4+1],d=-o[f]*o[h]-o[f+1]*o[h+1],g=l/Math.tan(Math.acos(d)/2),m=v-g*o[f],p=c-g*o[f+1],y=v+g*o[h],w=c+g*o[h+1];u===0?t.moveTo(m,p):t.lineTo(m,p),t.arcTo(v,c,y,w,l)}t.closePath()};Pr.drawRoundRectanglePath=function(t,e,r,n,a){var o=n/2,i=a/2,s=fa(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-i),t.arcTo(e+o,r-i,e+o,r,s),t.arcTo(e+o,r+i,e,r+i,s),t.arcTo(e-o,r+i,e-o,r,s),t.arcTo(e-o,r-i,e,r-i,s),t.lineTo(e,r-i),t.closePath()};Pr.drawBottomRoundRectanglePath=function(t,e,r,n,a){var o=n/2,i=a/2,s=fa(n,a);t.beginPath&&t.beginPath(),t.moveTo(e,r-i),t.lineTo(e+o,r-i),t.lineTo(e+o,r),t.arcTo(e+o,r+i,e,r+i,s),t.arcTo(e-o,r+i,e-o,r,s),t.lineTo(e-o,r-i),t.lineTo(e,r-i),t.closePath()};Pr.drawCutRectanglePath=function(t,e,r,n,a){var o=n/2,i=a/2,s=zu();t.beginPath&&t.beginPath(),t.moveTo(e-o+s,r-i),t.lineTo(e+o-s,r-i),t.lineTo(e+o,r-i+s),t.lineTo(e+o,r+i-s),t.lineTo(e+o-s,r+i),t.lineTo(e-o+s,r+i),t.lineTo(e-o,r+i-s),t.lineTo(e-o,r-i+s),t.closePath()};Pr.drawBarrelPath=function(t,e,r,n,a){var o=n/2,i=a/2,s=e-o,l=e+o,u=r-i,f=r+i,h=ji(n,a),v=h.widthOffset,c=h.heightOffset,d=h.ctrlPtOffsetPct*v;t.beginPath&&t.beginPath(),t.moveTo(s,u+c),t.lineTo(s,f-c),t.quadraticCurveTo(s+d,f,s+v,f),t.lineTo(l-v,f),t.quadraticCurveTo(l-d,f,l,f-c),t.lineTo(l,u+c),t.quadraticCurveTo(l-d,u,l-v,u),t.lineTo(s+v,u),t.quadraticCurveTo(s+d,u,s,u+c),t.closePath()};var ml=Math.sin(0),yl=Math.cos(0),so={},lo={},Pf=Math.PI/40;for(var on=0*Math.PI;on<2*Math.PI;on+=Pf)so[on]=Math.sin(on),lo[on]=Math.cos(on);Pr.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var o,i,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=Pf)o=e-s*so[u]*ml+s*lo[u]*yl,i=r+l*lo[u]*ml+l*so[u]*yl,u===0?t.moveTo(o,i):t.lineTo(o,i);t.closePath()};var ga={};ga.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};ga.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),o=t.full?Math.ceil(n.w):a[2],i=t.full?Math.ceil(n.h):a[3],s=we(t.maxWidth)||we(t.maxHeight),l=this.getPixelRatio(),u=1;if(t.scale!==void 0)o*=t.scale,i*=t.scale,u=t.scale;else if(s){var f=1/0,h=1/0;we(t.maxWidth)&&(f=u*t.maxWidth/o),we(t.maxHeight)&&(h=u*t.maxHeight/i),u=Math.min(f,h),o*=u,i*=u}s||(o*=l,i*=l,u*=l);var v=document.createElement("canvas");v.width=o,v.height=i,v.style.width=o+"px",v.style.height=i+"px";var c=v.getContext("2d");if(o>0&&i>0){c.clearRect(0,0,o,i),c.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(t.full)c.translate(-n.x1*u,-n.y1*u),c.scale(u,u),this.drawElements(c,d),c.scale(1/u,1/u),c.translate(n.x1*u,n.y1*u);else{var g=e.pan(),m={x:g.x*u,y:g.y*u};u*=e.zoom(),c.translate(m.x,m.y),c.scale(u,u),this.drawElements(c,d),c.scale(1/u,1/u),c.translate(-m.x,-m.y)}t.bg&&(c.globalCompositeOperation="destination-over",c.fillStyle=t.bg,c.rect(0,0,o,i),c.fill())}return v};function b1(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return new Blob([n],{type:e})}function wl(t){var e=t.indexOf(",");return t.substr(e+1)}function Ff(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new Sn(function(a,o){try{e.toBlob(function(i){i!=null?a(i):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(i){o(i)}});case"blob":return b1(wl(n()),r);case"base64":return wl(n());case"base64uri":default:return n()}}ga.png=function(t){return Ff(t,this.bufferCanvasImage(t),"image/png")};ga.jpg=function(t){return Ff(t,this.bufferCanvasImage(t),"image/jpeg")};var Bf={};Bf.nodeShapeImpl=function(t,e,r,n,a,o,i){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,o);case"polygon":return this.drawPolygonPath(e,r,n,a,o,i);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,o,i);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,o);case"barrel":return this.drawBarrelPath(e,r,n,a,o)}};var E1=kf,Ve=kf.prototype;Ve.CANVAS_LAYERS=3;Ve.SELECT_BOX=0;Ve.DRAG=1;Ve.NODE=2;Ve.BUFFER_COUNT=3;Ve.TEXTURE_BUFFER=0;Ve.MOTIONBLUR_BUFFER_NODE=1;Ve.MOTIONBLUR_BUFFER_DRAG=2;function kf(t){var e=this;e.data={canvases:new Array(Ve.CANVAS_LAYERS),contexts:new Array(Ve.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ve.CANVAS_LAYERS),bufferCanvases:new Array(Ve.BUFFER_COUNT),bufferContexts:new Array(Ve.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[r]=n;var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ny()&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var s=0;s<Ve.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(i).forEach(function(V){l.style[V]=i[V]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(Ve.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ve.NODE].setAttribute("data-id","layer"+Ve.NODE+"-node"),e.data.canvases[Ve.SELECT_BOX].setAttribute("data-id","layer"+Ve.SELECT_BOX+"-selectbox"),e.data.canvases[Ve.DRAG].setAttribute("data-id","layer"+Ve.DRAG+"-drag");for(var s=0;s<Ve.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=It(),f=function(B){return{x:(B.x1+B.x2)/2,y:(B.y1+B.y2)/2}},h=function(B){return{x:-B.w/2,y:-B.h/2}},v=function(B){var Y=B[0]._private,W=Y.oldBackgroundTimestamp===Y.backgroundTimestamp;return!W},c=function(B){return B[0]._private.nodeKey},d=function(B){return B[0]._private.labelStyleKey},g=function(B){return B[0]._private.sourceLabelStyleKey},m=function(B){return B[0]._private.targetLabelStyleKey},p=function(B,Y,W,J,le){return e.drawElement(B,Y,W,!1,!1,le)},y=function(B,Y,W,J,le){return e.drawElementText(B,Y,W,J,"main",le)},w=function(B,Y,W,J,le){return e.drawElementText(B,Y,W,J,"source",le)},x=function(B,Y,W,J,le){return e.drawElementText(B,Y,W,J,"target",le)},L=function(B){return B.boundingBox(),B[0]._private.bodyBounds},A=function(B){return B.boundingBox(),B[0]._private.labelBounds.main||u},S=function(B){return B.boundingBox(),B[0]._private.labelBounds.source||u},N=function(B){return B.boundingBox(),B[0]._private.labelBounds.target||u},M=function(B,Y){return Y},b=function(B){return f(L(B))},T=function(B,Y,W){var J=B?B+"-":"";return{x:Y.x+W.pstyle(J+"text-margin-x").pfValue,y:Y.y+W.pstyle(J+"text-margin-y").pfValue}},E=function(B,Y,W){var J=B[0]._private.rscratch;return{x:J[Y],y:J[W]}},D=function(B){return T("",E(B,"labelX","labelY"),B)},C=function(B){return T("source",E(B,"sourceLabelX","sourceLabelY"),B)},P=function(B){return T("target",E(B,"targetLabelX","targetLabelY"),B)},I=function(B){return h(L(B))},R=function(B){return h(S(B))},F=function(B){return h(N(B))},_=function(B){var Y=A(B),W=h(A(B));if(B.isNode()){switch(B.pstyle("text-halign").value){case"left":W.x=-Y.w;break;case"right":W.x=0;break}switch(B.pstyle("text-valign").value){case"top":W.y=-Y.h;break;case"bottom":W.y=0;break}}return W},H=e.data.eleTxrCache=new Gn(e,{getKey:c,doesEleInvalidateKey:v,drawElement:p,getBoundingBox:L,getRotationPoint:b,getRotationOffset:I,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),k=e.data.lblTxrCache=new Gn(e,{getKey:d,drawElement:y,getBoundingBox:A,getRotationPoint:D,getRotationOffset:_,isVisible:M}),G=e.data.slbTxrCache=new Gn(e,{getKey:g,drawElement:w,getBoundingBox:S,getRotationPoint:C,getRotationOffset:R,isVisible:M}),q=e.data.tlbTxrCache=new Gn(e,{getKey:m,drawElement:x,getBoundingBox:N,getRotationPoint:P,getRotationOffset:F,isVisible:M}),$=e.data.lyrTxrCache=new Af(e);e.onUpdateEleCalcs(function(B,Y){H.invalidateElements(Y),k.invalidateElements(Y),G.invalidateElements(Y),q.invalidateElements(Y),$.invalidateElements(Y);for(var W=0;W<Y.length;W++){var J=Y[W]._private;J.oldBackgroundTimestamp=J.backgroundTimestamp}});var z=function(B){for(var Y=0;Y<B.length;Y++)$.enqueueElementRefinement(B[Y].ele)};H.onDequeue(z),k.onDequeue(z),G.onDequeue(z),q.onDequeue(z)}Ve.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Ve.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Ve.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Ve.SELECT_BOX]=e;break}};var x1=typeof Path2D<"u";Ve.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Ve.usePaths=function(){return x1&&this.pathsEnabled};Ve.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Ve.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Ve.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas>"u"?"undefined":vt(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):(r=document.createElement("canvas"),r.width=t,r.height=e),r};[Of,jt,fr,Vo,Qr,An,kt,Pr,ga,Bf].forEach(function(t){Fe(Ve,t)});var T1=[{name:"null",impl:Ef},{name:"base",impl:Nf},{name:"canvas",impl:E1}],C1=[{type:"layout",extensions:Ob},{type:"renderer",extensions:T1}],_f={},zf={};function Gf(t,e,r){var n=r,a=function(N){We("Can not register `"+e+"` for `"+t+"` since `"+N+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(ea.prototype[e])return a(e);ea.prototype[e]=r}else if(t==="collection"){if(wt.prototype[e])return a(e);wt.prototype[e]=r}else if(t==="layout"){for(var o=function(N){this.options=N,r.call(this,N),Ue(this._private)||(this._private={}),this._private.cy=N.cy,this._private.listeners=[],this.createEmitter()},i=o.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];i[u]=i[u]||function(){return this}}i.start&&!i.run?i.run=function(){return this.start(),this}:!i.start&&i.run&&(i.start=function(){return this.run(),this});var f=r.prototype.stop;i.stop=function(){var S=this.options;if(S&&S.animate){var N=this.animations;if(N)for(var M=0;M<N.length;M++)N[M].stop()}return f?f.call(this):this.emit("layoutstop"),this},i.destroy||(i.destroy=function(){return this}),i.cy=function(){return this._private.cy};var h=function(N){return N._private.cy},v={addEventFields:function(N,M){M.layout=N,M.cy=h(N),M.target=N},bubble:function(){return!0},parent:function(N){return h(N)}};Fe(i,{createEmitter:function(){return this._private.emitter=new mi(v,this),this},emitter:function(){return this._private.emitter},on:function(N,M){return this.emitter().on(N,M),this},one:function(N,M){return this.emitter().one(N,M),this},once:function(N,M){return this.emitter().one(N,M),this},removeListener:function(N,M){return this.emitter().removeListener(N,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(N,M){return this.emitter().emit(N,M),this}}),qe.eventAliasesOn(i),n=o}else if(t==="renderer"&&e!=="null"&&e!=="base"){var c=Uf("renderer","base"),d=c.prototype,g=r,m=r.prototype,p=function(){c.apply(this,arguments),g.apply(this,arguments)},y=p.prototype;for(var w in d){var x=d[w],L=m[w]!=null;if(L)return a(w);y[w]=x}for(var A in m)y[A]=m[A];d.clientFunctions.forEach(function(S){y[S]=y[S]||function(){it("Renderer does not implement `renderer."+S+"()` on its prototype")}}),n=p}else if(t==="__proto__"||t==="constructor"||t==="prototype")return it(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return xu({map:_f,keys:[t,e],value:n})}function Uf(t,e){return Tu({map:_f,keys:[t,e]})}function S1(t,e,r,n,a){return xu({map:zf,keys:[t,e,r,n],value:a})}function D1(t,e,r,n){return Tu({map:zf,keys:[t,e,r,n]})}var uo=function(){if(arguments.length===2)return Uf.apply(null,arguments);if(arguments.length===3)return Gf.apply(null,arguments);if(arguments.length===4)return D1.apply(null,arguments);if(arguments.length===5)return S1.apply(null,arguments);it("Invalid extension access syntax")};ea.prototype.extension=uo;C1.forEach(function(t){t.extensions.forEach(function(e){Gf(t.type,e.name,e.impl)})});var Vf=function t(){if(!(this instanceof t))return new t;this.length=0},qr=Vf.prototype;qr.instanceString=function(){return"stylesheet"};qr.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};qr.css=function(t,e){var r=this.length-1;if(Re(t))this[r].properties.push({name:t,value:e});else if(Ue(t))for(var n=t,a=Object.keys(n),o=0;o<a.length;o++){var i=a[o],s=n[i];if(s!=null){var l=Tt.properties[i]||Tt.properties[ci(i)];if(l!=null){var u=l.name,f=s;this[r].properties.push({name:u,value:f})}}}return this};qr.style=qr.css;qr.generateStyle=function(t){var e=new Tt(t);return this.appendToStyle(e)};qr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var o=0;o<a.length;o++){var i=a[o];t.css(i.name,i.value)}}return t};var L1="3.23.0",Wr=function(e){if(e===void 0&&(e={}),Ue(e))return new ea(e);if(Re(e))return uo.apply(uo,arguments)};Wr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Wr),t.apply(null,e),this};Wr.warnings=function(t){return Mu(t)};Wr.version=L1;Wr.stylesheet=Wr.Stylesheet=Vf;var Hf=Wr,$f={exports:{}},qi={exports:{}},Wi={exports:{}},bl;function N1(){return bl||(bl=1,function(t,e){(function(n,a){t.exports=a()})(Gr,function(){return function(r){var n={};function a(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return r[o].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=r,a.c=n,a.i=function(o){return o},a.d=function(o,i,s){a.o(o,i)||Object.defineProperty(o,i,{configurable:!1,enumerable:!0,get:s})},a.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(i,"a",i),i},a.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},a.p="",a(a.s=28)}([function(r,n,a){function o(){}o.QUALITY=1,o.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,o.DEFAULT_INCREMENTAL=!1,o.DEFAULT_ANIMATION_ON_LAYOUT=!0,o.DEFAULT_ANIMATION_DURING_LAYOUT=!1,o.DEFAULT_ANIMATION_PERIOD=50,o.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,o.DEFAULT_GRAPH_MARGIN=15,o.NODE_DIMENSIONS_INCLUDE_LABELS=!1,o.SIMPLE_NODE_SIZE=40,o.SIMPLE_NODE_HALF_SIZE=o.SIMPLE_NODE_SIZE/2,o.EMPTY_COMPOUND_NODE_SIZE=40,o.MIN_EDGE_LENGTH=1,o.WORLD_BOUNDARY=1e6,o.INITIAL_WORLD_BOUNDARY=o.WORLD_BOUNDARY/1e3,o.WORLD_CENTER_X=1200,o.WORLD_CENTER_Y=900,r.exports=o},function(r,n,a){var o=a(2),i=a(8),s=a(9);function l(f,h,v){o.call(this,v),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=v,this.bendpoints=[],this.source=f,this.target=h}l.prototype=Object.create(o.prototype);for(var u in o)l[u]=o[u];l.prototype.getSource=function(){return this.source},l.prototype.getTarget=function(){return this.target},l.prototype.isInterGraph=function(){return this.isInterGraph},l.prototype.getLength=function(){return this.length},l.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},l.prototype.getBendpoints=function(){return this.bendpoints},l.prototype.getLca=function(){return this.lca},l.prototype.getSourceInLca=function(){return this.sourceInLca},l.prototype.getTargetInLca=function(){return this.targetInLca},l.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},l.prototype.getOtherEndInGraph=function(f,h){for(var v=this.getOtherEnd(f),c=h.getGraphManager().getRoot();;){if(v.getOwner()==h)return v;if(v.getOwner()==c)break;v=v.getOwner().getParent()}return null},l.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},l.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=l},function(r,n,a){function o(i){this.vGraphObject=i}r.exports=o},function(r,n,a){var o=a(2),i=a(10),s=a(13),l=a(0),u=a(16),f=a(5);function h(c,d,g,m){g==null&&m==null&&(m=d),o.call(this,m),c.graphManager!=null&&(c=c.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=m,this.edges=[],this.graphManager=c,g!=null&&d!=null?this.rect=new s(d.x,d.y,g.width,g.height):this.rect=new s}h.prototype=Object.create(o.prototype);for(var v in o)h[v]=o[v];h.prototype.getEdges=function(){return this.edges},h.prototype.getChild=function(){return this.child},h.prototype.getOwner=function(){return this.owner},h.prototype.getWidth=function(){return this.rect.width},h.prototype.setWidth=function(c){this.rect.width=c},h.prototype.getHeight=function(){return this.rect.height},h.prototype.setHeight=function(c){this.rect.height=c},h.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},h.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},h.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},h.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},h.prototype.getRect=function(){return this.rect},h.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},h.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},h.prototype.setRect=function(c,d){this.rect.x=c.x,this.rect.y=c.y,this.rect.width=d.width,this.rect.height=d.height},h.prototype.setCenter=function(c,d){this.rect.x=c-this.rect.width/2,this.rect.y=d-this.rect.height/2},h.prototype.setLocation=function(c,d){this.rect.x=c,this.rect.y=d},h.prototype.moveBy=function(c,d){this.rect.x+=c,this.rect.y+=d},h.prototype.getEdgeListToNode=function(c){var d=[],g=this;return g.edges.forEach(function(m){if(m.target==c){if(m.source!=g)throw"Incorrect edge source!";d.push(m)}}),d},h.prototype.getEdgesBetween=function(c){var d=[],g=this;return g.edges.forEach(function(m){if(!(m.source==g||m.target==g))throw"Incorrect edge source and/or target";(m.target==c||m.source==c)&&d.push(m)}),d},h.prototype.getNeighborsList=function(){var c=new Set,d=this;return d.edges.forEach(function(g){if(g.source==d)c.add(g.target);else{if(g.target!=d)throw"Incorrect incidency!";c.add(g.source)}}),c},h.prototype.withChildren=function(){var c=new Set,d,g;if(c.add(this),this.child!=null)for(var m=this.child.getNodes(),p=0;p<m.length;p++)d=m[p],g=d.withChildren(),g.forEach(function(y){c.add(y)});return c},h.prototype.getNoOfChildren=function(){var c=0,d;if(this.child==null)c=1;else for(var g=this.child.getNodes(),m=0;m<g.length;m++)d=g[m],c+=d.getNoOfChildren();return c==0&&(c=1),c},h.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},h.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},h.prototype.scatter=function(){var c,d,g=-l.INITIAL_WORLD_BOUNDARY,m=l.INITIAL_WORLD_BOUNDARY;c=l.WORLD_CENTER_X+u.nextDouble()*(m-g)+g;var p=-l.INITIAL_WORLD_BOUNDARY,y=l.INITIAL_WORLD_BOUNDARY;d=l.WORLD_CENTER_Y+u.nextDouble()*(y-p)+p,this.rect.x=c,this.rect.y=d},h.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var c=this.getChild();if(c.updateBounds(!0),this.rect.x=c.getLeft(),this.rect.y=c.getTop(),this.setWidth(c.getRight()-c.getLeft()),this.setHeight(c.getBottom()-c.getTop()),l.NODE_DIMENSIONS_INCLUDE_LABELS){var d=c.getRight()-c.getLeft(),g=c.getBottom()-c.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(d+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>d?(this.rect.x-=(this.labelWidth-d)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(d+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(g+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>g?(this.rect.y-=(this.labelHeight-g)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(g+this.labelHeight))}}},h.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},h.prototype.transform=function(c){var d=this.rect.x;d>l.WORLD_BOUNDARY?d=l.WORLD_BOUNDARY:d<-l.WORLD_BOUNDARY&&(d=-l.WORLD_BOUNDARY);var g=this.rect.y;g>l.WORLD_BOUNDARY?g=l.WORLD_BOUNDARY:g<-l.WORLD_BOUNDARY&&(g=-l.WORLD_BOUNDARY);var m=new f(d,g),p=c.inverseTransformPoint(m);this.setLocation(p.x,p.y)},h.prototype.getLeft=function(){return this.rect.x},h.prototype.getRight=function(){return this.rect.x+this.rect.width},h.prototype.getTop=function(){return this.rect.y},h.prototype.getBottom=function(){return this.rect.y+this.rect.height},h.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=h},function(r,n,a){var o=a(0);function i(){}for(var s in o)i[s]=o[s];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=i.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=i},function(r,n,a){function o(i,s){i==null&&s==null?(this.x=0,this.y=0):(this.x=i,this.y=s)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.setX=function(i){this.x=i},o.prototype.setY=function(i){this.y=i},o.prototype.getDifference=function(i){return new DimensionD(this.x-i.x,this.y-i.y)},o.prototype.getCopy=function(){return new o(this.x,this.y)},o.prototype.translate=function(i){return this.x+=i.width,this.y+=i.height,this},r.exports=o},function(r,n,a){var o=a(2),i=a(10),s=a(0),l=a(7),u=a(3),f=a(1),h=a(13),v=a(12),c=a(11);function d(m,p,y){o.call(this,y),this.estimatedSize=i.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=m,p!=null&&p instanceof l?this.graphManager=p:p!=null&&p instanceof Layout&&(this.graphManager=p.graphManager)}d.prototype=Object.create(o.prototype);for(var g in o)d[g]=o[g];d.prototype.getNodes=function(){return this.nodes},d.prototype.getEdges=function(){return this.edges},d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getParent=function(){return this.parent},d.prototype.getLeft=function(){return this.left},d.prototype.getRight=function(){return this.right},d.prototype.getTop=function(){return this.top},d.prototype.getBottom=function(){return this.bottom},d.prototype.isConnected=function(){return this.isConnected},d.prototype.add=function(m,p,y){if(p==null&&y==null){var w=m;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(w)>-1)throw"Node already in graph!";return w.owner=this,this.getNodes().push(w),w}else{var x=m;if(!(this.getNodes().indexOf(p)>-1&&this.getNodes().indexOf(y)>-1))throw"Source or target not in graph!";if(!(p.owner==y.owner&&p.owner==this))throw"Both owners must be this graph!";return p.owner!=y.owner?null:(x.source=p,x.target=y,x.isInterGraph=!1,this.getEdges().push(x),p.edges.push(x),y!=p&&y.edges.push(x),x)}},d.prototype.remove=function(m){var p=m;if(m instanceof u){if(p==null)throw"Node is null!";if(!(p.owner!=null&&p.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var y=p.edges.slice(),w,x=y.length,L=0;L<x;L++)w=y[L],w.isInterGraph?this.graphManager.remove(w):w.source.owner.remove(w);var A=this.nodes.indexOf(p);if(A==-1)throw"Node not in owner node list!";this.nodes.splice(A,1)}else if(m instanceof f){var w=m;if(w==null)throw"Edge is null!";if(!(w.source!=null&&w.target!=null))throw"Source and/or target is null!";if(!(w.source.owner!=null&&w.target.owner!=null&&w.source.owner==this&&w.target.owner==this))throw"Source and/or target owner is invalid!";var S=w.source.edges.indexOf(w),N=w.target.edges.indexOf(w);if(!(S>-1&&N>-1))throw"Source and/or target doesn't know this edge!";w.source.edges.splice(S,1),w.target!=w.source&&w.target.edges.splice(N,1);var A=w.source.owner.getEdges().indexOf(w);if(A==-1)throw"Not in owner's edge list!";w.source.owner.getEdges().splice(A,1)}},d.prototype.updateLeftTop=function(){for(var m=i.MAX_VALUE,p=i.MAX_VALUE,y,w,x,L=this.getNodes(),A=L.length,S=0;S<A;S++){var N=L[S];y=N.getTop(),w=N.getLeft(),m>y&&(m=y),p>w&&(p=w)}return m==i.MAX_VALUE?null:(L[0].getParent().paddingLeft!=null?x=L[0].getParent().paddingLeft:x=this.margin,this.left=p-x,this.top=m-x,new v(this.left,this.top))},d.prototype.updateBounds=function(m){for(var p=i.MAX_VALUE,y=-i.MAX_VALUE,w=i.MAX_VALUE,x=-i.MAX_VALUE,L,A,S,N,M,b=this.nodes,T=b.length,E=0;E<T;E++){var D=b[E];m&&D.child!=null&&D.updateBounds(),L=D.getLeft(),A=D.getRight(),S=D.getTop(),N=D.getBottom(),p>L&&(p=L),y<A&&(y=A),w>S&&(w=S),x<N&&(x=N)}var C=new h(p,w,y-p,x-w);p==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),b[0].getParent().paddingLeft!=null?M=b[0].getParent().paddingLeft:M=this.margin,this.left=C.x-M,this.right=C.x+C.width+M,this.top=C.y-M,this.bottom=C.y+C.height+M},d.calculateBounds=function(m){for(var p=i.MAX_VALUE,y=-i.MAX_VALUE,w=i.MAX_VALUE,x=-i.MAX_VALUE,L,A,S,N,M=m.length,b=0;b<M;b++){var T=m[b];L=T.getLeft(),A=T.getRight(),S=T.getTop(),N=T.getBottom(),p>L&&(p=L),y<A&&(y=A),w>S&&(w=S),x<N&&(x=N)}var E=new h(p,w,y-p,x-w);return E},d.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},d.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},d.prototype.calcEstimatedSize=function(){for(var m=0,p=this.nodes,y=p.length,w=0;w<y;w++){var x=p[w];m+=x.calcEstimatedSize()}return m==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=m/Math.sqrt(this.nodes.length),this.estimatedSize},d.prototype.updateConnected=function(){var m=this;if(this.nodes.length==0){this.isConnected=!0;return}var p=new c,y=new Set,w=this.nodes[0],x,L,A=w.withChildren();for(A.forEach(function(E){p.push(E),y.add(E)});p.length!==0;){w=p.shift(),x=w.getEdges();for(var S=x.length,N=0;N<S;N++){var M=x[N];if(L=M.getOtherEndInGraph(w,this),L!=null&&!y.has(L)){var b=L.withChildren();b.forEach(function(E){p.push(E),y.add(E)})}}}if(this.isConnected=!1,y.size>=this.nodes.length){var T=0;y.forEach(function(E){E.owner==m&&T++}),T==this.nodes.length&&(this.isConnected=!0)}},r.exports=d},function(r,n,a){var o,i=a(1);function s(l){o=a(6),this.layout=l,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var l=this.layout.newGraph(),u=this.layout.newNode(null),f=this.add(l,u);return this.setRootGraph(f),this.rootGraph},s.prototype.add=function(l,u,f,h,v){if(f==null&&h==null&&v==null){if(l==null)throw"Graph is null!";if(u==null)throw"Parent node is null!";if(this.graphs.indexOf(l)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(l),l.parent!=null)throw"Already has a parent!";if(u.child!=null)throw"Already has a child!";return l.parent=u,u.child=l,l}else{v=f,h=u,f=l;var c=h.getOwner(),d=v.getOwner();if(!(c!=null&&c.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(d!=null&&d.getGraphManager()==this))throw"Target not in this graph mgr!";if(c==d)return f.isInterGraph=!1,c.add(f,h,v);if(f.isInterGraph=!0,f.source=h,f.target=v,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},s.prototype.remove=function(l){if(l instanceof o){var u=l;if(u.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(u==this.rootGraph||u.parent!=null&&u.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(u.getEdges());for(var h,v=f.length,c=0;c<v;c++)h=f[c],u.remove(h);var d=[];d=d.concat(u.getNodes());var g;v=d.length;for(var c=0;c<v;c++)g=d[c],u.remove(g);u==this.rootGraph&&this.setRootGraph(null);var m=this.graphs.indexOf(u);this.graphs.splice(m,1),u.parent=null}else if(l instanceof i){if(h=l,h==null)throw"Edge is null!";if(!h.isInterGraph)throw"Not an inter-graph edge!";if(!(h.source!=null&&h.target!=null))throw"Source and/or target is null!";if(!(h.source.edges.indexOf(h)!=-1&&h.target.edges.indexOf(h)!=-1))throw"Source and/or target doesn't know this edge!";var m=h.source.edges.indexOf(h);if(h.source.edges.splice(m,1),m=h.target.edges.indexOf(h),h.target.edges.splice(m,1),!(h.source.owner!=null&&h.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(h.source.owner.getGraphManager().edges.indexOf(h)==-1)throw"Not in owner graph manager's edge list!";var m=h.source.owner.getGraphManager().edges.indexOf(h);h.source.owner.getGraphManager().edges.splice(m,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var l=[],u=this.getGraphs(),f=u.length,h=0;h<f;h++)l=l.concat(u[h].getNodes());this.allNodes=l}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var l=[],u=this.getGraphs();u.length;for(var f=0;f<u.length;f++)l=l.concat(u[f].getEdges());l=l.concat(this.edges),this.allEdges=l}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(l){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=l},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(l){if(l.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=l,l.parent==null&&(l.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(l,u){if(!(l!=null&&u!=null))throw"assert failed";if(l==u)return!0;var f=l.getOwner(),h;do{if(h=f.getParent(),h==null)break;if(h==u)return!0;if(f=h.getOwner(),f==null)break}while(!0);f=u.getOwner();do{if(h=f.getParent(),h==null)break;if(h==l)return!0;if(f=h.getOwner(),f==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var l,u,f,h,v,c=this.getAllEdges(),d=c.length,g=0;g<d;g++){if(l=c[g],u=l.source,f=l.target,l.lca=null,l.sourceInLca=u,l.targetInLca=f,u==f){l.lca=u.getOwner();continue}for(h=u.getOwner();l.lca==null;){for(l.targetInLca=f,v=f.getOwner();l.lca==null;){if(v==h){l.lca=v;break}if(v==this.rootGraph)break;if(l.lca!=null)throw"assert failed";l.targetInLca=v.getParent(),v=l.targetInLca.getOwner()}if(h==this.rootGraph)break;l.lca==null&&(l.sourceInLca=h.getParent(),h=l.sourceInLca.getOwner())}if(l.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(l,u){if(l==u)return l.getOwner();var f=l.getOwner();do{if(f==null)break;var h=u.getOwner();do{if(h==null)break;if(h==f)return h;h=h.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},s.prototype.calcInclusionTreeDepths=function(l,u){l==null&&u==null&&(l=this.rootGraph,u=1);for(var f,h=l.getNodes(),v=h.length,c=0;c<v;c++)f=h[c],f.inclusionTreeDepth=u,f.child!=null&&this.calcInclusionTreeDepths(f.child,u+1)},s.prototype.includesInvalidEdge=function(){for(var l,u=[],f=this.edges.length,h=0;h<f;h++)l=this.edges[h],this.isOneAncestorOfOther(l.source,l.target)&&u.push(l);for(var h=0;h<u.length;h++)this.remove(u[h]);return!1},r.exports=s},function(r,n,a){var o=a(12);function i(){}i.calcSeparationAmount=function(s,l,u,f){if(!s.intersects(l))throw"assert failed";var h=new Array(2);this.decideDirectionsForOverlappingNodes(s,l,h),u[0]=Math.min(s.getRight(),l.getRight())-Math.max(s.x,l.x),u[1]=Math.min(s.getBottom(),l.getBottom())-Math.max(s.y,l.y),s.getX()<=l.getX()&&s.getRight()>=l.getRight()?u[0]+=Math.min(l.getX()-s.getX(),s.getRight()-l.getRight()):l.getX()<=s.getX()&&l.getRight()>=s.getRight()&&(u[0]+=Math.min(s.getX()-l.getX(),l.getRight()-s.getRight())),s.getY()<=l.getY()&&s.getBottom()>=l.getBottom()?u[1]+=Math.min(l.getY()-s.getY(),s.getBottom()-l.getBottom()):l.getY()<=s.getY()&&l.getBottom()>=s.getBottom()&&(u[1]+=Math.min(s.getY()-l.getY(),l.getBottom()-s.getBottom()));var v=Math.abs((l.getCenterY()-s.getCenterY())/(l.getCenterX()-s.getCenterX()));l.getCenterY()===s.getCenterY()&&l.getCenterX()===s.getCenterX()&&(v=1);var c=v*u[0],d=u[1]/v;u[0]<d?d=u[0]:c=u[1],u[0]=-1*h[0]*(d/2+f),u[1]=-1*h[1]*(c/2+f)},i.decideDirectionsForOverlappingNodes=function(s,l,u){s.getCenterX()<l.getCenterX()?u[0]=-1:u[0]=1,s.getCenterY()<l.getCenterY()?u[1]=-1:u[1]=1},i.getIntersection2=function(s,l,u){var f=s.getCenterX(),h=s.getCenterY(),v=l.getCenterX(),c=l.getCenterY();if(s.intersects(l))return u[0]=f,u[1]=h,u[2]=v,u[3]=c,!0;var d=s.getX(),g=s.getY(),m=s.getRight(),p=s.getX(),y=s.getBottom(),w=s.getRight(),x=s.getWidthHalf(),L=s.getHeightHalf(),A=l.getX(),S=l.getY(),N=l.getRight(),M=l.getX(),b=l.getBottom(),T=l.getRight(),E=l.getWidthHalf(),D=l.getHeightHalf(),C=!1,P=!1;if(f===v){if(h>c)return u[0]=f,u[1]=g,u[2]=v,u[3]=b,!1;if(h<c)return u[0]=f,u[1]=y,u[2]=v,u[3]=S,!1}else if(h===c){if(f>v)return u[0]=d,u[1]=h,u[2]=N,u[3]=c,!1;if(f<v)return u[0]=m,u[1]=h,u[2]=A,u[3]=c,!1}else{var I=s.height/s.width,R=l.height/l.width,F=(c-h)/(v-f),_=void 0,H=void 0,k=void 0,G=void 0,q=void 0,$=void 0;if(-I===F?f>v?(u[0]=p,u[1]=y,C=!0):(u[0]=m,u[1]=g,C=!0):I===F&&(f>v?(u[0]=d,u[1]=g,C=!0):(u[0]=w,u[1]=y,C=!0)),-R===F?v>f?(u[2]=M,u[3]=b,P=!0):(u[2]=N,u[3]=S,P=!0):R===F&&(v>f?(u[2]=A,u[3]=S,P=!0):(u[2]=T,u[3]=b,P=!0)),C&&P)return!1;if(f>v?h>c?(_=this.getCardinalDirection(I,F,4),H=this.getCardinalDirection(R,F,2)):(_=this.getCardinalDirection(-I,F,3),H=this.getCardinalDirection(-R,F,1)):h>c?(_=this.getCardinalDirection(-I,F,1),H=this.getCardinalDirection(-R,F,3)):(_=this.getCardinalDirection(I,F,2),H=this.getCardinalDirection(R,F,4)),!C)switch(_){case 1:G=g,k=f+-L/F,u[0]=k,u[1]=G;break;case 2:k=w,G=h+x*F,u[0]=k,u[1]=G;break;case 3:G=y,k=f+L/F,u[0]=k,u[1]=G;break;case 4:k=p,G=h+-x*F,u[0]=k,u[1]=G;break}if(!P)switch(H){case 1:$=S,q=v+-D/F,u[2]=q,u[3]=$;break;case 2:q=T,$=c+E*F,u[2]=q,u[3]=$;break;case 3:$=b,q=v+D/F,u[2]=q,u[3]=$;break;case 4:q=M,$=c+-E*F,u[2]=q,u[3]=$;break}}return!1},i.getCardinalDirection=function(s,l,u){return s>l?u:1+u%4},i.getIntersection=function(s,l,u,f){if(f==null)return this.getIntersection2(s,l,u);var h=s.x,v=s.y,c=l.x,d=l.y,g=u.x,m=u.y,p=f.x,y=f.y,w=void 0,x=void 0,L=void 0,A=void 0,S=void 0,N=void 0,M=void 0,b=void 0,T=void 0;return L=d-v,S=h-c,M=c*v-h*d,A=y-m,N=g-p,b=p*m-g*y,T=L*N-A*S,T===0?null:(w=(S*b-N*M)/T,x=(A*M-L*b)/T,new o(w,x))},i.angleOfVector=function(s,l,u,f){var h=void 0;return s!==u?(h=Math.atan((f-l)/(u-s)),u<s?h+=Math.PI:f<l&&(h+=this.TWO_PI)):f<l?h=this.ONE_AND_HALF_PI:h=this.HALF_PI,h},i.doIntersect=function(s,l,u,f){var h=s.x,v=s.y,c=l.x,d=l.y,g=u.x,m=u.y,p=f.x,y=f.y,w=(c-h)*(y-m)-(p-g)*(d-v);if(w===0)return!1;var x=((y-m)*(p-h)+(g-p)*(y-v))/w,L=((v-d)*(p-h)+(c-h)*(y-v))/w;return 0<x&&x<1&&0<L&&L<1},i.findCircleLineIntersections=function(s,l,u,f,h,v,c){var d=(u-s)*(u-s)+(f-l)*(f-l),g=2*((s-h)*(u-s)+(l-v)*(f-l)),m=(s-h)*(s-h)+(l-v)*(l-v)-c*c,p=g*g-4*d*m;if(p>=0){var y=(-g+Math.sqrt(g*g-4*d*m))/(2*d),w=(-g-Math.sqrt(g*g-4*d*m))/(2*d),x=null;return y>=0&&y<=1?[y]:w>=0&&w<=1?[w]:x}else return null},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,r.exports=i},function(r,n,a){function o(){}o.sign=function(i){return i>0?1:i<0?-1:0},o.floor=function(i){return i<0?Math.ceil(i):Math.floor(i)},o.ceil=function(i){return i<0?Math.floor(i):Math.ceil(i)},r.exports=o},function(r,n,a){function o(){}o.MAX_VALUE=2147483647,o.MIN_VALUE=-2147483648,r.exports=o},function(r,n,a){var o=function(){function h(v,c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,g.key,g)}}return function(v,c,d){return c&&h(v.prototype,c),d&&h(v,d),v}}();function i(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}var s=function(v){return{value:v,next:null,prev:null}},l=function(v,c,d,g){return v!==null?v.next=c:g.head=c,d!==null?d.prev=c:g.tail=c,c.prev=v,c.next=d,g.length++,c},u=function(v,c){var d=v.prev,g=v.next;return d!==null?d.next=g:c.head=g,g!==null?g.prev=d:c.tail=d,v.prev=v.next=null,c.length--,v},f=function(){function h(v){var c=this;i(this,h),this.length=0,this.head=null,this.tail=null,v!=null&&v.forEach(function(d){return c.push(d)})}return o(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(c,d){return l(d.prev,s(c),d,this)}},{key:"insertAfter",value:function(c,d){return l(d,s(c),d.next,this)}},{key:"insertNodeBefore",value:function(c,d){return l(d.prev,c,d,this)}},{key:"insertNodeAfter",value:function(c,d){return l(d,c,d.next,this)}},{key:"push",value:function(c){return l(this.tail,s(c),null,this)}},{key:"unshift",value:function(c){return l(null,s(c),this.head,this)}},{key:"remove",value:function(c){return u(c,this)}},{key:"pop",value:function(){return u(this.tail,this).value}},{key:"popNode",value:function(){return u(this.tail,this)}},{key:"shift",value:function(){return u(this.head,this).value}},{key:"shiftNode",value:function(){return u(this.head,this)}},{key:"get_object_at",value:function(c){if(c<=this.length()){for(var d=1,g=this.head;d<c;)g=g.next,d++;return g.value}}},{key:"set_object_at",value:function(c,d){if(c<=this.length()){for(var g=1,m=this.head;g<c;)m=m.next,g++;m.value=d}}}]),h}();r.exports=f},function(r,n,a){function o(i,s,l){this.x=null,this.y=null,i==null&&s==null&&l==null?(this.x=0,this.y=0):typeof i=="number"&&typeof s=="number"&&l==null?(this.x=i,this.y=s):i.constructor.name=="Point"&&s==null&&l==null&&(l=i,this.x=l.x,this.y=l.y)}o.prototype.getX=function(){return this.x},o.prototype.getY=function(){return this.y},o.prototype.getLocation=function(){return new o(this.x,this.y)},o.prototype.setLocation=function(i,s,l){i.constructor.name=="Point"&&s==null&&l==null?(l=i,this.setLocation(l.x,l.y)):typeof i=="number"&&typeof s=="number"&&l==null&&(parseInt(i)==i&&parseInt(s)==s?this.move(i,s):(this.x=Math.floor(i+.5),this.y=Math.floor(s+.5)))},o.prototype.move=function(i,s){this.x=i,this.y=s},o.prototype.translate=function(i,s){this.x+=i,this.y+=s},o.prototype.equals=function(i){if(i.constructor.name=="Point"){var s=i;return this.x==s.x&&this.y==s.y}return this==i},o.prototype.toString=function(){return new o().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=o},function(r,n,a){function o(i,s,l,u){this.x=0,this.y=0,this.width=0,this.height=0,i!=null&&s!=null&&l!=null&&u!=null&&(this.x=i,this.y=s,this.width=l,this.height=u)}o.prototype.getX=function(){return this.x},o.prototype.setX=function(i){this.x=i},o.prototype.getY=function(){return this.y},o.prototype.setY=function(i){this.y=i},o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(i){this.width=i},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(i){this.height=i},o.prototype.getRight=function(){return this.x+this.width},o.prototype.getBottom=function(){return this.y+this.height},o.prototype.intersects=function(i){return!(this.getRight()<i.x||this.getBottom()<i.y||i.getRight()<this.x||i.getBottom()<this.y)},o.prototype.getCenterX=function(){return this.x+this.width/2},o.prototype.getMinX=function(){return this.getX()},o.prototype.getMaxX=function(){return this.getX()+this.width},o.prototype.getCenterY=function(){return this.y+this.height/2},o.prototype.getMinY=function(){return this.getY()},o.prototype.getMaxY=function(){return this.getY()+this.height},o.prototype.getWidthHalf=function(){return this.width/2},o.prototype.getHeightHalf=function(){return this.height/2},r.exports=o},function(r,n,a){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function i(){}i.lastID=0,i.createID=function(s){return i.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=i.getString(),i.lastID++),s.uniqueID)},i.getString=function(s){return s==null&&(s=i.lastID),"Object#"+s},i.isPrimitive=function(s){var l=typeof s>"u"?"undefined":o(s);return s==null||l!="object"&&l!="function"},r.exports=i},function(r,n,a){function o(g){if(Array.isArray(g)){for(var m=0,p=Array(g.length);m<g.length;m++)p[m]=g[m];return p}else return Array.from(g)}var i=a(0),s=a(7),l=a(3),u=a(1),f=a(6),h=a(5),v=a(17),c=a(29);function d(g){c.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}d.RANDOM_SEED=1,d.prototype=Object.create(c.prototype),d.prototype.getGraphManager=function(){return this.graphManager},d.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},d.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},d.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},d.prototype.newGraphManager=function(){var g=new s(this);return this.graphManager=g,g},d.prototype.newGraph=function(g){return new f(null,this.graphManager,g)},d.prototype.newNode=function(g){return new l(this.graphManager,g)},d.prototype.newEdge=function(g){return new u(null,null,g)},d.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},d.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g;return this.checkLayoutSuccess()?g=!1:g=this.layout(),i.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},d.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},d.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),m=0;m<g.length;m++)g[m];for(var p=this.graphManager.getRoot().getNodes(),m=0;m<p.length;m++)p[m];this.update(this.graphManager.getRoot())}},d.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof l){var m=g;if(m.getChild()!=null)for(var p=m.getChild().getNodes(),y=0;y<p.length;y++)update(p[y]);if(m.vGraphObject!=null){var w=m.vGraphObject;w.update(m)}}else if(g instanceof u){var x=g;if(x.vGraphObject!=null){var L=x.vGraphObject;L.update(x)}}else if(g instanceof f){var A=g;if(A.vGraphObject!=null){var S=A.vGraphObject;S.update(A)}}},d.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},d.prototype.transform=function(g){if(g==null)this.transform(new h(0,0));else{var m=new v,p=this.graphManager.getRoot().updateLeftTop();if(p!=null){m.setWorldOrgX(g.x),m.setWorldOrgY(g.y),m.setDeviceOrgX(p.x),m.setDeviceOrgY(p.y);for(var y=this.getAllNodes(),w,x=0;x<y.length;x++)w=y[x],w.transform(m)}}},d.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var m,p,y=g.getNodes(),w=0;w<y.length;w++)m=y[w],p=m.getChild(),p==null||p.getNodes().length==0?m.scatter():(this.positionNodesRandomly(p),m.updateBounds())},d.prototype.getFlatForest=function(){for(var g=[],m=!0,p=this.graphManager.getRoot().getNodes(),y=!0,w=0;w<p.length;w++)p[w].getChild()!=null&&(y=!1);if(!y)return g;var x=new Set,L=[],A=new Map,S=[];for(S=S.concat(p);S.length>0&&m;){for(L.push(S[0]);L.length>0&&m;){var N=L[0];L.splice(0,1),x.add(N);for(var M=N.getEdges(),w=0;w<M.length;w++){var b=M[w].getOtherEnd(N);if(A.get(N)!=b)if(!x.has(b))L.push(b),A.set(b,N);else{m=!1;break}}}if(!m)g=[];else{var T=[].concat(o(x));g.push(T);for(var w=0;w<T.length;w++){var E=T[w],D=S.indexOf(E);D>-1&&S.splice(D,1)}x=new Set,A=new Map}}return g},d.prototype.createDummyNodesForBendpoints=function(g){for(var m=[],p=g.source,y=this.graphManager.calcLowestCommonAncestor(g.source,g.target),w=0;w<g.bendpoints.length;w++){var x=this.newNode(null);x.setRect(new Point(0,0),new Dimension(1,1)),y.add(x);var L=this.newEdge(null);this.graphManager.add(L,p,x),m.add(x),p=x}var L=this.newEdge(null);return this.graphManager.add(L,p,g.target),this.edgeToDummyNodes.set(g,m),g.isInterGraph()?this.graphManager.remove(g):y.remove(g),m},d.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(o(this.edgeToDummyNodes.keys())).concat(g);for(var m=0;m<g.length;m++){var p=g[m];if(p.bendpoints.length>0){for(var y=this.edgeToDummyNodes.get(p),w=0;w<y.length;w++){var x=y[w],L=new h(x.getCenterX(),x.getCenterY()),A=p.bendpoints.get(w);A.x=L.x,A.y=L.y,x.getOwner().remove(x)}this.graphManager.add(p,p.source,p.target)}}},d.transform=function(g,m,p,y){if(p!=null&&y!=null){var w=m;if(g<=50){var x=m/p;w-=(m-x)/50*(50-g)}else{var L=m*y;w+=(L-m)/50*(g-50)}return w}else{var A,S;return g<=50?(A=9*m/500,S=m/10):(A=9*m/50,S=-8*m),A*g+S}},d.findCenterOfTree=function(g){var m=[];m=m.concat(g);var p=[],y=new Map,w=!1,x=null;(m.length==1||m.length==2)&&(w=!0,x=m[0]);for(var L=0;L<m.length;L++){var A=m[L],S=A.getNeighborsList().size;y.set(A,A.getNeighborsList().size),S==1&&p.push(A)}var N=[];for(N=N.concat(p);!w;){var M=[];M=M.concat(N),N=[];for(var L=0;L<m.length;L++){var A=m[L],b=m.indexOf(A);b>=0&&m.splice(b,1);var T=A.getNeighborsList();T.forEach(function(C){if(p.indexOf(C)<0){var P=y.get(C),I=P-1;I==1&&N.push(C),y.set(C,I)}})}p=p.concat(N),(m.length==1||m.length==2)&&(w=!0,x=m[0])}return x},d.prototype.setGraphManager=function(g){this.graphManager=g},r.exports=d},function(r,n,a){function o(){}o.seed=1,o.x=0,o.nextDouble=function(){return o.x=Math.sin(o.seed++)*1e4,o.x-Math.floor(o.x)},r.exports=o},function(r,n,a){var o=a(5);function i(s,l){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(s){this.lworldExtX=s},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(s){this.lworldExtY=s},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},i.prototype.transformX=function(s){var l=0,u=this.lworldExtX;return u!=0&&(l=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/u),l},i.prototype.transformY=function(s){var l=0,u=this.lworldExtY;return u!=0&&(l=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/u),l},i.prototype.inverseTransformX=function(s){var l=0,u=this.ldeviceExtX;return u!=0&&(l=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/u),l},i.prototype.inverseTransformY=function(s){var l=0,u=this.ldeviceExtY;return u!=0&&(l=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/u),l},i.prototype.inverseTransformPoint=function(s){var l=new o(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return l},r.exports=i},function(r,n,a){function o(c){if(Array.isArray(c)){for(var d=0,g=Array(c.length);d<c.length;d++)g[d]=c[d];return g}else return Array.from(c)}var i=a(15),s=a(4),l=a(0),u=a(8),f=a(9);function h(){i.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}h.prototype=Object.create(i.prototype);for(var v in i)h[v]=i[v];h.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},h.prototype.calcIdealEdgeLengths=function(){for(var c,d,g,m,p,y,w,x=this.getGraphManager().getAllEdges(),L=0;L<x.length;L++)c=x[L],d=c.idealLength,c.isInterGraph&&(m=c.getSource(),p=c.getTarget(),y=c.getSourceInLca().getEstimatedSize(),w=c.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(c.idealLength+=y+w-2*l.SIMPLE_NODE_SIZE),g=c.getLca().getInclusionTreeDepth(),c.idealLength+=d*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(m.getInclusionTreeDepth()+p.getInclusionTreeDepth()-2*g))},h.prototype.initSpringEmbedder=function(){var c=this.getAllNodes().length;this.incremental?(c>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(c-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(c>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(c-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},h.prototype.calcSpringForces=function(){for(var c=this.getAllEdges(),d,g=0;g<c.length;g++)d=c[g],this.calcSpringForce(d,d.idealLength)},h.prototype.calcRepulsionForces=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,m,p,y,w=this.getAllNodes(),x;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&c&&this.updateGrid(),x=new Set,g=0;g<w.length;g++)p=w[g],this.calculateRepulsionForceOfANode(p,x,c,d),x.add(p);else for(g=0;g<w.length;g++)for(p=w[g],m=g+1;m<w.length;m++)y=w[m],p.getOwner()==y.getOwner()&&this.calcRepulsionForce(p,y)},h.prototype.calcGravitationalForces=function(){for(var c,d=this.getAllNodesToApplyGravitation(),g=0;g<d.length;g++)c=d[g],this.calcGravitationalForce(c)},h.prototype.moveNodes=function(){for(var c=this.getAllNodes(),d,g=0;g<c.length;g++)d=c[g],d.move()},h.prototype.calcSpringForce=function(c,d){var g=c.getSource(),m=c.getTarget(),p,y,w,x;if(this.uniformLeafNodeSizes&&g.getChild()==null&&m.getChild()==null)c.updateLengthSimple();else if(c.updateLength(),c.isOverlapingSourceAndTarget)return;p=c.getLength(),p!=0&&(y=c.edgeElasticity*(p-d),w=y*(c.lengthX/p),x=y*(c.lengthY/p),g.springForceX+=w,g.springForceY+=x,m.springForceX-=w,m.springForceY-=x)},h.prototype.calcRepulsionForce=function(c,d){var g=c.getRect(),m=d.getRect(),p=new Array(2),y=new Array(4),w,x,L,A,S,N,M;if(g.intersects(m)){u.calcSeparationAmount(g,m,p,s.DEFAULT_EDGE_LENGTH/2),N=2*p[0],M=2*p[1];var b=c.noOfChildren*d.noOfChildren/(c.noOfChildren+d.noOfChildren);c.repulsionForceX-=b*N,c.repulsionForceY-=b*M,d.repulsionForceX+=b*N,d.repulsionForceY+=b*M}else this.uniformLeafNodeSizes&&c.getChild()==null&&d.getChild()==null?(w=m.getCenterX()-g.getCenterX(),x=m.getCenterY()-g.getCenterY()):(u.getIntersection(g,m,y),w=y[2]-y[0],x=y[3]-y[1]),Math.abs(w)<s.MIN_REPULSION_DIST&&(w=f.sign(w)*s.MIN_REPULSION_DIST),Math.abs(x)<s.MIN_REPULSION_DIST&&(x=f.sign(x)*s.MIN_REPULSION_DIST),L=w*w+x*x,A=Math.sqrt(L),S=(c.nodeRepulsion/2+d.nodeRepulsion/2)*c.noOfChildren*d.noOfChildren/L,N=S*w/A,M=S*x/A,c.repulsionForceX-=N,c.repulsionForceY-=M,d.repulsionForceX+=N,d.repulsionForceY+=M},h.prototype.calcGravitationalForce=function(c){var d,g,m,p,y,w,x,L;d=c.getOwner(),g=(d.getRight()+d.getLeft())/2,m=(d.getTop()+d.getBottom())/2,p=c.getCenterX()-g,y=c.getCenterY()-m,w=Math.abs(p)+c.getWidth()/2,x=Math.abs(y)+c.getHeight()/2,c.getOwner()==this.graphManager.getRoot()?(L=d.getEstimatedSize()*this.gravityRangeFactor,(w>L||x>L)&&(c.gravitationForceX=-this.gravityConstant*p,c.gravitationForceY=-this.gravityConstant*y)):(L=d.getEstimatedSize()*this.compoundGravityRangeFactor,(w>L||x>L)&&(c.gravitationForceX=-this.gravityConstant*p*this.compoundGravityConstant,c.gravitationForceY=-this.gravityConstant*y*this.compoundGravityConstant))},h.prototype.isConverged=function(){var c,d=!1;return this.totalIterations>this.maxIterations/3&&(d=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),c=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,c||d},h.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},h.prototype.calcNoOfChildrenForAllNodes=function(){for(var c,d=this.graphManager.getAllNodes(),g=0;g<d.length;g++)c=d[g],c.noOfChildren=c.getNoOfChildren()},h.prototype.calcGrid=function(c){var d=0,g=0;d=parseInt(Math.ceil((c.getRight()-c.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((c.getBottom()-c.getTop())/this.repulsionRange));for(var m=new Array(d),p=0;p<d;p++)m[p]=new Array(g);for(var p=0;p<d;p++)for(var y=0;y<g;y++)m[p][y]=new Array;return m},h.prototype.addNodeToGrid=function(c,d,g){var m=0,p=0,y=0,w=0;m=parseInt(Math.floor((c.getRect().x-d)/this.repulsionRange)),p=parseInt(Math.floor((c.getRect().width+c.getRect().x-d)/this.repulsionRange)),y=parseInt(Math.floor((c.getRect().y-g)/this.repulsionRange)),w=parseInt(Math.floor((c.getRect().height+c.getRect().y-g)/this.repulsionRange));for(var x=m;x<=p;x++)for(var L=y;L<=w;L++)this.grid[x][L].push(c),c.setGridCoordinates(m,p,y,w)},h.prototype.updateGrid=function(){var c,d,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),c=0;c<g.length;c++)d=g[c],this.addNodeToGrid(d,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},h.prototype.calculateRepulsionForceOfANode=function(c,d,g,m){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&g||m){var p=new Set;c.surrounding=new Array;for(var y,w=this.grid,x=c.startX-1;x<c.finishX+2;x++)for(var L=c.startY-1;L<c.finishY+2;L++)if(!(x<0||L<0||x>=w.length||L>=w[0].length)){for(var A=0;A<w[x][L].length;A++)if(y=w[x][L][A],!(c.getOwner()!=y.getOwner()||c==y)&&!d.has(y)&&!p.has(y)){var S=Math.abs(c.getCenterX()-y.getCenterX())-(c.getWidth()/2+y.getWidth()/2),N=Math.abs(c.getCenterY()-y.getCenterY())-(c.getHeight()/2+y.getHeight()/2);S<=this.repulsionRange&&N<=this.repulsionRange&&p.add(y)}}c.surrounding=[].concat(o(p))}for(x=0;x<c.surrounding.length;x++)this.calcRepulsionForce(c,c.surrounding[x])},h.prototype.calcRepulsionRange=function(){return 0},r.exports=h},function(r,n,a){var o=a(1),i=a(4);function s(u,f,h){o.call(this,u,f,h),this.idealLength=i.DEFAULT_EDGE_LENGTH,this.edgeElasticity=i.DEFAULT_SPRING_STRENGTH}s.prototype=Object.create(o.prototype);for(var l in o)s[l]=o[l];r.exports=s},function(r,n,a){var o=a(3),i=a(4);function s(u,f,h,v){o.call(this,u,f,h,v),this.nodeRepulsion=i.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(o.prototype);for(var l in o)s[l]=o[l];s.prototype.setGridCoordinates=function(u,f,h,v){this.startX=u,this.finishX=f,this.startY=h,this.finishY=v},r.exports=s},function(r,n,a){function o(i,s){this.width=0,this.height=0,i!==null&&s!==null&&(this.height=s,this.width=i)}o.prototype.getWidth=function(){return this.width},o.prototype.setWidth=function(i){this.width=i},o.prototype.getHeight=function(){return this.height},o.prototype.setHeight=function(i){this.height=i},r.exports=o},function(r,n,a){var o=a(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(s,l){var u=o.createID(s);this.contains(u)||(this.map[u]=l,this.keys.push(s))},i.prototype.contains=function(s){return o.createID(s),this.map[s]!=null},i.prototype.get=function(s){var l=o.createID(s);return this.map[l]},i.prototype.keySet=function(){return this.keys},r.exports=i},function(r,n,a){var o=a(14);function i(){this.set={}}i.prototype.add=function(s){var l=o.createID(s);this.contains(l)||(this.set[l]=s)},i.prototype.remove=function(s){delete this.set[o.createID(s)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(s){return this.set[o.createID(s)]==s},i.prototype.isEmpty=function(){return this.size()===0},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(s){for(var l=Object.keys(this.set),u=l.length,f=0;f<u;f++)s.push(this.set[l[f]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(s){for(var l=s.length,u=0;u<l;u++){var f=s[u];this.add(f)}},r.exports=i},function(r,n,a){function o(){}o.multMat=function(i,s){for(var l=[],u=0;u<i.length;u++){l[u]=[];for(var f=0;f<s[0].length;f++){l[u][f]=0;for(var h=0;h<i[0].length;h++)l[u][f]+=i[u][h]*s[h][f]}}return l},o.transpose=function(i){for(var s=[],l=0;l<i[0].length;l++){s[l]=[];for(var u=0;u<i.length;u++)s[l][u]=i[u][l]}return s},o.multCons=function(i,s){for(var l=[],u=0;u<i.length;u++)l[u]=i[u]*s;return l},o.minusOp=function(i,s){for(var l=[],u=0;u<i.length;u++)l[u]=i[u]-s[u];return l},o.dotProduct=function(i,s){for(var l=0,u=0;u<i.length;u++)l+=i[u]*s[u];return l},o.mag=function(i){return Math.sqrt(this.dotProduct(i,i))},o.normalize=function(i){for(var s=[],l=this.mag(i),u=0;u<i.length;u++)s[u]=i[u]/l;return s},o.multGamma=function(i){for(var s=[],l=0,u=0;u<i.length;u++)l+=i[u];l*=-1/i.length;for(var f=0;f<i.length;f++)s[f]=l+i[f];return s},o.multL=function(i,s,l){for(var u=[],f=[],h=[],v=0;v<s[0].length;v++){for(var c=0,d=0;d<s.length;d++)c+=-.5*s[d][v]*i[d];f[v]=c}for(var g=0;g<l.length;g++){for(var m=0,p=0;p<l.length;p++)m+=l[g][p]*f[p];h[g]=m}for(var y=0;y<s.length;y++){for(var w=0,x=0;x<s[0].length;x++)w+=s[y][x]*h[x];u[y]=w}return u},r.exports=o},function(r,n,a){var o=function(){function u(f,h){for(var v=0;v<h.length;v++){var c=h[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(f,h,v){return h&&u(f.prototype,h),v&&u(f,v),f}}();function i(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var s=a(11),l=function(){function u(f,h){i(this,u),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var v=void 0;f instanceof s?v=f.size():v=f.length,this._quicksort(f,0,v-1)}return o(u,[{key:"_quicksort",value:function(h,v,c){if(v<c){var d=this._partition(h,v,c);this._quicksort(h,v,d),this._quicksort(h,d+1,c)}}},{key:"_partition",value:function(h,v,c){for(var d=this._get(h,v),g=v,m=c;;){for(;this.compareFunction(d,this._get(h,m));)m--;for(;this.compareFunction(this._get(h,g),d);)g++;if(g<m)this._swap(h,g,m),g++,m--;else return m}}},{key:"_get",value:function(h,v){return h instanceof s?h.get_object_at(v):h[v]}},{key:"_set",value:function(h,v,c){h instanceof s?h.set_object_at(v,c):h[v]=c}},{key:"_swap",value:function(h,v,c){var d=this._get(h,v);this._set(h,v,this._get(h,c)),this._set(h,c,d)}},{key:"_defaultCompareFunction",value:function(h,v){return v>h}}]),u}();r.exports=l},function(r,n,a){function o(){}o.svd=function(i){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=i.length,this.n=i[0].length;var s=Math.min(this.m,this.n);this.s=function(Be){for(var Ie=[];Be-- >0;)Ie.push(0);return Ie}(Math.min(this.m+1,this.n)),this.U=function(Be){var Ie=function Xe(ht){if(ht.length==0)return 0;for(var ft=[],xt=0;xt<ht[0];xt++)ft.push(Xe(ht.slice(1)));return ft};return Ie(Be)}([this.m,s]),this.V=function(Be){var Ie=function Xe(ht){if(ht.length==0)return 0;for(var ft=[],xt=0;xt<ht[0];xt++)ft.push(Xe(ht.slice(1)));return ft};return Ie(Be)}([this.n,this.n]);for(var l=function(Be){for(var Ie=[];Be-- >0;)Ie.push(0);return Ie}(this.n),u=function(Be){for(var Ie=[];Be-- >0;)Ie.push(0);return Ie}(this.m),f=!0,h=Math.min(this.m-1,this.n),v=Math.max(0,Math.min(this.n-2,this.m)),c=0;c<Math.max(h,v);c++){if(c<h){this.s[c]=0;for(var d=c;d<this.m;d++)this.s[c]=o.hypot(this.s[c],i[d][c]);if(this.s[c]!==0){i[c][c]<0&&(this.s[c]=-this.s[c]);for(var g=c;g<this.m;g++)i[g][c]/=this.s[c];i[c][c]+=1}this.s[c]=-this.s[c]}for(var m=c+1;m<this.n;m++){if(function(Be,Ie){return Be&&Ie}(c<h,this.s[c]!==0)){for(var p=0,y=c;y<this.m;y++)p+=i[y][c]*i[y][m];p=-p/i[c][c];for(var w=c;w<this.m;w++)i[w][m]+=p*i[w][c]}l[m]=i[c][m]}if(function(Be,Ie){return Be&&Ie}(f,c<h))for(var x=c;x<this.m;x++)this.U[x][c]=i[x][c];if(c<v){l[c]=0;for(var L=c+1;L<this.n;L++)l[c]=o.hypot(l[c],l[L]);if(l[c]!==0){l[c+1]<0&&(l[c]=-l[c]);for(var A=c+1;A<this.n;A++)l[A]/=l[c];l[c+1]+=1}if(l[c]=-l[c],function(Be,Ie){return Be&&Ie}(c+1<this.m,l[c]!==0)){for(var S=c+1;S<this.m;S++)u[S]=0;for(var N=c+1;N<this.n;N++)for(var M=c+1;M<this.m;M++)u[M]+=l[N]*i[M][N];for(var b=c+1;b<this.n;b++)for(var T=-l[b]/l[c+1],E=c+1;E<this.m;E++)i[E][b]+=T*u[E]}for(var D=c+1;D<this.n;D++)this.V[D][c]=l[D]}}var C=Math.min(this.n,this.m+1);h<this.n&&(this.s[h]=i[h][h]),this.m<C&&(this.s[C-1]=0),v+1<C&&(l[v]=i[v][C-1]),l[C-1]=0;{for(var P=h;P<s;P++){for(var I=0;I<this.m;I++)this.U[I][P]=0;this.U[P][P]=1}for(var R=h-1;R>=0;R--)if(this.s[R]!==0){for(var F=R+1;F<s;F++){for(var _=0,H=R;H<this.m;H++)_+=this.U[H][R]*this.U[H][F];_=-_/this.U[R][R];for(var k=R;k<this.m;k++)this.U[k][F]+=_*this.U[k][R]}for(var G=R;G<this.m;G++)this.U[G][R]=-this.U[G][R];this.U[R][R]=1+this.U[R][R];for(var q=0;q<R-1;q++)this.U[q][R]=0}else{for(var $=0;$<this.m;$++)this.U[$][R]=0;this.U[R][R]=1}}for(var z=this.n-1;z>=0;z--){if(function(Be,Ie){return Be&&Ie}(z<v,l[z]!==0))for(var V=z+1;V<s;V++){for(var B=0,Y=z+1;Y<this.n;Y++)B+=this.V[Y][z]*this.V[Y][V];B=-B/this.V[z+1][z];for(var W=z+1;W<this.n;W++)this.V[W][V]+=B*this.V[W][z]}for(var J=0;J<this.n;J++)this.V[J][z]=0;this.V[z][z]=1}for(var le=C-1,pe=Math.pow(2,-52),Oe=Math.pow(2,-966);C>0;){var Q=void 0,oe=void 0;for(Q=C-2;Q>=-1&&Q!==-1;Q--)if(Math.abs(l[Q])<=Oe+pe*(Math.abs(this.s[Q])+Math.abs(this.s[Q+1]))){l[Q]=0;break}if(Q===C-2)oe=4;else{var be=void 0;for(be=C-1;be>=Q&&be!==Q;be--){var me=(be!==C?Math.abs(l[be]):0)+(be!==Q+1?Math.abs(l[be-1]):0);if(Math.abs(this.s[be])<=Oe+pe*me){this.s[be]=0;break}}be===Q?oe=3:be===C-1?oe=1:(oe=2,Q=be)}switch(Q++,oe){case 1:{var de=l[C-2];l[C-2]=0;for(var ie=C-2;ie>=Q;ie--){var fe=o.hypot(this.s[ie],de),ye=this.s[ie]/fe,ce=de/fe;this.s[ie]=fe,ie!==Q&&(de=-ce*l[ie-1],l[ie-1]=ye*l[ie-1]);for(var j=0;j<this.n;j++)fe=ye*this.V[j][ie]+ce*this.V[j][C-1],this.V[j][C-1]=-ce*this.V[j][ie]+ye*this.V[j][C-1],this.V[j][ie]=fe}}break;case 2:{var O=l[Q-1];l[Q-1]=0;for(var X=Q;X<C;X++){var te=o.hypot(this.s[X],O),ee=this.s[X]/te,U=O/te;this.s[X]=te,O=-U*l[X],l[X]=ee*l[X];for(var re=0;re<this.m;re++)te=ee*this.U[re][X]+U*this.U[re][Q-1],this.U[re][Q-1]=-U*this.U[re][X]+ee*this.U[re][Q-1],this.U[re][X]=te}}break;case 3:{var K=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[C-1]),Math.abs(this.s[C-2])),Math.abs(l[C-2])),Math.abs(this.s[Q])),Math.abs(l[Q])),ae=this.s[C-1]/K,se=this.s[C-2]/K,ue=l[C-2]/K,he=this.s[Q]/K,ge=l[Q]/K,ne=((se+ae)*(se-ae)+ue*ue)/2,ve=ae*ue*(ae*ue),Te=0;(function(Be,Ie){return Be||Ie})(ne!==0,ve!==0)&&(Te=Math.sqrt(ne*ne+ve),ne<0&&(Te=-Te),Te=ve/(ne+Te));for(var Le=(he+ae)*(he-ae)+Te,Me=he*ge,Ce=Q;Ce<C-1;Ce++){var Ee=o.hypot(Le,Me),xe=Le/Ee,Ae=Me/Ee;Ce!==Q&&(l[Ce-1]=Ee),Le=xe*this.s[Ce]+Ae*l[Ce],l[Ce]=xe*l[Ce]-Ae*this.s[Ce],Me=Ae*this.s[Ce+1],this.s[Ce+1]=xe*this.s[Ce+1];for(var De=0;De<this.n;De++)Ee=xe*this.V[De][Ce]+Ae*this.V[De][Ce+1],this.V[De][Ce+1]=-Ae*this.V[De][Ce]+xe*this.V[De][Ce+1],this.V[De][Ce]=Ee;if(Ee=o.hypot(Le,Me),xe=Le/Ee,Ae=Me/Ee,this.s[Ce]=Ee,Le=xe*l[Ce]+Ae*this.s[Ce+1],this.s[Ce+1]=-Ae*l[Ce]+xe*this.s[Ce+1],Me=Ae*l[Ce+1],l[Ce+1]=xe*l[Ce+1],Ce<this.m-1)for(var Se=0;Se<this.m;Se++)Ee=xe*this.U[Se][Ce]+Ae*this.U[Se][Ce+1],this.U[Se][Ce+1]=-Ae*this.U[Se][Ce]+xe*this.U[Se][Ce+1],this.U[Se][Ce]=Ee}l[C-2]=Le}break;case 4:{if(this.s[Q]<=0){this.s[Q]=this.s[Q]<0?-this.s[Q]:0;for(var ze=0;ze<=le;ze++)this.V[ze][Q]=-this.V[ze][Q]}for(;Q<le&&!(this.s[Q]>=this.s[Q+1]);){var ke=this.s[Q];if(this.s[Q]=this.s[Q+1],this.s[Q+1]=ke,Q<this.n-1)for(var et=0;et<this.n;et++)ke=this.V[et][Q+1],this.V[et][Q+1]=this.V[et][Q],this.V[et][Q]=ke;if(Q<this.m-1)for(var lt=0;lt<this.m;lt++)ke=this.U[lt][Q+1],this.U[lt][Q+1]=this.U[lt][Q],this.U[lt][Q]=ke;Q++}C--}break}}var ut={U:this.U,V:this.V,S:this.s};return ut},o.hypot=function(i,s){var l=void 0;return Math.abs(i)>Math.abs(s)?(l=s/i,l=Math.abs(i)*Math.sqrt(1+l*l)):s!=0?(l=i/s,l=Math.abs(s)*Math.sqrt(1+l*l)):l=0,l},r.exports=o},function(r,n,a){var o=function(){function l(u,f){for(var h=0;h<f.length;h++){var v=f[h];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(u,v.key,v)}}return function(u,f,h){return f&&l(u.prototype,f),h&&l(u,h),u}}();function i(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function(){function l(u,f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;i(this,l),this.sequence1=u,this.sequence2=f,this.match_score=h,this.mismatch_penalty=v,this.gap_penalty=c,this.iMax=u.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var d=0;d<this.iMax;d++){this.grid[d]=new Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[d][g]=0}this.tracebackGrid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.tracebackGrid[m]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.tracebackGrid[m][p]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return o(l,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var v=1;v<this.iMax;v++)for(var c=1;c<this.jMax;c++){var d=void 0;this.sequence1[v-1]===this.sequence2[c-1]?d=this.grid[v-1][c-1]+this.match_score:d=this.grid[v-1][c-1]+this.mismatch_penalty;var g=this.grid[v-1][c]+this.gap_penalty,m=this.grid[v][c-1]+this.gap_penalty,p=[d,g,m],y=this.arrayAllMaxIndexes(p);this.grid[v][c]=p[y[0]],this.tracebackGrid[v][c]=[y.includes(0),y.includes(1),y.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var h=f[0],v=this.tracebackGrid[h.pos[0]][h.pos[1]];v[0]&&f.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),v[1]&&f.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),v[2]&&f.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,h){for(var v=[],c=-1;(c=f.indexOf(h,c+1))!==-1;)v.push(c);return v}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),l}();r.exports=s},function(r,n,a){var o=function(){};o.FDLayout=a(18),o.FDLayoutConstants=a(4),o.FDLayoutEdge=a(19),o.FDLayoutNode=a(20),o.DimensionD=a(21),o.HashMap=a(22),o.HashSet=a(23),o.IGeometry=a(8),o.IMath=a(9),o.Integer=a(10),o.Point=a(12),o.PointD=a(5),o.RandomSeed=a(16),o.RectangleD=a(13),o.Transform=a(17),o.UniqueIDGeneretor=a(14),o.Quicksort=a(25),o.LinkedList=a(11),o.LGraphObject=a(2),o.LGraph=a(6),o.LEdge=a(1),o.LGraphManager=a(7),o.LNode=a(3),o.Layout=a(15),o.LayoutConstants=a(0),o.NeedlemanWunsch=a(27),o.Matrix=a(24),o.SVD=a(26),r.exports=o},function(r,n,a){function o(){this.listeners=[]}var i=o.prototype;i.addListener=function(s,l){this.listeners.push({event:s,callback:l})},i.removeListener=function(s,l){for(var u=this.listeners.length;u>=0;u--){var f=this.listeners[u];f.event===s&&f.callback===l&&this.listeners.splice(u,1)}},i.emit=function(s,l){for(var u=0;u<this.listeners.length;u++){var f=this.listeners[u];s===f.event&&f.callback(l)}},r.exports=o}])})}(Wi)),Wi.exports}var El;function M1(){return El||(El=1,function(t,e){(function(n,a){t.exports=a(N1())})(Gr,function(r){return function(n){var a={};function o(i){if(a[i])return a[i].exports;var s=a[i]={i,l:!1,exports:{}};return n[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=n,o.c=a,o.i=function(i){return i},o.d=function(i,s,l){o.o(i,s)||Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:l})},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=8)}([function(n,a){n.exports=r},function(n,a,o){var i=o(0).FDLayoutConstants;function s(){}for(var l in i)s[l]=i[l];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=i.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,s.ENFORCE_CONSTRAINTS=!0,s.APPLY_LAYOUT=!0,s.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,s.TREE_REDUCTION_ON_INCREMENTAL=!0,s.PURE_INCREMENTAL=s.DEFAULT_INCREMENTAL,n.exports=s},function(n,a,o){var i=o(0).FDLayoutEdge;function s(u,f,h){i.call(this,u,f,h)}s.prototype=Object.create(i.prototype);for(var l in i)s[l]=i[l];n.exports=s},function(n,a,o){var i=o(0).LGraph;function s(u,f,h){i.call(this,u,f,h)}s.prototype=Object.create(i.prototype);for(var l in i)s[l]=i[l];n.exports=s},function(n,a,o){var i=o(0).LGraphManager;function s(u){i.call(this,u)}s.prototype=Object.create(i.prototype);for(var l in i)s[l]=i[l];n.exports=s},function(n,a,o){var i=o(0).FDLayoutNode,s=o(0).IMath;function l(f,h,v,c){i.call(this,f,h,v,c)}l.prototype=Object.create(i.prototype);for(var u in i)l[u]=i[u];l.prototype.calculateDisplacement=function(){var f=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=f.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=f.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=f.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=f.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>f.coolingFactor*f.maxNodeDisplacement&&(this.displacementX=f.coolingFactor*f.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>f.coolingFactor*f.maxNodeDisplacement&&(this.displacementY=f.coolingFactor*f.maxNodeDisplacement*s.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},l.prototype.propogateDisplacementToChildren=function(f,h){for(var v=this.getChild().getNodes(),c,d=0;d<v.length;d++)c=v[d],c.getChild()==null?(c.displacementX+=f,c.displacementY+=h):c.propogateDisplacementToChildren(f,h)},l.prototype.move=function(){var f=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),f.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},l.prototype.setPred1=function(f){this.pred1=f},l.prototype.getPred1=function(){return pred1},l.prototype.getPred2=function(){return pred2},l.prototype.setNext=function(f){this.next=f},l.prototype.getNext=function(){return next},l.prototype.setProcessed=function(f){this.processed=f},l.prototype.isProcessed=function(){return processed},n.exports=l},function(n,a,o){function i(v){if(Array.isArray(v)){for(var c=0,d=Array(v.length);c<v.length;c++)d[c]=v[c];return d}else return Array.from(v)}var s=o(1),l=o(0).LinkedList,u=o(0).Matrix,f=o(0).SVD;function h(){}h.handleConstraints=function(v){var c={};c.fixedNodeConstraint=v.constraints.fixedNodeConstraint,c.alignmentConstraint=v.constraints.alignmentConstraint,c.relativePlacementConstraint=v.constraints.relativePlacementConstraint;for(var d=new Map,g=new Map,m=[],p=[],y=v.getAllNodes(),w=0,x=0;x<y.length;x++){var L=y[x];L.getChild()==null&&(g.set(L.id,w++),m.push(L.getCenterX()),p.push(L.getCenterY()),d.set(L.id,L))}c.relativePlacementConstraint&&c.relativePlacementConstraint.forEach(function(U){!U.gap&&U.gap!=0&&(U.left?U.gap=s.DEFAULT_EDGE_LENGTH+d.get(U.left).getWidth()/2+d.get(U.right).getWidth()/2:U.gap=s.DEFAULT_EDGE_LENGTH+d.get(U.top).getHeight()/2+d.get(U.bottom).getHeight()/2)});var A=function(re,K){return{x:re.x-K.x,y:re.y-K.y}},S=function(re){var K=0,ae=0;return re.forEach(function(se){K+=m[g.get(se)],ae+=p[g.get(se)]}),{x:K/re.size,y:ae/re.size}},N=function(re,K,ae,se,ue){function he(Ee,xe){var Ae=new Set(Ee),De=!0,Se=!1,ze=void 0;try{for(var ke=xe[Symbol.iterator](),et;!(De=(et=ke.next()).done);De=!0){var lt=et.value;Ae.add(lt)}}catch(ut){Se=!0,ze=ut}finally{try{!De&&ke.return&&ke.return()}finally{if(Se)throw ze}}return Ae}var ge=new Map;re.forEach(function(Ee,xe){ge.set(xe,0)}),re.forEach(function(Ee,xe){Ee.forEach(function(Ae){ge.set(Ae.id,ge.get(Ae.id)+1)})});var ne=new Map,ve=new Map,Te=new l;ge.forEach(function(Ee,xe){Ee==0?(Te.push(xe),ae||(K=="horizontal"?ne.set(xe,g.has(xe)?m[g.get(xe)]:se.get(xe)):ne.set(xe,g.has(xe)?p[g.get(xe)]:se.get(xe)))):ne.set(xe,Number.NEGATIVE_INFINITY),ae&&ve.set(xe,new Set([xe]))}),ae&&ue.forEach(function(Ee){var xe=[];if(Ee.forEach(function(Se){ae.has(Se)&&xe.push(Se)}),xe.length>0){var Ae=0;xe.forEach(function(Se){K=="horizontal"?(ne.set(Se,g.has(Se)?m[g.get(Se)]:se.get(Se)),Ae+=ne.get(Se)):(ne.set(Se,g.has(Se)?p[g.get(Se)]:se.get(Se)),Ae+=ne.get(Se))}),Ae=Ae/xe.length,Ee.forEach(function(Se){ae.has(Se)||ne.set(Se,Ae)})}else{var De=0;Ee.forEach(function(Se){K=="horizontal"?De+=g.has(Se)?m[g.get(Se)]:se.get(Se):De+=g.has(Se)?p[g.get(Se)]:se.get(Se)}),De=De/Ee.length,Ee.forEach(function(Se){ne.set(Se,De)})}});for(var Le=function(){var xe=Te.shift(),Ae=re.get(xe);Ae.forEach(function(De){if(ne.get(De.id)<ne.get(xe)+De.gap)if(ae&&ae.has(De.id)){var Se=void 0;if(K=="horizontal"?Se=g.has(De.id)?m[g.get(De.id)]:se.get(De.id):Se=g.has(De.id)?p[g.get(De.id)]:se.get(De.id),ne.set(De.id,Se),Se<ne.get(xe)+De.gap){var ze=ne.get(xe)+De.gap-Se;ve.get(xe).forEach(function(ke){ne.set(ke,ne.get(ke)-ze)})}}else ne.set(De.id,ne.get(xe)+De.gap);ge.set(De.id,ge.get(De.id)-1),ge.get(De.id)==0&&Te.push(De.id),ae&&ve.set(De.id,he(ve.get(xe),ve.get(De.id)))})};Te.length!=0;)Le();if(ae){var Me=new Set;re.forEach(function(Ee,xe){Ee.length==0&&Me.add(xe)});var Ce=[];ve.forEach(function(Ee,xe){if(Me.has(xe)){var Ae=!1,De=!0,Se=!1,ze=void 0;try{for(var ke=Ee[Symbol.iterator](),et;!(De=(et=ke.next()).done);De=!0){var lt=et.value;ae.has(lt)&&(Ae=!0)}}catch(Ie){Se=!0,ze=Ie}finally{try{!De&&ke.return&&ke.return()}finally{if(Se)throw ze}}if(!Ae){var ut=!1,Be=void 0;Ce.forEach(function(Ie,Xe){Ie.has([].concat(i(Ee))[0])&&(ut=!0,Be=Xe)}),ut?Ee.forEach(function(Ie){Ce[Be].add(Ie)}):Ce.push(new Set(Ee))}}}),Ce.forEach(function(Ee,xe){var Ae=Number.POSITIVE_INFINITY,De=Number.POSITIVE_INFINITY,Se=Number.NEGATIVE_INFINITY,ze=Number.NEGATIVE_INFINITY,ke=!0,et=!1,lt=void 0;try{for(var ut=Ee[Symbol.iterator](),Be;!(ke=(Be=ut.next()).done);ke=!0){var Ie=Be.value,Xe=void 0;K=="horizontal"?Xe=g.has(Ie)?m[g.get(Ie)]:se.get(Ie):Xe=g.has(Ie)?p[g.get(Ie)]:se.get(Ie);var ht=ne.get(Ie);Xe<Ae&&(Ae=Xe),Xe>Se&&(Se=Xe),ht<De&&(De=ht),ht>ze&&(ze=ht)}}catch(dr){et=!0,lt=dr}finally{try{!ke&&ut.return&&ut.return()}finally{if(et)throw lt}}var ft=(Ae+Se)/2-(De+ze)/2,xt=!0,hr=!1,cr=void 0;try{for(var er=Ee[Symbol.iterator](),Jr;!(xt=(Jr=er.next()).done);xt=!0){var vr=Jr.value;ne.set(vr,ne.get(vr)+ft)}}catch(dr){hr=!0,cr=dr}finally{try{!xt&&er.return&&er.return()}finally{if(hr)throw cr}}})}return ne},M=function(re){var K=0,ae=0,se=0,ue=0;if(re.forEach(function(ve){ve.left?m[g.get(ve.left)]-m[g.get(ve.right)]>=0?K++:ae++:p[g.get(ve.top)]-p[g.get(ve.bottom)]>=0?se++:ue++}),K>ae&&se>ue)for(var he=0;he<g.size;he++)m[he]=-1*m[he],p[he]=-1*p[he];else if(K>ae)for(var ge=0;ge<g.size;ge++)m[ge]=-1*m[ge];else if(se>ue)for(var ne=0;ne<g.size;ne++)p[ne]=-1*p[ne]},b=function(re){var K=[],ae=new l,se=new Set,ue=0;return re.forEach(function(he,ge){if(!se.has(ge)){K[ue]=[];var ne=ge;for(ae.push(ne),se.add(ne),K[ue].push(ne);ae.length!=0;){ne=ae.shift();var ve=re.get(ne);ve.forEach(function(Te){se.has(Te.id)||(ae.push(Te.id),se.add(Te.id),K[ue].push(Te.id))})}ue++}}),K},T=function(re){var K=new Map;return re.forEach(function(ae,se){K.set(se,[])}),re.forEach(function(ae,se){ae.forEach(function(ue){K.get(se).push(ue),K.get(ue.id).push({id:se,gap:ue.gap,direction:ue.direction})})}),K},E=function(re){var K=new Map;return re.forEach(function(ae,se){K.set(se,[])}),re.forEach(function(ae,se){ae.forEach(function(ue){K.get(ue.id).push({id:se,gap:ue.gap,direction:ue.direction})})}),K},D=[],C=[],P=!1,I=!1,R=new Set,F=new Map,_=new Map,H=[];if(c.fixedNodeConstraint&&c.fixedNodeConstraint.forEach(function(U){R.add(U.nodeId)}),c.relativePlacementConstraint&&(c.relativePlacementConstraint.forEach(function(U){U.left?(F.has(U.left)?F.get(U.left).push({id:U.right,gap:U.gap,direction:"horizontal"}):F.set(U.left,[{id:U.right,gap:U.gap,direction:"horizontal"}]),F.has(U.right)||F.set(U.right,[])):(F.has(U.top)?F.get(U.top).push({id:U.bottom,gap:U.gap,direction:"vertical"}):F.set(U.top,[{id:U.bottom,gap:U.gap,direction:"vertical"}]),F.has(U.bottom)||F.set(U.bottom,[]))}),_=T(F),H=b(_)),s.TRANSFORM_ON_CONSTRAINT_HANDLING){if(c.fixedNodeConstraint&&c.fixedNodeConstraint.length>1)c.fixedNodeConstraint.forEach(function(U,re){D[re]=[U.position.x,U.position.y],C[re]=[m[g.get(U.nodeId)],p[g.get(U.nodeId)]]}),P=!0;else if(c.alignmentConstraint)(function(){var U=0;if(c.alignmentConstraint.vertical){for(var re=c.alignmentConstraint.vertical,K=function(ne){var ve=new Set;re[ne].forEach(function(Me){ve.add(Me)});var Te=new Set([].concat(i(ve)).filter(function(Me){return R.has(Me)})),Le=void 0;Te.size>0?Le=m[g.get(Te.values().next().value)]:Le=S(ve).x,re[ne].forEach(function(Me){D[U]=[Le,p[g.get(Me)]],C[U]=[m[g.get(Me)],p[g.get(Me)]],U++})},ae=0;ae<re.length;ae++)K(ae);P=!0}if(c.alignmentConstraint.horizontal){for(var se=c.alignmentConstraint.horizontal,ue=function(ne){var ve=new Set;se[ne].forEach(function(Me){ve.add(Me)});var Te=new Set([].concat(i(ve)).filter(function(Me){return R.has(Me)})),Le=void 0;Te.size>0?Le=m[g.get(Te.values().next().value)]:Le=S(ve).y,se[ne].forEach(function(Me){D[U]=[m[g.get(Me)],Le],C[U]=[m[g.get(Me)],p[g.get(Me)]],U++})},he=0;he<se.length;he++)ue(he);P=!0}c.relativePlacementConstraint&&(I=!0)})();else if(c.relativePlacementConstraint){for(var k=0,G=0,q=0;q<H.length;q++)H[q].length>k&&(k=H[q].length,G=q);if(k<_.size/2)M(c.relativePlacementConstraint),P=!1,I=!1;else{var $=new Map,z=new Map,V=[];H[G].forEach(function(U){F.get(U).forEach(function(re){re.direction=="horizontal"?($.has(U)?$.get(U).push(re):$.set(U,[re]),$.has(re.id)||$.set(re.id,[]),V.push({left:U,right:re.id})):(z.has(U)?z.get(U).push(re):z.set(U,[re]),z.has(re.id)||z.set(re.id,[]),V.push({top:U,bottom:re.id}))})}),M(V),I=!1;var B=N($,"horizontal"),Y=N(z,"vertical");H[G].forEach(function(U,re){C[re]=[m[g.get(U)],p[g.get(U)]],D[re]=[],B.has(U)?D[re][0]=B.get(U):D[re][0]=m[g.get(U)],Y.has(U)?D[re][1]=Y.get(U):D[re][1]=p[g.get(U)]}),P=!0}}if(P){for(var W=void 0,J=u.transpose(D),le=u.transpose(C),pe=0;pe<J.length;pe++)J[pe]=u.multGamma(J[pe]),le[pe]=u.multGamma(le[pe]);var Oe=u.multMat(J,u.transpose(le)),Q=f.svd(Oe);W=u.multMat(Q.V,u.transpose(Q.U));for(var oe=0;oe<g.size;oe++){var be=[m[oe],p[oe]],me=[W[0][0],W[1][0]],de=[W[0][1],W[1][1]];m[oe]=u.dotProduct(be,me),p[oe]=u.dotProduct(be,de)}I&&M(c.relativePlacementConstraint)}}if(s.ENFORCE_CONSTRAINTS){if(c.fixedNodeConstraint&&c.fixedNodeConstraint.length>0){var ie={x:0,y:0};c.fixedNodeConstraint.forEach(function(U,re){var K={x:m[g.get(U.nodeId)],y:p[g.get(U.nodeId)]},ae=U.position,se=A(ae,K);ie.x+=se.x,ie.y+=se.y}),ie.x/=c.fixedNodeConstraint.length,ie.y/=c.fixedNodeConstraint.length,m.forEach(function(U,re){m[re]+=ie.x}),p.forEach(function(U,re){p[re]+=ie.y}),c.fixedNodeConstraint.forEach(function(U){m[g.get(U.nodeId)]=U.position.x,p[g.get(U.nodeId)]=U.position.y})}if(c.alignmentConstraint){if(c.alignmentConstraint.vertical)for(var fe=c.alignmentConstraint.vertical,ye=function(re){var K=new Set;fe[re].forEach(function(ue){K.add(ue)});var ae=new Set([].concat(i(K)).filter(function(ue){return R.has(ue)})),se=void 0;ae.size>0?se=m[g.get(ae.values().next().value)]:se=S(K).x,K.forEach(function(ue){R.has(ue)||(m[g.get(ue)]=se)})},ce=0;ce<fe.length;ce++)ye(ce);if(c.alignmentConstraint.horizontal)for(var j=c.alignmentConstraint.horizontal,O=function(re){var K=new Set;j[re].forEach(function(ue){K.add(ue)});var ae=new Set([].concat(i(K)).filter(function(ue){return R.has(ue)})),se=void 0;ae.size>0?se=p[g.get(ae.values().next().value)]:se=S(K).y,K.forEach(function(ue){R.has(ue)||(p[g.get(ue)]=se)})},X=0;X<j.length;X++)O(X)}c.relativePlacementConstraint&&function(){var U=new Map,re=new Map,K=new Map,ae=new Map,se=new Map,ue=new Map,he=new Set,ge=new Set;if(R.forEach(function(nt){he.add(nt),ge.add(nt)}),c.alignmentConstraint){if(c.alignmentConstraint.vertical)for(var ne=c.alignmentConstraint.vertical,ve=function(Pe){K.set("dummy"+Pe,[]),ne[Pe].forEach(function($e){U.set($e,"dummy"+Pe),K.get("dummy"+Pe).push($e),R.has($e)&&he.add("dummy"+Pe)}),se.set("dummy"+Pe,m[g.get(ne[Pe][0])])},Te=0;Te<ne.length;Te++)ve(Te);if(c.alignmentConstraint.horizontal)for(var Le=c.alignmentConstraint.horizontal,Me=function(Pe){ae.set("dummy"+Pe,[]),Le[Pe].forEach(function($e){re.set($e,"dummy"+Pe),ae.get("dummy"+Pe).push($e),R.has($e)&&ge.add("dummy"+Pe)}),ue.set("dummy"+Pe,p[g.get(Le[Pe][0])])},Ce=0;Ce<Le.length;Ce++)Me(Ce)}var Ee=new Map,xe=new Map,Ae=function(Pe){F.get(Pe).forEach(function($e){var pr=void 0,_t=void 0;$e.direction=="horizontal"?(pr=U.get(Pe)?U.get(Pe):Pe,U.get($e.id)?_t={id:U.get($e.id),gap:$e.gap,direction:$e.direction}:_t=$e,Ee.has(pr)?Ee.get(pr).push(_t):Ee.set(pr,[_t]),Ee.has(_t.id)||Ee.set(_t.id,[])):(pr=re.get(Pe)?re.get(Pe):Pe,re.get($e.id)?_t={id:re.get($e.id),gap:$e.gap,direction:$e.direction}:_t=$e,xe.has(pr)?xe.get(pr).push(_t):xe.set(pr,[_t]),xe.has(_t.id)||xe.set(_t.id,[]))})},De=!0,Se=!1,ze=void 0;try{for(var ke=F.keys()[Symbol.iterator](),et;!(De=(et=ke.next()).done);De=!0){var lt=et.value;Ae(lt)}}catch(nt){Se=!0,ze=nt}finally{try{!De&&ke.return&&ke.return()}finally{if(Se)throw ze}}var ut=T(Ee),Be=T(xe),Ie=b(ut),Xe=b(Be),ht=E(Ee),ft=E(xe),xt=[],hr=[];Ie.forEach(function(nt,Pe){xt[Pe]=[],nt.forEach(function($e){ht.get($e).length==0&&xt[Pe].push($e)})}),Xe.forEach(function(nt,Pe){hr[Pe]=[],nt.forEach(function($e){ft.get($e).length==0&&hr[Pe].push($e)})});var cr=N(Ee,"horizontal",he,se,xt),er=N(xe,"vertical",ge,ue,hr),Jr=function(Pe){K.get(Pe)?K.get(Pe).forEach(function($e){m[g.get($e)]=cr.get(Pe)}):m[g.get(Pe)]=cr.get(Pe)},vr=!0,dr=!1,pa=void 0;try{for(var tr=cr.keys()[Symbol.iterator](),jr;!(vr=(jr=tr.next()).done);vr=!0){var gr=jr.value;Jr(gr)}}catch(nt){dr=!0,pa=nt}finally{try{!vr&&tr.return&&tr.return()}finally{if(dr)throw pa}}var ma=function(Pe){ae.get(Pe)?ae.get(Pe).forEach(function($e){p[g.get($e)]=er.get(Pe)}):p[g.get(Pe)]=er.get(Pe)},en=!0,ya=!1,At=void 0;try{for(var Fr=er.keys()[Symbol.iterator](),On;!(en=(On=Fr.next()).done);en=!0){var gr=On.value;ma(gr)}}catch(nt){ya=!0,At=nt}finally{try{!en&&Fr.return&&Fr.return()}finally{if(ya)throw At}}}()}for(var te=0;te<y.length;te++){var ee=y[te];ee.getChild()==null&&ee.setCenter(m[g.get(ee.id)],p[g.get(ee.id)])}},n.exports=h},function(n,a,o){var i=o(0).FDLayout,s=o(4),l=o(3),u=o(5),f=o(2),h=o(1),v=o(6),c=o(0).FDLayoutConstants,d=o(0).LayoutConstants,g=o(0).Point,m=o(0).PointD,p=o(0).DimensionD,y=o(0).Layout,w=o(0).Integer,x=o(0).IGeometry,L=o(0).LGraph,A=o(0).Transform,S=o(0).LinkedList;function N(){i.call(this),this.toBeTiled={},this.constraints={}}N.prototype=Object.create(i.prototype);for(var M in i)N[M]=i[M];N.prototype.newGraphManager=function(){var b=new s(this);return this.graphManager=b,b},N.prototype.newGraph=function(b){return new l(null,this.graphManager,b)},N.prototype.newNode=function(b){return new u(this.graphManager,b)},N.prototype.newEdge=function(b){return new f(null,null,b)},N.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.isSubLayout||(h.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=h.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},N.prototype.initSpringEmbedder=function(){i.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},N.prototype.layout=function(){var b=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return b&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},N.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(h.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var T=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(P){return T.has(P)});this.graphManager.setAllNodesToApplyGravitation(E)}}else{var b=this.getFlatForest();if(b.length>0)this.positionNodesRadially(b);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var T=new Set(this.getAllNodes()),E=this.nodesWithGravity.filter(function(D){return T.has(D)});this.graphManager.setAllNodesToApplyGravitation(E),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(v.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),h.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},N.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var b=new Set(this.getAllNodes()),T=this.nodesWithGravity.filter(function(C){return b.has(C)});this.graphManager.setAllNodesToApplyGravitation(T),this.graphManager.updateBounds(),this.updateGrid(),h.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),h.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var E=!this.isTreeGrowing&&!this.isGrowthFinished,D=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(E,D),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},N.prototype.getPositionsData=function(){for(var b=this.graphManager.getAllNodes(),T={},E=0;E<b.length;E++){var D=b[E].rect,C=b[E].id;T[C]={id:C,x:D.getCenterX(),y:D.getCenterY(),w:D.width,h:D.height}}return T},N.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var b=!1;if(c.ANIMATE==="during")this.emit("layoutstarted");else{for(;!b;)b=this.tick();this.graphManager.updateBounds()}},N.prototype.moveNodes=function(){for(var b=this.getAllNodes(),T,E=0;E<b.length;E++)T=b[E],T.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var E=0;E<b.length;E++)T=b[E],T.move()},N.prototype.initConstraintVariables=function(){var b=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var T=this.graphManager.getAllNodes(),E=0;E<T.length;E++){var D=T[E];this.idToNodeMap.set(D.id,D)}var C=function z(V){for(var B=V.getChild().getNodes(),Y,W=0,J=0;J<B.length;J++)Y=B[J],Y.getChild()==null?b.fixedNodeSet.has(Y.id)&&(W+=100):W+=z(Y);return W};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(B){b.fixedNodeSet.add(B.nodeId)});for(var T=this.graphManager.getAllNodes(),D,E=0;E<T.length;E++)if(D=T[E],D.getChild()!=null){var P=C(D);P>0&&(D.fixedNodeWeight=P)}}if(this.constraints.relativePlacementConstraint){var I=new Map,R=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(z){b.fixedNodesOnHorizontal.add(z),b.fixedNodesOnVertical.add(z)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var F=this.constraints.alignmentConstraint.vertical,E=0;E<F.length;E++)this.dummyToNodeForVerticalAlignment.set("dummy"+E,[]),F[E].forEach(function(V){I.set(V,"dummy"+E),b.dummyToNodeForVerticalAlignment.get("dummy"+E).push(V),b.fixedNodeSet.has(V)&&b.fixedNodesOnHorizontal.add("dummy"+E)});if(this.constraints.alignmentConstraint.horizontal)for(var _=this.constraints.alignmentConstraint.horizontal,E=0;E<_.length;E++)this.dummyToNodeForHorizontalAlignment.set("dummy"+E,[]),_[E].forEach(function(V){R.set(V,"dummy"+E),b.dummyToNodeForHorizontalAlignment.get("dummy"+E).push(V),b.fixedNodeSet.has(V)&&b.fixedNodesOnVertical.add("dummy"+E)})}if(h.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(z){var V,B,Y;for(Y=z.length-1;Y>=2*z.length/3;Y--)V=Math.floor(Math.random()*(Y+1)),B=z[Y],z[Y]=z[V],z[V]=B;return z},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(z){if(z.left){var V=I.has(z.left)?I.get(z.left):z.left,B=I.has(z.right)?I.get(z.right):z.right;b.nodesInRelativeHorizontal.includes(V)||(b.nodesInRelativeHorizontal.push(V),b.nodeToRelativeConstraintMapHorizontal.set(V,[]),b.dummyToNodeForVerticalAlignment.has(V)?b.nodeToTempPositionMapHorizontal.set(V,b.idToNodeMap.get(b.dummyToNodeForVerticalAlignment.get(V)[0]).getCenterX()):b.nodeToTempPositionMapHorizontal.set(V,b.idToNodeMap.get(V).getCenterX())),b.nodesInRelativeHorizontal.includes(B)||(b.nodesInRelativeHorizontal.push(B),b.nodeToRelativeConstraintMapHorizontal.set(B,[]),b.dummyToNodeForVerticalAlignment.has(B)?b.nodeToTempPositionMapHorizontal.set(B,b.idToNodeMap.get(b.dummyToNodeForVerticalAlignment.get(B)[0]).getCenterX()):b.nodeToTempPositionMapHorizontal.set(B,b.idToNodeMap.get(B).getCenterX())),b.nodeToRelativeConstraintMapHorizontal.get(V).push({right:B,gap:z.gap}),b.nodeToRelativeConstraintMapHorizontal.get(B).push({left:V,gap:z.gap})}else{var Y=R.has(z.top)?R.get(z.top):z.top,W=R.has(z.bottom)?R.get(z.bottom):z.bottom;b.nodesInRelativeVertical.includes(Y)||(b.nodesInRelativeVertical.push(Y),b.nodeToRelativeConstraintMapVertical.set(Y,[]),b.dummyToNodeForHorizontalAlignment.has(Y)?b.nodeToTempPositionMapVertical.set(Y,b.idToNodeMap.get(b.dummyToNodeForHorizontalAlignment.get(Y)[0]).getCenterY()):b.nodeToTempPositionMapVertical.set(Y,b.idToNodeMap.get(Y).getCenterY())),b.nodesInRelativeVertical.includes(W)||(b.nodesInRelativeVertical.push(W),b.nodeToRelativeConstraintMapVertical.set(W,[]),b.dummyToNodeForHorizontalAlignment.has(W)?b.nodeToTempPositionMapVertical.set(W,b.idToNodeMap.get(b.dummyToNodeForHorizontalAlignment.get(W)[0]).getCenterY()):b.nodeToTempPositionMapVertical.set(W,b.idToNodeMap.get(W).getCenterY())),b.nodeToRelativeConstraintMapVertical.get(Y).push({bottom:W,gap:z.gap}),b.nodeToRelativeConstraintMapVertical.get(W).push({top:Y,gap:z.gap})}});else{var H=new Map,k=new Map;this.constraints.relativePlacementConstraint.forEach(function(z){if(z.left){var V=I.has(z.left)?I.get(z.left):z.left,B=I.has(z.right)?I.get(z.right):z.right;H.has(V)?H.get(V).push(B):H.set(V,[B]),H.has(B)?H.get(B).push(V):H.set(B,[V])}else{var Y=R.has(z.top)?R.get(z.top):z.top,W=R.has(z.bottom)?R.get(z.bottom):z.bottom;k.has(Y)?k.get(Y).push(W):k.set(Y,[W]),k.has(W)?k.get(W).push(Y):k.set(W,[Y])}});var G=function(V,B){var Y=[],W=[],J=new S,le=new Set,pe=0;return V.forEach(function(Oe,Q){if(!le.has(Q)){Y[pe]=[],W[pe]=!1;var oe=Q;for(J.push(oe),le.add(oe),Y[pe].push(oe);J.length!=0;){oe=J.shift(),B.has(oe)&&(W[pe]=!0);var be=V.get(oe);be.forEach(function(me){le.has(me)||(J.push(me),le.add(me),Y[pe].push(me))})}pe++}}),{components:Y,isFixed:W}},q=G(H,b.fixedNodesOnHorizontal);this.componentsOnHorizontal=q.components,this.fixedComponentsOnHorizontal=q.isFixed;var $=G(k,b.fixedNodesOnVertical);this.componentsOnVertical=$.components,this.fixedComponentsOnVertical=$.isFixed}}},N.prototype.updateDisplacements=function(){var b=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function($){var z=b.idToNodeMap.get($.nodeId);z.displacementX=0,z.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var T=this.constraints.alignmentConstraint.vertical,E=0;E<T.length;E++){for(var D=0,C=0;C<T[E].length;C++){if(this.fixedNodeSet.has(T[E][C])){D=0;break}D+=this.idToNodeMap.get(T[E][C]).displacementX}for(var P=D/T[E].length,C=0;C<T[E].length;C++)this.idToNodeMap.get(T[E][C]).displacementX=P}if(this.constraints.alignmentConstraint.horizontal)for(var I=this.constraints.alignmentConstraint.horizontal,E=0;E<I.length;E++){for(var R=0,C=0;C<I[E].length;C++){if(this.fixedNodeSet.has(I[E][C])){R=0;break}R+=this.idToNodeMap.get(I[E][C]).displacementY}for(var F=R/I[E].length,C=0;C<I[E].length;C++)this.idToNodeMap.get(I[E][C]).displacementY=F}}if(this.constraints.relativePlacementConstraint)if(h.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function($){if(!b.fixedNodesOnHorizontal.has($)){var z=0;b.dummyToNodeForVerticalAlignment.has($)?z=b.idToNodeMap.get(b.dummyToNodeForVerticalAlignment.get($)[0]).displacementX:z=b.idToNodeMap.get($).displacementX,b.nodeToRelativeConstraintMapHorizontal.get($).forEach(function(V){if(V.right){var B=b.nodeToTempPositionMapHorizontal.get(V.right)-b.nodeToTempPositionMapHorizontal.get($)-z;B<V.gap&&(z-=V.gap-B)}else{var B=b.nodeToTempPositionMapHorizontal.get($)-b.nodeToTempPositionMapHorizontal.get(V.left)+z;B<V.gap&&(z+=V.gap-B)}}),b.nodeToTempPositionMapHorizontal.set($,b.nodeToTempPositionMapHorizontal.get($)+z),b.dummyToNodeForVerticalAlignment.has($)?b.dummyToNodeForVerticalAlignment.get($).forEach(function(V){b.idToNodeMap.get(V).displacementX=z}):b.idToNodeMap.get($).displacementX=z}}),this.nodesInRelativeVertical.forEach(function($){if(!b.fixedNodesOnHorizontal.has($)){var z=0;b.dummyToNodeForHorizontalAlignment.has($)?z=b.idToNodeMap.get(b.dummyToNodeForHorizontalAlignment.get($)[0]).displacementY:z=b.idToNodeMap.get($).displacementY,b.nodeToRelativeConstraintMapVertical.get($).forEach(function(V){if(V.bottom){var B=b.nodeToTempPositionMapVertical.get(V.bottom)-b.nodeToTempPositionMapVertical.get($)-z;B<V.gap&&(z-=V.gap-B)}else{var B=b.nodeToTempPositionMapVertical.get($)-b.nodeToTempPositionMapVertical.get(V.top)+z;B<V.gap&&(z+=V.gap-B)}}),b.nodeToTempPositionMapVertical.set($,b.nodeToTempPositionMapVertical.get($)+z),b.dummyToNodeForHorizontalAlignment.has($)?b.dummyToNodeForHorizontalAlignment.get($).forEach(function(V){b.idToNodeMap.get(V).displacementY=z}):b.idToNodeMap.get($).displacementY=z}});else{for(var E=0;E<this.componentsOnHorizontal.length;E++){var _=this.componentsOnHorizontal[E];if(this.fixedComponentsOnHorizontal[E])for(var C=0;C<_.length;C++)this.dummyToNodeForVerticalAlignment.has(_[C])?this.dummyToNodeForVerticalAlignment.get(_[C]).forEach(function(V){b.idToNodeMap.get(V).displacementX=0}):this.idToNodeMap.get(_[C]).displacementX=0;else{for(var H=0,k=0,C=0;C<_.length;C++)if(this.dummyToNodeForVerticalAlignment.has(_[C])){var G=this.dummyToNodeForVerticalAlignment.get(_[C]);H+=G.length*this.idToNodeMap.get(G[0]).displacementX,k+=G.length}else H+=this.idToNodeMap.get(_[C]).displacementX,k++;for(var q=H/k,C=0;C<_.length;C++)this.dummyToNodeForVerticalAlignment.has(_[C])?this.dummyToNodeForVerticalAlignment.get(_[C]).forEach(function(V){b.idToNodeMap.get(V).displacementX=q}):this.idToNodeMap.get(_[C]).displacementX=q}}for(var E=0;E<this.componentsOnVertical.length;E++){var _=this.componentsOnVertical[E];if(this.fixedComponentsOnVertical[E])for(var C=0;C<_.length;C++)this.dummyToNodeForHorizontalAlignment.has(_[C])?this.dummyToNodeForHorizontalAlignment.get(_[C]).forEach(function(B){b.idToNodeMap.get(B).displacementY=0}):this.idToNodeMap.get(_[C]).displacementY=0;else{for(var H=0,k=0,C=0;C<_.length;C++)if(this.dummyToNodeForHorizontalAlignment.has(_[C])){var G=this.dummyToNodeForHorizontalAlignment.get(_[C]);H+=G.length*this.idToNodeMap.get(G[0]).displacementY,k+=G.length}else H+=this.idToNodeMap.get(_[C]).displacementY,k++;for(var q=H/k,C=0;C<_.length;C++)this.dummyToNodeForHorizontalAlignment.has(_[C])?this.dummyToNodeForHorizontalAlignment.get(_[C]).forEach(function(J){b.idToNodeMap.get(J).displacementY=q}):this.idToNodeMap.get(_[C]).displacementY=q}}}},N.prototype.calculateNodesToApplyGravitationTo=function(){var b=[],T,E=this.graphManager.getGraphs(),D=E.length,C;for(C=0;C<D;C++)T=E[C],T.updateConnected(),T.isConnected||(b=b.concat(T.getNodes()));return b},N.prototype.createBendpoints=function(){var b=[];b=b.concat(this.graphManager.getAllEdges());var T=new Set,E;for(E=0;E<b.length;E++){var D=b[E];if(!T.has(D)){var C=D.getSource(),P=D.getTarget();if(C==P)D.getBendpoints().push(new m),D.getBendpoints().push(new m),this.createDummyNodesForBendpoints(D),T.add(D);else{var I=[];if(I=I.concat(C.getEdgeListToNode(P)),I=I.concat(P.getEdgeListToNode(C)),!T.has(I[0])){if(I.length>1){var R;for(R=0;R<I.length;R++){var F=I[R];F.getBendpoints().push(new m),this.createDummyNodesForBendpoints(F)}}I.forEach(function(_){T.add(_)})}}}if(T.size==b.length)break}},N.prototype.positionNodesRadially=function(b){for(var T=new g(0,0),E=Math.ceil(Math.sqrt(b.length)),D=0,C=0,P=0,I=new m(0,0),R=0;R<b.length;R++){R%E==0&&(P=0,C=D,R!=0&&(C+=h.DEFAULT_COMPONENT_SEPERATION),D=0);var F=b[R],_=y.findCenterOfTree(F);T.x=P,T.y=C,I=N.radialLayout(F,_,T),I.y>D&&(D=Math.floor(I.y)),P=Math.floor(I.x+h.DEFAULT_COMPONENT_SEPERATION)}this.transform(new m(d.WORLD_CENTER_X-I.x/2,d.WORLD_CENTER_Y-I.y/2))},N.radialLayout=function(b,T,E){var D=Math.max(this.maxDiagonalInTree(b),h.DEFAULT_RADIAL_SEPARATION);N.branchRadialLayout(T,null,0,359,0,D);var C=L.calculateBounds(b),P=new A;P.setDeviceOrgX(C.getMinX()),P.setDeviceOrgY(C.getMinY()),P.setWorldOrgX(E.x),P.setWorldOrgY(E.y);for(var I=0;I<b.length;I++){var R=b[I];R.transform(P)}var F=new m(C.getMaxX(),C.getMaxY());return P.inverseTransformPoint(F)},N.branchRadialLayout=function(b,T,E,D,C,P){var I=(D-E+1)/2;I<0&&(I+=180);var R=(I+E)%360,F=R*x.TWO_PI/360,_=C*Math.cos(F),H=C*Math.sin(F);b.setCenter(_,H);var k=[];k=k.concat(b.getEdges());var G=k.length;T!=null&&G--;for(var q=0,$=k.length,z,V=b.getEdgesBetween(T);V.length>1;){var B=V[0];V.splice(0,1);var Y=k.indexOf(B);Y>=0&&k.splice(Y,1),$--,G--}T!=null?z=(k.indexOf(V[0])+1)%$:z=0;for(var W=Math.abs(D-E)/G,J=z;q!=G;J=++J%$){var le=k[J].getOtherEnd(b);if(le!=T){var pe=(E+q*W)%360,Oe=(pe+W)%360;N.branchRadialLayout(le,b,pe,Oe,C+P,P),q++}}},N.maxDiagonalInTree=function(b){for(var T=w.MIN_VALUE,E=0;E<b.length;E++){var D=b[E],C=D.getDiagonal();C>T&&(T=C)}return T},N.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},N.prototype.groupZeroDegreeMembers=function(){var b=this,T={};this.memberGroups={},this.idToDummyNode={};for(var E=[],D=this.graphManager.getAllNodes(),C=0;C<D.length;C++){var P=D[C],I=P.getParent();this.getNodeDegreeWithChildren(P)===0&&(I.id==null||!this.getToBeTiled(I))&&E.push(P)}for(var C=0;C<E.length;C++){var P=E[C],R=P.getParent().id;typeof T[R]>"u"&&(T[R]=[]),T[R]=T[R].concat(P)}Object.keys(T).forEach(function(F){if(T[F].length>1){var _="DummyCompound_"+F;b.memberGroups[_]=T[F];var H=T[F][0].getParent(),k=new u(b.graphManager);k.id=_,k.paddingLeft=H.paddingLeft||0,k.paddingRight=H.paddingRight||0,k.paddingBottom=H.paddingBottom||0,k.paddingTop=H.paddingTop||0,b.idToDummyNode[_]=k;var G=b.getGraphManager().add(b.newGraph(),k),q=H.getChild();q.add(k);for(var $=0;$<T[F].length;$++){var z=T[F][$];q.remove(z),G.add(z)}}})},N.prototype.clearCompounds=function(){var b={},T={};this.performDFSOnCompounds();for(var E=0;E<this.compoundOrder.length;E++)T[this.compoundOrder[E].id]=this.compoundOrder[E],b[this.compoundOrder[E].id]=[].concat(this.compoundOrder[E].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[E].getChild()),this.compoundOrder[E].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(b,T)},N.prototype.clearZeroDegreeMembers=function(){var b=this,T=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(E){var D=b.idToDummyNode[E];if(T[E]=b.tileNodes(b.memberGroups[E],D.paddingLeft+D.paddingRight),D.rect.width=T[E].width,D.rect.height=T[E].height,D.setCenter(T[E].centerX,T[E].centerY),D.labelMarginLeft=0,D.labelMarginTop=0,h.NODE_DIMENSIONS_INCLUDE_LABELS){var C=D.rect.width,P=D.rect.height;D.labelWidth&&(D.labelPosHorizontal=="left"?(D.rect.x-=D.labelWidth,D.setWidth(C+D.labelWidth),D.labelMarginLeft=D.labelWidth):D.labelPosHorizontal=="center"&&D.labelWidth>C?(D.rect.x-=(D.labelWidth-C)/2,D.setWidth(D.labelWidth),D.labelMarginLeft=(D.labelWidth-C)/2):D.labelPosHorizontal=="right"&&D.setWidth(C+D.labelWidth)),D.labelHeight&&(D.labelPosVertical=="top"?(D.rect.y-=D.labelHeight,D.setHeight(P+D.labelHeight),D.labelMarginTop=D.labelHeight):D.labelPosVertical=="center"&&D.labelHeight>P?(D.rect.y-=(D.labelHeight-P)/2,D.setHeight(D.labelHeight),D.labelMarginTop=(D.labelHeight-P)/2):D.labelPosVertical=="bottom"&&D.setHeight(P+D.labelHeight))}})},N.prototype.repopulateCompounds=function(){for(var b=this.compoundOrder.length-1;b>=0;b--){var T=this.compoundOrder[b],E=T.id,D=T.paddingLeft,C=T.paddingTop,P=T.labelMarginLeft,I=T.labelMarginTop;this.adjustLocations(this.tiledMemberPack[E],T.rect.x,T.rect.y,D,C,P,I)}},N.prototype.repopulateZeroDegreeMembers=function(){var b=this,T=this.tiledZeroDegreePack;Object.keys(T).forEach(function(E){var D=b.idToDummyNode[E],C=D.paddingLeft,P=D.paddingTop,I=D.labelMarginLeft,R=D.labelMarginTop;b.adjustLocations(T[E],D.rect.x,D.rect.y,C,P,I,R)})},N.prototype.getToBeTiled=function(b){var T=b.id;if(this.toBeTiled[T]!=null)return this.toBeTiled[T];var E=b.getChild();if(E==null)return this.toBeTiled[T]=!1,!1;for(var D=E.getNodes(),C=0;C<D.length;C++){var P=D[C];if(this.getNodeDegree(P)>0)return this.toBeTiled[T]=!1,!1;if(P.getChild()==null){this.toBeTiled[P.id]=!1;continue}if(!this.getToBeTiled(P))return this.toBeTiled[T]=!1,!1}return this.toBeTiled[T]=!0,!0},N.prototype.getNodeDegree=function(b){b.id;for(var T=b.getEdges(),E=0,D=0;D<T.length;D++){var C=T[D];C.getSource().id!==C.getTarget().id&&(E=E+1)}return E},N.prototype.getNodeDegreeWithChildren=function(b){var T=this.getNodeDegree(b);if(b.getChild()==null)return T;for(var E=b.getChild().getNodes(),D=0;D<E.length;D++){var C=E[D];T+=this.getNodeDegreeWithChildren(C)}return T},N.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},N.prototype.fillCompexOrderByDFS=function(b){for(var T=0;T<b.length;T++){var E=b[T];E.getChild()!=null&&this.fillCompexOrderByDFS(E.getChild().getNodes()),this.getToBeTiled(E)&&this.compoundOrder.push(E)}},N.prototype.adjustLocations=function(b,T,E,D,C,P,I){T+=D+P,E+=C+I;for(var R=T,F=0;F<b.rows.length;F++){var _=b.rows[F];T=R;for(var H=0,k=0;k<_.length;k++){var G=_[k];G.rect.x=T,G.rect.y=E,T+=G.rect.width+b.horizontalPadding,G.rect.height>H&&(H=G.rect.height)}E+=H+b.verticalPadding}},N.prototype.tileCompoundMembers=function(b,T){var E=this;this.tiledMemberPack=[],Object.keys(b).forEach(function(D){var C=T[D];if(E.tiledMemberPack[D]=E.tileNodes(b[D],C.paddingLeft+C.paddingRight),C.rect.width=E.tiledMemberPack[D].width,C.rect.height=E.tiledMemberPack[D].height,C.setCenter(E.tiledMemberPack[D].centerX,E.tiledMemberPack[D].centerY),C.labelMarginLeft=0,C.labelMarginTop=0,h.NODE_DIMENSIONS_INCLUDE_LABELS){var P=C.rect.width,I=C.rect.height;C.labelWidth&&(C.labelPosHorizontal=="left"?(C.rect.x-=C.labelWidth,C.setWidth(P+C.labelWidth),C.labelMarginLeft=C.labelWidth):C.labelPosHorizontal=="center"&&C.labelWidth>P?(C.rect.x-=(C.labelWidth-P)/2,C.setWidth(C.labelWidth),C.labelMarginLeft=(C.labelWidth-P)/2):C.labelPosHorizontal=="right"&&C.setWidth(P+C.labelWidth)),C.labelHeight&&(C.labelPosVertical=="top"?(C.rect.y-=C.labelHeight,C.setHeight(I+C.labelHeight),C.labelMarginTop=C.labelHeight):C.labelPosVertical=="center"&&C.labelHeight>I?(C.rect.y-=(C.labelHeight-I)/2,C.setHeight(C.labelHeight),C.labelMarginTop=(C.labelHeight-I)/2):C.labelPosVertical=="bottom"&&C.setHeight(I+C.labelHeight))}})},N.prototype.tileNodes=function(b,T){var E=h.TILING_PADDING_VERTICAL,D=h.TILING_PADDING_HORIZONTAL,C={rows:[],rowWidth:[],rowHeight:[],width:0,height:T,verticalPadding:E,horizontalPadding:D,centerX:0,centerY:0};b.sort(function(_,H){return _.rect.width*_.rect.height>H.rect.width*H.rect.height?-1:_.rect.width*_.rect.height<H.rect.width*H.rect.height?1:0});for(var P=0,I=0,R=0;R<b.length;R++){var F=b[R];P+=F.getCenterX(),I+=F.getCenterY()}C.centerX=P/b.length,C.centerY=I/b.length;for(var R=0;R<b.length;R++){var F=b[R];C.rows.length==0?this.insertNodeToRow(C,F,0,T):this.canAddHorizontal(C,F.rect.width,F.rect.height)?this.insertNodeToRow(C,F,this.getShortestRowIndex(C),T):this.insertNodeToRow(C,F,C.rows.length,T),this.shiftToLastRow(C)}return C},N.prototype.insertNodeToRow=function(b,T,E,D){var C=D;if(E==b.rows.length){var P=[];b.rows.push(P),b.rowWidth.push(C),b.rowHeight.push(0)}var I=b.rowWidth[E]+T.rect.width;b.rows[E].length>0&&(I+=b.horizontalPadding),b.rowWidth[E]=I,b.width<I&&(b.width=I);var R=T.rect.height;E>0&&(R+=b.verticalPadding);var F=0;R>b.rowHeight[E]&&(F=b.rowHeight[E],b.rowHeight[E]=R,F=b.rowHeight[E]-F),b.height+=F,b.rows[E].push(T)},N.prototype.getShortestRowIndex=function(b){for(var T=-1,E=Number.MAX_VALUE,D=0;D<b.rows.length;D++)b.rowWidth[D]<E&&(T=D,E=b.rowWidth[D]);return T},N.prototype.getLongestRowIndex=function(b){for(var T=-1,E=Number.MIN_VALUE,D=0;D<b.rows.length;D++)b.rowWidth[D]>E&&(T=D,E=b.rowWidth[D]);return T},N.prototype.canAddHorizontal=function(b,T,E){var D=this.getShortestRowIndex(b);if(D<0)return!0;var C=b.rowWidth[D];if(C+b.horizontalPadding+T<=b.width)return!0;var P=0;b.rowHeight[D]<E&&D>0&&(P=E+b.verticalPadding-b.rowHeight[D]);var I;b.width-C>=T+b.horizontalPadding?I=(b.height+P)/(C+T+b.horizontalPadding):I=(b.height+P)/b.width,P=E+b.verticalPadding;var R;return b.width<T?R=(b.height+P)/T:R=(b.height+P)/b.width,R<1&&(R=1/R),I<1&&(I=1/I),I<R},N.prototype.shiftToLastRow=function(b){var T=this.getLongestRowIndex(b),E=b.rowWidth.length-1,D=b.rows[T],C=D[D.length-1],P=C.width+b.horizontalPadding;if(b.width-b.rowWidth[E]>P&&T!=E){D.splice(-1,1),b.rows[E].push(C),b.rowWidth[T]=b.rowWidth[T]-P,b.rowWidth[E]=b.rowWidth[E]+P,b.width=b.rowWidth[instance.getLongestRowIndex(b)];for(var I=Number.MIN_VALUE,R=0;R<D.length;R++)D[R].height>I&&(I=D[R].height);T>0&&(I+=b.verticalPadding);var F=b.rowHeight[T]+b.rowHeight[E];b.rowHeight[T]=I,b.rowHeight[E]<C.height+b.verticalPadding&&(b.rowHeight[E]=C.height+b.verticalPadding);var _=b.rowHeight[T]+b.rowHeight[E];b.height+=_-F,this.shiftToLastRow(b)}},N.prototype.tilingPreLayout=function(){h.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},N.prototype.tilingPostLayout=function(){h.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},N.prototype.reduceTrees=function(){for(var b=[],T=!0,E;T;){var D=this.graphManager.getAllNodes(),C=[];T=!1;for(var P=0;P<D.length;P++)if(E=D[P],E.getEdges().length==1&&!E.getEdges()[0].isInterGraph&&E.getChild()==null){if(h.PURE_INCREMENTAL){var I=E.getEdges()[0].getOtherEnd(E),R=new p(E.getCenterX()-I.getCenterX(),E.getCenterY()-I.getCenterY());C.push([E,E.getEdges()[0],E.getOwner(),R])}else C.push([E,E.getEdges()[0],E.getOwner()]);T=!0}if(T==!0){for(var F=[],_=0;_<C.length;_++)C[_][0].getEdges().length==1&&(F.push(C[_]),C[_][0].getOwner().remove(C[_][0]));b.push(F),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=b},N.prototype.growTree=function(b){for(var T=b.length,E=b[T-1],D,C=0;C<E.length;C++)D=E[C],this.findPlaceforPrunedNode(D),D[2].add(D[0]),D[2].add(D[1],D[1].source,D[1].target);b.splice(b.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},N.prototype.findPlaceforPrunedNode=function(b){var T,E,D=b[0];if(D==b[1].source?E=b[1].target:E=b[1].source,h.PURE_INCREMENTAL)D.setCenter(E.getCenterX()+b[3].getWidth(),E.getCenterY()+b[3].getHeight());else{var C=E.startX,P=E.finishX,I=E.startY,R=E.finishY,F=0,_=0,H=0,k=0,G=[F,H,_,k];if(I>0)for(var q=C;q<=P;q++)G[0]+=this.grid[q][I-1].length+this.grid[q][I].length-1;if(P<this.grid.length-1)for(var q=I;q<=R;q++)G[1]+=this.grid[P+1][q].length+this.grid[P][q].length-1;if(R<this.grid[0].length-1)for(var q=C;q<=P;q++)G[2]+=this.grid[q][R+1].length+this.grid[q][R].length-1;if(C>0)for(var q=I;q<=R;q++)G[3]+=this.grid[C-1][q].length+this.grid[C][q].length-1;for(var $=w.MAX_VALUE,z,V,B=0;B<G.length;B++)G[B]<$?($=G[B],z=1,V=B):G[B]==$&&z++;if(z==3&&$==0)G[0]==0&&G[1]==0&&G[2]==0?T=1:G[0]==0&&G[1]==0&&G[3]==0?T=0:G[0]==0&&G[2]==0&&G[3]==0?T=3:G[1]==0&&G[2]==0&&G[3]==0&&(T=2);else if(z==2&&$==0){var Y=Math.floor(Math.random()*2);G[0]==0&&G[1]==0?Y==0?T=0:T=1:G[0]==0&&G[2]==0?Y==0?T=0:T=2:G[0]==0&&G[3]==0?Y==0?T=0:T=3:G[1]==0&&G[2]==0?Y==0?T=1:T=2:G[1]==0&&G[3]==0?Y==0?T=1:T=3:Y==0?T=2:T=3}else if(z==4&&$==0){var Y=Math.floor(Math.random()*4);T=Y}else T=V;T==0?D.setCenter(E.getCenterX(),E.getCenterY()-E.getHeight()/2-c.DEFAULT_EDGE_LENGTH-D.getHeight()/2):T==1?D.setCenter(E.getCenterX()+E.getWidth()/2+c.DEFAULT_EDGE_LENGTH+D.getWidth()/2,E.getCenterY()):T==2?D.setCenter(E.getCenterX(),E.getCenterY()+E.getHeight()/2+c.DEFAULT_EDGE_LENGTH+D.getHeight()/2):D.setCenter(E.getCenterX()-E.getWidth()/2-c.DEFAULT_EDGE_LENGTH-D.getWidth()/2,E.getCenterY())}},n.exports=N},function(n,a,o){var i={};i.layoutBase=o(0),i.CoSEConstants=o(1),i.CoSEEdge=o(2),i.CoSEGraph=o(3),i.CoSEGraphManager=o(4),i.CoSELayout=o(7),i.CoSENode=o(5),i.ConstraintHandler=o(6),n.exports=i}])})}(qi)),qi.exports}(function(t,e){(function(n,a){t.exports=a(M1())})(self,function(r){return(()=>{var n={658:s=>{s.exports=Object.assign!=null?Object.assign.bind(Object):function(l){for(var u=arguments.length,f=Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];return f.forEach(function(v){Object.keys(v).forEach(function(c){return l[c]=v[c]})}),l}},548:(s,l,u)=>{var f=u(281).layoutBase.LinkedList,h={};h.getTopMostNodes=function(v){for(var c={},d=0;d<v.length;d++)c[v[d].id()]=!0;var g=v.filter(function(m,p){typeof m=="number"&&(m=p);for(var y=m.parent()[0];y!=null;){if(c[y.id()])return!1;y=y.parent()[0]}return!0});return g},h.connectComponents=function(v,c,d,g){var m=new f,p=new Set,y=[],w=void 0,x=void 0,L=void 0,A=!1,S=1,N=[],M=[],b=function(){var E=v.collection();M.push(E);var D=d[0],C=v.collection();C.merge(D).merge(D.descendants().intersection(c)),y.push(D),C.forEach(function(R){m.push(R),p.add(R),E.merge(R)});for(var P=function(){D=m.shift();var F=v.collection();D.neighborhood().nodes().forEach(function(G){c.intersection(D.edgesWith(G)).length>0&&F.merge(G)});for(var _=0;_<F.length;_++){var H=F[_];if(w=d.intersection(H.union(H.ancestors())),w!=null&&!p.has(w[0])){var k=w.union(w.descendants());k.forEach(function(G){m.push(G),p.add(G),E.merge(G),d.has(G)&&y.push(G)})}}};m.length!=0;)P();if(E.forEach(function(R){c.intersection(R.connectedEdges()).forEach(function(F){E.has(F.source())&&E.has(F.target())&&E.merge(F)})}),y.length==d.length&&(A=!0),!A||A&&S>1){x=y[0],L=x.connectedEdges().length,y.forEach(function(R){R.connectedEdges().length<L&&(L=R.connectedEdges().length,x=R)}),N.push(x.id());var I=v.collection();I.merge(y[0]),y.forEach(function(R){I.merge(R)}),y=[],d=d.difference(I),S++}};do b();while(!A);return g&&N.length>0&&g.set("dummy"+(g.size+1),N),M},h.calcBoundingBox=function(v,c,d,g){for(var m=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,y=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,x=void 0,L=void 0,A=void 0,S=void 0,N=v.descendants().not(":parent"),M=N.length,b=0;b<M;b++){var T=N[b];x=c[g.get(T.id())]-T.width()/2,L=c[g.get(T.id())]+T.width()/2,A=d[g.get(T.id())]-T.height()/2,S=d[g.get(T.id())]+T.height()/2,m>x&&(m=x),p<L&&(p=L),y>A&&(y=A),w<S&&(w=S)}var E={};return E.topLeftX=m,E.topLeftY=y,E.width=p-m,E.height=w-y,E},s.exports=h},816:(s,l,u)=>{var f=u(548),h=u(281).CoSELayout,v=u(281).CoSENode,c=u(281).layoutBase.PointD,d=u(281).layoutBase.DimensionD,g=u(281).layoutBase.LayoutConstants,m=u(281).layoutBase.FDLayoutConstants,p=u(281).CoSEConstants,y=function(x,L){var A=x.eles,S=A.nodes(),N=A.edges(),M=void 0,b=void 0,T=void 0,E={};x.randomize&&(M=L.nodeIndexes,b=L.xCoords,T=L.yCoords);var D=function(k){return typeof k=="function"},C=function(k,G){return D(k)?k(G):k},P=function H(k,G,q,$){for(var z=G.length,V=0;V<z;V++){var B=G[V],Y=B.children(),W=void 0,J=B.layoutDimensions({nodeDimensionsIncludeLabels:$.nodeDimensionsIncludeLabels});if(B.outerWidth()!=null&&B.outerHeight()!=null)if($.randomize)if(!B.isParent())W=k.add(new v(q.graphManager,new c(b[M.get(B.id())]-J.w/2,T[M.get(B.id())]-J.h/2),new d(parseFloat(J.w),parseFloat(J.h))));else{var le=f.calcBoundingBox(B,b,T,M);W=k.add(new v(q.graphManager,new c(le.topLeftX,le.topLeftY),new d(le.width,le.height)))}else W=k.add(new v(q.graphManager,new c(B.position("x")-J.w/2,B.position("y")-J.h/2),new d(parseFloat(J.w),parseFloat(J.h))));else W=k.add(new v(this.graphManager));if(W.id=B.data("id"),W.nodeRepulsion=C($.nodeRepulsion,B),W.paddingLeft=parseInt(B.css("padding")),W.paddingTop=parseInt(B.css("padding")),W.paddingRight=parseInt(B.css("padding")),W.paddingBottom=parseInt(B.css("padding")),$.nodeDimensionsIncludeLabels&&(W.labelWidth=B.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,W.labelHeight=B.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,W.labelPosVertical=B.css("text-valign"),W.labelPosHorizontal=B.css("text-halign")),E[B.data("id")]=W,isNaN(W.rect.x)&&(W.rect.x=0),isNaN(W.rect.y)&&(W.rect.y=0),Y!=null&&Y.length>0){var pe=void 0;pe=q.getGraphManager().add(q.newGraph(),W),H(pe,Y,q,$)}}},I=function(k,G,q){for(var $=0,z=0,V=0;V<q.length;V++){var B=q[V],Y=E[B.data("source")],W=E[B.data("target")];if(Y!==W&&Y.getEdgesBetween(W).length==0){var J=G.add(k.newEdge(),Y,W);J.id=B.id(),J.idealLength=C(x.idealEdgeLength,B),J.edgeElasticity=C(x.edgeElasticity,B),$+=J.idealLength,z++}}x.idealEdgeLength!=null&&(z>0?p.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=$/z:D(x.idealEdgeLength)?p.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=50:p.DEFAULT_EDGE_LENGTH=m.DEFAULT_EDGE_LENGTH=x.idealEdgeLength,p.MIN_REPULSION_DIST=m.MIN_REPULSION_DIST=m.DEFAULT_EDGE_LENGTH/10,p.DEFAULT_RADIAL_SEPARATION=m.DEFAULT_EDGE_LENGTH)},R=function(k,G){G.fixedNodeConstraint&&(k.constraints.fixedNodeConstraint=G.fixedNodeConstraint),G.alignmentConstraint&&(k.constraints.alignmentConstraint=G.alignmentConstraint),G.relativePlacementConstraint&&(k.constraints.relativePlacementConstraint=G.relativePlacementConstraint)};x.nestingFactor!=null&&(p.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=x.nestingFactor),x.gravity!=null&&(p.DEFAULT_GRAVITY_STRENGTH=m.DEFAULT_GRAVITY_STRENGTH=x.gravity),x.numIter!=null&&(p.MAX_ITERATIONS=m.MAX_ITERATIONS=x.numIter),x.gravityRange!=null&&(p.DEFAULT_GRAVITY_RANGE_FACTOR=m.DEFAULT_GRAVITY_RANGE_FACTOR=x.gravityRange),x.gravityCompound!=null&&(p.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.DEFAULT_COMPOUND_GRAVITY_STRENGTH=x.gravityCompound),x.gravityRangeCompound!=null&&(p.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=x.gravityRangeCompound),x.initialEnergyOnIncremental!=null&&(p.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.DEFAULT_COOLING_FACTOR_INCREMENTAL=x.initialEnergyOnIncremental),x.quality=="proof"?g.QUALITY=2:g.QUALITY=0,p.NODE_DIMENSIONS_INCLUDE_LABELS=m.NODE_DIMENSIONS_INCLUDE_LABELS=g.NODE_DIMENSIONS_INCLUDE_LABELS=x.nodeDimensionsIncludeLabels,p.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=!x.randomize,p.ANIMATE=m.ANIMATE=g.ANIMATE=x.animate,p.TILE=x.tile,p.TILING_PADDING_VERTICAL=typeof x.tilingPaddingVertical=="function"?x.tilingPaddingVertical.call():x.tilingPaddingVertical,p.TILING_PADDING_HORIZONTAL=typeof x.tilingPaddingHorizontal=="function"?x.tilingPaddingHorizontal.call():x.tilingPaddingHorizontal,p.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=g.DEFAULT_INCREMENTAL=!0,p.PURE_INCREMENTAL=!x.randomize,g.DEFAULT_UNIFORM_LEAF_NODE_SIZES=x.uniformNodeDimensions,x.step=="transformed"&&(p.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,p.ENFORCE_CONSTRAINTS=!1,p.APPLY_LAYOUT=!1),x.step=="enforced"&&(p.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,p.ENFORCE_CONSTRAINTS=!0,p.APPLY_LAYOUT=!1),x.step=="cose"&&(p.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,p.ENFORCE_CONSTRAINTS=!1,p.APPLY_LAYOUT=!0),x.step=="all"&&(x.randomize?p.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:p.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,p.ENFORCE_CONSTRAINTS=!0,p.APPLY_LAYOUT=!0),x.fixedNodeConstraint||x.alignmentConstraint||x.relativePlacementConstraint?p.TREE_REDUCTION_ON_INCREMENTAL=!1:p.TREE_REDUCTION_ON_INCREMENTAL=!0;var F=new h,_=F.newGraphManager();return P(_.addRoot(),f.getTopMostNodes(S),F,x),I(F,_,N),R(F,x),F.runLayout(),E};s.exports={coseLayout:y}},212:(s,l,u)=>{var f=function(){function x(L,A){for(var S=0;S<A.length;S++){var N=A[S];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(L,N.key,N)}}return function(L,A,S){return A&&x(L.prototype,A),S&&x(L,S),L}}();function h(x,L){if(!(x instanceof L))throw new TypeError("Cannot call a class as a function")}var v=u(658),c=u(548),d=u(657),g=d.spectralLayout,m=u(816),p=m.coseLayout,y=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(L){return 4500},idealEdgeLength:function(L){return 50},edgeElasticity:function(L){return .45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),w=function(){function x(L){h(this,x),this.options=v({},y,L)}return f(x,[{key:"run",value:function(){var A=this,S=this.options,N=S.cy,M=S.eles,b=[],T=[],E=void 0;S.fixedNodeConstraint&&(!Array.isArray(S.fixedNodeConstraint)||S.fixedNodeConstraint.length==0)&&(S.fixedNodeConstraint=void 0),S.alignmentConstraint&&(S.alignmentConstraint.vertical&&(!Array.isArray(S.alignmentConstraint.vertical)||S.alignmentConstraint.vertical.length==0)&&(S.alignmentConstraint.vertical=void 0),S.alignmentConstraint.horizontal&&(!Array.isArray(S.alignmentConstraint.horizontal)||S.alignmentConstraint.horizontal.length==0)&&(S.alignmentConstraint.horizontal=void 0)),S.relativePlacementConstraint&&(!Array.isArray(S.relativePlacementConstraint)||S.relativePlacementConstraint.length==0)&&(S.relativePlacementConstraint=void 0);var D=S.fixedNodeConstraint||S.alignmentConstraint||S.relativePlacementConstraint;D&&(S.tile=!1,S.packComponents=!1);var C=void 0,P=!1;if(N.layoutUtilities&&S.packComponents&&(C=N.layoutUtilities("get"),C||(C=N.layoutUtilities()),P=!0),M.nodes().length>0){if(P){var R=c.getTopMostNodes(S.eles.nodes());if(E=c.connectComponents(N,S.eles,R),S.randomize&&E.forEach(function(ie){S.eles=ie,b.push(g(S))}),S.quality=="default"||S.quality=="proof"){var F=N.collection();if(S.tile){var _=new Map,H=[],k=[],G=0,q={nodeIndexes:_,xCoords:H,yCoords:k},$=[];if(E.forEach(function(ie,fe){ie.edges().length==0&&(ie.nodes().forEach(function(ye,ce){F.merge(ie.nodes()[ce]),ye.isParent()||(q.nodeIndexes.set(ie.nodes()[ce].id(),G++),q.xCoords.push(ie.nodes()[0].position().x),q.yCoords.push(ie.nodes()[0].position().y))}),$.push(fe))}),F.length>1){E.push(F),b.push(q);for(var z=$.length-1;z>=0;z--)E.splice($[z],1),b.splice($[z],1)}}E.forEach(function(ie,fe){S.eles=ie,T.push(p(S,b[fe]))})}if(E.length>1){var V=[];E.forEach(function(ie,fe){var ye=void 0;S.quality=="draft"&&(ye=b[fe].nodeIndexes);var ce={};ce.nodes=[],ce.edges=[];var j=void 0;ie.nodes().forEach(function(O){if(S.quality=="draft")if(!O.isParent())j=ye.get(O.id()),ce.nodes.push({x:b[fe].xCoords[j]-O.boundingbox().w/2,y:b[fe].yCoords[j]-O.boundingbox().h/2,width:O.boundingbox().w,height:O.boundingbox().h});else{var X=c.calcBoundingBox(O,b[fe].xCoords,b[fe].yCoords,ye);ce.nodes.push({x:X.topLeftX,y:X.topLeftY,width:X.width,height:X.height})}else ce.nodes.push({x:T[fe][O.id()].getLeft(),y:T[fe][O.id()].getTop(),width:T[fe][O.id()].getWidth(),height:T[fe][O.id()].getHeight()})}),ie.edges().forEach(function(O){var X=O.source(),te=O.target();if(S.quality=="draft"){var ee=ye.get(X.id()),U=ye.get(te.id()),re=[],K=[];if(X.isParent()){var ae=c.calcBoundingBox(X,b[fe].xCoords,b[fe].yCoords,ye);re.push(ae.topLeftX+ae.width/2),re.push(ae.topLeftY+ae.height/2)}else re.push(b[fe].xCoords[ee]),re.push(b[fe].yCoords[ee]);if(te.isParent()){var se=c.calcBoundingBox(te,b[fe].xCoords,b[fe].yCoords,ye);K.push(se.topLeftX+se.width/2),K.push(se.topLeftY+se.height/2)}else K.push(b[fe].xCoords[U]),K.push(b[fe].yCoords[U]);ce.edges.push({startX:re[0],startY:re[1],endX:K[0],endY:K[1]})}else ce.edges.push({startX:T[fe][X.id()].getCenterX(),startY:T[fe][X.id()].getCenterY(),endX:T[fe][te.id()].getCenterX(),endY:T[fe][te.id()].getCenterY()})}),V.push(ce)});var B=C.packComponents(V,S.randomize).shifts;S.quality=="draft"?b.forEach(function(ie,fe){var ye=ie.xCoords.map(function(j){return j+B[fe].dx}),ce=ie.yCoords.map(function(j){return j+B[fe].dy});ie.xCoords=ye,ie.yCoords=ce}):T.forEach(function(ie,fe){Object.keys(ie).forEach(function(ye){var ce=ie[ye];ce.setCenter(ce.getCenterX()+B[fe].dx,ce.getCenterY()+B[fe].dy)})})}}else{if(S.randomize){var I=g(S);b.push(I)}(S.quality=="default"||S.quality=="proof")&&T.push(p(S,b[0]))}if(S.randomize&&!S.fixedNodeConstraint){var Y=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,J=Number.POSITIVE_INFINITY,le=Number.NEGATIVE_INFINITY;if(S.quality=="draft"){b.forEach(function(ie){ie.xCoords.forEach(function(fe){fe<Y&&(Y=fe),fe>W&&(W=fe)}),ie.yCoords.forEach(function(fe){fe<J&&(J=fe),fe>le&&(le=fe)})});var pe=S.eles.boundingBox(),Oe=pe.x1+pe.w/2-(W+Y)/2,Q=pe.y1+pe.h/2-(le+J)/2;b.forEach(function(ie){ie.xCoords=ie.xCoords.map(function(fe){return fe+Oe}),ie.yCoords=ie.yCoords.map(function(fe){return fe+Q})})}else{T.forEach(function(ie){Object.keys(ie).forEach(function(fe){var ye=ie[fe];ye.getCenterX()<Y&&(Y=ye.getCenterX()),ye.getCenterX()>W&&(W=ye.getCenterX()),ye.getCenterY()<J&&(J=ye.getCenterY()),ye.getCenterY()>le&&(le=ye.getCenterY())})});var oe=S.eles.boundingBox(),be=oe.x1+oe.w/2-(W+Y)/2,me=oe.y1+oe.h/2-(le+J)/2;T.forEach(function(ie,fe){Object.keys(ie).forEach(function(ye){var ce=ie[ye];ce.setCenter(ce.getCenterX()+be,ce.getCenterY()+me)})})}}}var de=function(fe,ye){if(S.quality=="default"||S.quality=="proof"){typeof fe=="number"&&(fe=ye);var ce=void 0,j=void 0,O=fe.data("id");return T.forEach(function(te){O in te&&(ce={x:te[O].getRect().getCenterX(),y:te[O].getRect().getCenterY()},j=te[O])}),S.nodeDimensionsIncludeLabels&&(j.labelWidth&&(j.labelPosHorizontal=="left"?ce.x+=j.labelWidth/2:j.labelPosHorizontal=="right"&&(ce.x-=j.labelWidth/2)),j.labelHeight&&(j.labelPosVertical=="top"?ce.y+=j.labelHeight/2:j.labelPosVertical=="bottom"&&(ce.y-=j.labelHeight/2))),{x:ce.x,y:ce.y}}else{var X=void 0;return b.forEach(function(te){var ee=te.nodeIndexes.get(fe.id());ee!=null&&(X={x:te.xCoords[ee],y:te.yCoords[ee]})}),X==null&&(X={x:fe.position("x"),y:fe.position("y")}),{x:X.x,y:X.y}}};S.quality=="default"||S.quality=="proof"||S.randomize?(S.eles=M,M.nodes().not(":parent").layoutPositions(A,S,de)):console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),x}();s.exports=w},657:(s,l,u)=>{var f=u(548),h=u(281).layoutBase.Matrix,v=u(281).layoutBase.SVD,c=function(g){var m=g.cy,p=g.eles,y=p.nodes(),w=p.nodes(":parent"),x=new Map,L=new Map,A=new Map,S=[],N=[],M=[],b=[],T=[],E=[],D=[],C=[],P=void 0,I=1e8,R=1e-9,F=g.piTol,_=g.samplingType,H=g.nodeSeparation,k=void 0,G=function(){for(var ue=0,he=0,ge=!1;he<k;){ue=Math.floor(Math.random()*P),ge=!1;for(var ne=0;ne<he;ne++)if(b[ne]==ue){ge=!0;break}if(!ge)b[he]=ue,he++;else continue}},q=function(ue,he,ge){for(var ne=[],ve=0,Te=0,Le=0,Me=void 0,Ce=[],Ee=0,xe=1,Ae=0;Ae<P;Ae++)Ce[Ae]=I;for(ne[Te]=ue,Ce[ue]=0;Te>=ve;){Le=ne[ve++];for(var De=S[Le],Se=0;Se<De.length;Se++)Me=L.get(De[Se]),Ce[Me]==I&&(Ce[Me]=Ce[Le]+1,ne[++Te]=Me);E[Le][he]=Ce[Le]*H}if(ge){for(var ze=0;ze<P;ze++)E[ze][he]<T[ze]&&(T[ze]=E[ze][he]);for(var ke=0;ke<P;ke++)T[ke]>Ee&&(Ee=T[ke],xe=ke)}return xe},$=function(ue){var he=void 0;if(ue){he=Math.floor(Math.random()*P);for(var ne=0;ne<P;ne++)T[ne]=I;for(var ve=0;ve<k;ve++)b[ve]=he,he=q(he,ve,ue)}else{G();for(var ge=0;ge<k;ge++)q(b[ge],ge,ue)}for(var Te=0;Te<P;Te++)for(var Le=0;Le<k;Le++)E[Te][Le]*=E[Te][Le];for(var Me=0;Me<k;Me++)D[Me]=[];for(var Ce=0;Ce<k;Ce++)for(var Ee=0;Ee<k;Ee++)D[Ce][Ee]=E[b[Ee]][Ce]},z=function(){for(var ue=v.svd(D),he=ue.S,ge=ue.U,ne=ue.V,ve=he[0]*he[0]*he[0],Te=[],Le=0;Le<k;Le++){Te[Le]=[];for(var Me=0;Me<k;Me++)Te[Le][Me]=0,Le==Me&&(Te[Le][Me]=he[Le]/(he[Le]*he[Le]+ve/(he[Le]*he[Le])))}C=h.multMat(h.multMat(ne,Te),h.transpose(ge))},V=function(){for(var ue=void 0,he=void 0,ge=[],ne=[],ve=[],Te=[],Le=0;Le<P;Le++)ge[Le]=Math.random(),ne[Le]=Math.random();ge=h.normalize(ge),ne=h.normalize(ne);for(var Me=R,Ce=R,Ee=void 0;;){for(var xe=0;xe<P;xe++)ve[xe]=ge[xe];if(ge=h.multGamma(h.multL(h.multGamma(ve),E,C)),ue=h.dotProduct(ve,ge),ge=h.normalize(ge),Me=h.dotProduct(ve,ge),Ee=Math.abs(Me/Ce),Ee<=1+F&&Ee>=1)break;Ce=Me}for(var Ae=0;Ae<P;Ae++)ve[Ae]=ge[Ae];for(Ce=R;;){for(var De=0;De<P;De++)Te[De]=ne[De];if(Te=h.minusOp(Te,h.multCons(ve,h.dotProduct(ve,Te))),ne=h.multGamma(h.multL(h.multGamma(Te),E,C)),he=h.dotProduct(Te,ne),ne=h.normalize(ne),Me=h.dotProduct(Te,ne),Ee=Math.abs(Me/Ce),Ee<=1+F&&Ee>=1)break;Ce=Me}for(var Se=0;Se<P;Se++)Te[Se]=ne[Se];N=h.multCons(ve,Math.sqrt(Math.abs(ue))),M=h.multCons(Te,Math.sqrt(Math.abs(he)))};f.connectComponents(m,p,f.getTopMostNodes(y),x),w.forEach(function(se){f.connectComponents(m,p,f.getTopMostNodes(se.descendants().intersection(p)),x)});for(var B=0,Y=0;Y<y.length;Y++)y[Y].isParent()||L.set(y[Y].id(),B++);var W=!0,J=!1,le=void 0;try{for(var pe=x.keys()[Symbol.iterator](),Oe;!(W=(Oe=pe.next()).done);W=!0){var Q=Oe.value;L.set(Q,B++)}}catch(se){J=!0,le=se}finally{try{!W&&pe.return&&pe.return()}finally{if(J)throw le}}for(var oe=0;oe<L.size;oe++)S[oe]=[];w.forEach(function(se){for(var ue=se.children().intersection(p);ue.nodes(":childless").length==0;)ue=ue.nodes()[0].children().intersection(p);var he=0,ge=ue.nodes(":childless")[0].connectedEdges().length;ue.nodes(":childless").forEach(function(ne,ve){ne.connectedEdges().length<ge&&(ge=ne.connectedEdges().length,he=ve)}),A.set(se.id(),ue.nodes(":childless")[he].id())}),y.forEach(function(se){var ue=void 0;se.isParent()?ue=L.get(A.get(se.id())):ue=L.get(se.id()),se.neighborhood().nodes().forEach(function(he){p.intersection(se.edgesWith(he)).length>0&&(he.isParent()?S[ue].push(A.get(he.id())):S[ue].push(he.id()))})});var be=function(ue){var he=L.get(ue),ge=void 0;x.get(ue).forEach(function(ne){m.getElementById(ne).isParent()?ge=A.get(ne):ge=ne,S[he].push(ge),S[L.get(ge)].push(ue)})},me=!0,de=!1,ie=void 0;try{for(var fe=x.keys()[Symbol.iterator](),ye;!(me=(ye=fe.next()).done);me=!0){var ce=ye.value;be(ce)}}catch(se){de=!0,ie=se}finally{try{!me&&fe.return&&fe.return()}finally{if(de)throw ie}}P=L.size;var j=void 0;if(P>2){k=P<g.sampleSize?P:g.sampleSize;for(var O=0;O<P;O++)E[O]=[];for(var X=0;X<k;X++)C[X]=[];return g.quality=="draft"||g.step=="all"?($(_),z(),V(),j={nodeIndexes:L,xCoords:N,yCoords:M}):(L.forEach(function(se,ue){N.push(m.getElementById(ue).position("x")),M.push(m.getElementById(ue).position("y"))}),j={nodeIndexes:L,xCoords:N,yCoords:M}),j}else{var te=L.keys(),ee=m.getElementById(te.next().value),U=ee.position(),re=ee.outerWidth();if(N.push(U.x),M.push(U.y),P==2){var K=m.getElementById(te.next().value),ae=K.outerWidth();N.push(U.x+re/2+ae/2+g.idealEdgeLength),M.push(U.y)}return j={nodeIndexes:L,xCoords:N,yCoords:M},j}};s.exports={spectralLayout:c}},579:(s,l,u)=>{var f=u(212),h=function(c){!c||c("layout","fcose",f)};typeof cytoscape<"u"&&h(cytoscape),s.exports=h},281:s=>{s.exports=r}},a={};function o(s){var l=a[s];if(l!==void 0)return l.exports;var u=a[s]={exports:{}};return n[s](u,u.exports,o),u.exports}var i=o(579);return i})()})})($f);const A1=$f.exports;Hf.use(A1);const O1=()=>{fetch("./medical_mss.csv").then(t=>t.text()).then(t=>{lv(t,{columns:!0},(e,r)=>{if(e)return console.log(e.message);new R1(r).draw(),new I1(r).draw()})})},Un=t=>t.trim().replace(/\*$/,"").replace(/\s+/g,"_"),ja=t=>{const e=t.trim().replace(/\*$/,""),[r,n]=e.split("-");return n?parseInt(r)+parseInt(n)/2:parseInt(r)},Ho=[{selector:"node",style:{"background-color":"#666",label:"data(label)","font-family":"brill, et-book, Palatino, Palatino Linotype, Palatino LT STD, Book Antiqua, Georgia, serif"}},{selector:"node.place",style:{"background-opacity":"0",label:"data(id)","text-valign":"center","font-size":"40px"}},{selector:"node.manuscript",style:{label:"",shape:"rectangle",width:"data(width)",height:"data(height)","background-opacity":"0.5"}},{selector:"node.manuscript.clicked",style:{label:"data(popup)"}},{selector:"edge",style:{width:1,label:"","font-family":"brill, et-book, Palatino, Palatino Linotype, Palatino LT STD, Book Antiqua, Georgia, serif","text-rotation":"autorotate","line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"none","line-opacity":"0.5","text-opacity":"1","curve-style":"bezier"}},{selector:"edge.scribe, edge.editor, edge.procurer",style:{"line-opacity":"0.8"}},{selector:"edge.clicked",style:{label:"data(popup)","line-opacity":"1"}},{selector:"edge.scribe",style:{width:2,"line-color":"#1b9e77","target-arrow-color":"#1b9e77"}},{selector:"edge.editor",style:{width:2,"line-color":"#d95f02","target-arrow-color":"#d95f02"}},{selector:"edge.procurer",style:{width:2,"line-color":"#7570b3","target-arrow-color":"#7570b3"}},{selector:"node.scribe, node.procurer, node.editor",style:{width:10,height:10,"background-opacity":"0.8"}}],ei=[["scribe","#1b9e77"],["editor","#d95f02"],["procurer","#7570b3"]];for(const t of ei)Ho.push({selector:`node.${t[0]}`,style:{"background-color":t[1]}});Ho.push({selector:"node.scribe.editor",style:{"background-fill":"linear-gradient","background-gradient-stop-colors":`${ei[0][1]} ${ei[1][1]}`}});class R1{constructor(e){const r=[{nodeId:"Jammu",position:{x:74.91114,y:32.64393}},{nodeId:"Calcutta",position:{x:88.35035,y:22.55523}},{nodeId:"Poona",position:{x:73.83604,y:18.51827}},{nodeId:"Benares",position:{x:82.99792,y:25.32882}},{nodeId:"Madras",position:{x:80.28337,y:13.06681}},{nodeId:"Pondicherry",position:{x:79.83411,y:11.92781}},{nodeId:"Tanjore",position:{x:79.13659,y:10.79187}},{nodeId:"Alwar",position:{x:76.59406,y:27.56964}},{nodeId:"Bikaner",position:{x:73.32865,y:28.01687}}];this.coords_scaled=r.map(n=>({nodeId:n.nodeId,position:{x:n.position.x*100,y:-n.position.y*100}})),this.mss=new Map,this.people=new Map,this.places=new Map,this.edges=[],this.parseData(e)}addPerson(e,r,n){const a=e[n].replace(/\[.+\]/,"").split(";"),o=n.toLowerCase();for(const i of a){const s=Un(i);if(!!s){if(!this.people.has(s))this.people.set(s,{data:{id:Un(i),label:i.replace(/\*$/,""),roles:new Set([n])},classes:o});else{const l=this.people.get(s);l.data.roles.add(o),l.classes=[...l.data.roles].join(" ")}this.edges.push({data:{id:`${s}-${r}`,source:s,target:r,popup:o},classes:o})}}}parseData(e){for(const r of e){const n=(s=>s==="Chandernagor"?"Calcutta":s)(Un(r["Copy place"]));if(n===""||n==="Besan\xE7on")continue;const a=Un(r.Shelfmark),o=ja(r.Width),i=ja(r.Height);this.mss.set(a,{data:{id:a,width:o/10,height:i/10,popup:r.Shelfmark},classes:"manuscript"}),n&&(this.places.has(n)||this.places.set(n,{data:{id:n,label:n},classes:"place"}),this.edges.push({data:{id:`${n}-${a}`,source:n,target:a,popup:"copy place"},classes:"place"})),this.addPerson(r,a,"Scribe"),this.addPerson(r,a,"Procurer"),this.addPerson(r,a,"Editor")}}draw(){const e=Hf({container:document.getElementById("fig-people"),elements:[...this.mss.values(),...this.places.values(),...this.people.values(),...this.edges],layout:{name:"fcose",nodeDimensionsIncludeLabels:!0,idealEdgeLength:n=>n.hasClass("place")?50:150,edgeElasticity:n=>n.hasClass("place")?1.5:.2,fixedNodeConstraint:this.coords_scaled,relativePlacementConstraint:[{top:"Calcutta",bottom:"Palmyr_Cordier",gap:500},{right:"Calcutta",left:"Palmyr_Cordier",gap:400}],stop:()=>e.minZoom(e.zoom())},style:Ho});e.$("node.place").ungrabify(),e.on("mouseup",this.mouseUp.bind(null,e));const r=document.getElementById("fig-people-legend");r&&P1(r)}mouseUp(e,r){e.$(".clicked").removeClass("clicked"),xl.remove(r),r.target.data("popup")&&(xl.make(r),r.target.addClass("clicked"))}}const xl={make:function(t){const e=t.target;if(!e.data())return;var n=document.getElementById("tooltip");const a=document.createElement("div");if(n){for(const o of n.childNodes)if(o.myTarget===e)return;a.appendChild(document.createElement("hr"))}else n=document.createElement("div"),n.id="tooltip",n.style.top=t.renderedPosition.y+10+"px",n.style.left=t.renderedPosition.x+10+"px",n.style.opacity=0,n.style.transition="opacity 0.2s ease-in",document.body.appendChild(n);a.myTarget=e,n.appendChild(a),n.animate([{opacity:0},{opacity:1,easing:"ease-in"}],1e3)},remove:function(t){const e=document.getElementById("tooltip");e&&e.remove()}};class I1{constructor(e){this.places=new Map([["Jammu",{mss:[],width:[],height:[]}],["Bikaner",{mss:[],width:[],height:[]}],["Madras",{mss:[],width:[],height:[]}],["Tanjore",{mss:[],width:[],height:[]}]]);for(const r of e){const n=(i=>i==="Chandernagor"?"Calcutta":i)(Un(r["Copy place"]));if(n===""||n==="Besan\xE7on")continue;const a=ja(r.Width)/3,o=ja(r.Height)/3;if(this.places.has(n)){const i=this.places.get(n);a>i.width&&(i.width=a),o>i.height&&(i.height=o),i.mss.push({width:a,height:o})}}}draw(){const e=document.getElementById("fig-size");for(const[r,n]of this.places){const a=document.createElement("figure"),o=document.createElement("div");o.style.width=`${n.width}px`,o.style.height=`${n.height}px`,n.mss.sort((s,l)=>s.width*s.height>l.width*l.height?-1:1);for(const s of n.mss){const l=document.createElement("div");l.className="ms",l.style.width=`${s.width}px`,l.style.height=`${s.height}px`,o.append(l)}const i=document.createElement("figcaption");i.append(r),a.append(o),a.append(i),e.append(a)}}}const P1=t=>{for(const e of ei){const r=document.createElement("div"),n=document.createElement("span");n.style.color=e[1],n.append("\u25CF"),r.append(n),r.append(e[0]),t.append(r)}},F1={init:O1};F1.init();
